<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:185,&quot;tests&quot;:323,&quot;passes&quot;:323,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2021-10-06T15:58:51.555Z&quot;,&quot;end&quot;:&quot;2021-10-06T16:00:32.845Z&quot;,&quot;duration&quot;:101290,&quot;testsRegistered&quot;:323,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;81c33ff4-6562-4863-bbc9-55d869e56077&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  itinerary.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45593d75-3412-4bf1-918c-92fb5ed082af&quot;,&quot;parentUUID&quot;:&quot;81c33ff4-6562-4863-bbc9-55d869e56077&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fd4f85ea-6c84-49e8-81cd-e4338e5bced3&quot;,&quot;title&quot;:&quot;*********** AUTH_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** AUTH_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** AUTH_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  User.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3354d567-b9bf-4b52-af63-70ee9a569aa2&quot;,&quot;parentUUID&quot;:&quot;fd4f85ea-6c84-49e8-81cd-e4338e5bced3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;06f6fba7-b00e-43cd-8217-afcbcddad64d&quot;,&quot;title&quot;:&quot;/GET /&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET home user url&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /GET / it should GET home user url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:43,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43554aeb-5636-49fb-8249-33d7d1dcbdcd&quot;,&quot;parentUUID&quot;:&quot;06f6fba7-b00e-43cd-8217-afcbcddad64d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;43554aeb-5636-49fb-8249-33d7d1dcbdcd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:43,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;c3bb1a6c-131b-48a7-be71-0c58d9e83648&quot;,&quot;title&quot;:&quot;/GET /404url&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET 404 url&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /GET /404url it should GET 404 url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(&#x27;/404url&#x27;)\n  .end((err, res) =&gt; {\n    res.should.have.status(404)\n    res.body.should.be.an(&#x27;object&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80c163c8-ca5d-4ab4-839b-d7cdde49655e&quot;,&quot;parentUUID&quot;:&quot;c3bb1a6c-131b-48a7-be71-0c58d9e83648&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;80c163c8-ca5d-4ab4-839b-d7cdde49655e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;232053b0-1603-4e78-a271-2c88e8a10114&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;error login&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /POST login error login&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:220,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send({ email: &#x27;admin@admin.com&#x27;, password: &#x27;error password&#x27; })\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.have.property(&#x27;errors&#x27;).eql({ msg: { msg: &#x27;WRONG_PASSWORD&#x27; } })\n    res.body.should.be.an(&#x27;object&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;555433e2-ba97-4941-8142-302e6e0902b5&quot;,&quot;parentUUID&quot;:&quot;232053b0-1603-4e78-a271-2c88e8a10114&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET token&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /POST login it should GET token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:289,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    token = res.body.accessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5a75f80-ce8e-485b-89b9-c89d616ab548&quot;,&quot;parentUUID&quot;:&quot;232053b0-1603-4e78-a271-2c88e8a10114&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;555433e2-ba97-4941-8142-302e6e0902b5&quot;,&quot;b5a75f80-ce8e-485b-89b9-c89d616ab548&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:509,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;90144a13-4f99-46c2-adf8-2cd539286233&quot;,&quot;title&quot;:&quot;/POST register&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should POST register&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /POST register it should POST register&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:101,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  name: faker.random.words(),\n  surname: faker.random.words(),\n  email,\n  password: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/register`)\n  .send(user)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    body.user.should.have.property(&#x27;email&#x27;).eql(email.toLowerCase())\n    createdID.push(res.body.user._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d50a2dc-2ae7-41e1-b858-3067f7222698&quot;,&quot;parentUUID&quot;:&quot;90144a13-4f99-46c2-adf8-2cd539286233&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT POST a register empty values&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /POST register it should NOT POST a register empty values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  surname: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/register`)\n  .send(user)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a17810b3-c54e-47a7-9ba5-020a86c7e2df&quot;,&quot;parentUUID&quot;:&quot;90144a13-4f99-46c2-adf8-2cd539286233&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT POST a register if email already exists&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /POST register it should NOT POST a register if email already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:117,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  name: faker.random.words(),\n  surname: faker.random.words(),\n  email,\n  password: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/register`)\n  .send(user)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { msg } = body.errors\n    const message = `E11000 duplicate key error collection: oauth_service.users index: email_1 dup key: { email: \&quot;${email.toLowerCase()}\&quot; }`\n    msg.should.have.property(&#x27;msg&#x27;).eql(message)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;901e1d61-bb92-4c24-bbd3-a094445b4f9d&quot;,&quot;parentUUID&quot;:&quot;90144a13-4f99-46c2-adf8-2cd539286233&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d50a2dc-2ae7-41e1-b858-3067f7222698&quot;,&quot;a17810b3-c54e-47a7-9ba5-020a86c7e2df&quot;,&quot;901e1d61-bb92-4c24-bbd3-a094445b4f9d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:222,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;afea712e-ca3f-460f-bac8-6fd9cf03875c&quot;,&quot;title&quot;:&quot;/POST forgot&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should Error  POST forgot&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /POST forgot it should Error  POST forgot&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:103,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/forgot`)\n  .send({\n    email: faker.internet.email()\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    body.errors.should.have.property(&#x27;msg&#x27;).eql({ msg: &#x27;USER_DOES_NOT_EXIST&#x27; })\n    verificationForgot = res.body.verification\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3a509c8-eab9-499d-af1e-4ef3a6eca039&quot;,&quot;parentUUID&quot;:&quot;afea712e-ca3f-460f-bac8-6fd9cf03875c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST forgot&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /POST forgot it should POST forgot&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:238,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const object = {\n  email\n}\nchai\n  .request(server)\n  .post(`${url}/forgot`)\n  .send(object)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;msg&#x27;, &#x27;verification&#x27;)\n    verificationForgot = res.body.verification\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6a1e477-9fbc-4c9c-80f6-911b97074695&quot;,&quot;parentUUID&quot;:&quot;afea712e-ca3f-460f-bac8-6fd9cf03875c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3a509c8-eab9-499d-af1e-4ef3a6eca039&quot;,&quot;e6a1e477-9fbc-4c9c-80f6-911b97074695&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:341,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;b1c438a1-2da2-4f4f-bc3c-e0f0a94b5d76&quot;,&quot;title&quot;:&quot;/POST reset&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should POST reset&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /POST reset it should POST reset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:367,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/resetAdmin`)\n  .send({\n    id: verificationForgot,\n    password: &#x27;12345&#x27;\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;msg&#x27;).eql(&#x27;PASSWORD_CHANGED&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;610ac548-edce-4fc5-a32a-963bd83da71c&quot;,&quot;parentUUID&quot;:&quot;b1c438a1-2da2-4f4f-bc3c-e0f0a94b5d76&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;610ac548-edce-4fc5-a32a-963bd83da71c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:367,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;fc976aa6-a422-40a3-b049-295e55a232c3&quot;,&quot;title&quot;:&quot;/GET token&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /GET token it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/token`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2aba34cf-2deb-4f16-a4c5-4922ed44ef1f&quot;,&quot;parentUUID&quot;:&quot;fc976aa6-a422-40a3-b049-295e55a232c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /GET token it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:403,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken: token\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6cb3e015-cbc1-4416-8ac0-e9b63740dcb8&quot;,&quot;parentUUID&quot;:&quot;fc976aa6-a422-40a3-b049-295e55a232c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET refresh token&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_ADMIN *********** /GET token it should GET refresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:455,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/token`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;, &#x27;settings&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40b77a8a-51ee-43b3-a5d5-60392f402550&quot;,&quot;parentUUID&quot;:&quot;fc976aa6-a422-40a3-b049-295e55a232c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2aba34cf-2deb-4f16-a4c5-4922ed44ef1f&quot;,&quot;6cb3e015-cbc1-4416-8ac0-e9b63740dcb8&quot;,&quot;40b77a8a-51ee-43b3-a5d5-60392f402550&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:861,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;f1b19726-2ec9-4983-b486-431ebf8c60b4&quot;,&quot;title&quot;:&quot;*********** BLOGS_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\blogs.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\blogs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** BLOGS_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** BLOGS_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((idBlog) =&gt; {\n  Blog.findByIdAndRemove(idBlog, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccc146f4-98b8-4052-852d-54c87815a7a8&quot;,&quot;parentUUID&quot;:&quot;f1b19726-2ec9-4983-b486-431ebf8c60b4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9730bcf6-1c49-42e7-ada6-a2cf5b318186&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\blogs.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\blogs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:278,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6e3d14a-d3bd-4799-b62e-b2d0d45cb7f8&quot;,&quot;parentUUID&quot;:&quot;9730bcf6-1c49-42e7-ada6-a2cf5b318186&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:360,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83e90b83-4d1e-4f05-a3f2-8cc47e9f5f87&quot;,&quot;parentUUID&quot;:&quot;9730bcf6-1c49-42e7-ada6-a2cf5b318186&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6e3d14a-d3bd-4799-b62e-b2d0d45cb7f8&quot;,&quot;83e90b83-4d1e-4f05-a3f2-8cc47e9f5f87&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:638,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;ac293432-faae-400e-9cd4-b4d590fcf838&quot;,&quot;title&quot;:&quot;/POST blogs&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\blogs.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\blogs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a blogs without blogs&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_ADMIN *********** /POST blogs it should NOT POST a blogs without blogs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:196,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const blogPostOne = {}\nchai\n  .request(server)\n  .post(`${url}/blogs`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(blogPostOne)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;).length(4)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e42f9d5-7c78-4e93-bc1e-9a3e20856d5a&quot;,&quot;parentUUID&quot;:&quot;ac293432-faae-400e-9cd4-b4d590fcf838&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a blogs &quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_ADMIN *********** /POST blogs it should POST a blogs &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:363,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const blogsPostTwo = {\n  title,\n  description\n}\nchai\n  .request(server)\n  .post(`${url}/blogs`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(blogsPostTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;title&#x27;).eql(title)\n    body.should.have.property(&#x27;description&#x27;).eql(description)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;title&#x27;, &#x27;description&#x27;, &#x27;userCreator&#x27;, &#x27;slug&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ae2bc46-ffab-4d3e-8a20-ca30a049ca57&quot;,&quot;parentUUID&quot;:&quot;ac293432-faae-400e-9cd4-b4d590fcf838&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_ADMIN *********** /POST blogs it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const blogsPostTwo = {\n  title,\n  description\n}\nchai\n  .request(server)\n  .post(`${url}/blogs`)\n  .send(blogsPostTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c53e2ff-264a-4e62-8e42-ca894348dc60&quot;,&quot;parentUUID&quot;:&quot;ac293432-faae-400e-9cd4-b4d590fcf838&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e42f9d5-7c78-4e93-bc1e-9a3e20856d5a&quot;,&quot;6ae2bc46-ffab-4d3e-8a20-ca30a049ca57&quot;,&quot;7c53e2ff-264a-4e62-8e42-ca894348dc60&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:563,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;c929d00c-93ee-41b5-adb2-e4412f432369&quot;,&quot;title&quot;:&quot;/PATCH/:id blogs&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\blogs.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\blogs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a blogs given the id&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_ADMIN *********** /PATCH/:id blogs it should UPDATE a blogs given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:273,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const firstBlog = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/blogs/${firstBlog}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({\n    title: newtitle,\n    description: newDescription\n  })\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;title&#x27;, &#x27;description&#x27;, &#x27;userCreator&#x27;, &#x27;slug&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(firstBlog)\n    body.should.have.property(&#x27;title&#x27;).eql(newtitle)\n    body.should.have.property(&#x27;description&#x27;).eql(newDescription)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3ac2e9a-006d-4bf8-8cdd-d6c3eb3056c2&quot;,&quot;parentUUID&quot;:&quot;c929d00c-93ee-41b5-adb2-e4412f432369&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_ADMIN *********** /PATCH/:id blogs it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const secondId = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/blogs/${secondId}`)\n  .send({\n    title: newtitle,\n    description: newDescription\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1c937b1-00b0-4fd9-b4de-c3c6bd1b53d0&quot;,&quot;parentUUID&quot;:&quot;c929d00c-93ee-41b5-adb2-e4412f432369&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b3ac2e9a-006d-4bf8-8cdd-d6c3eb3056c2&quot;,&quot;a1c937b1-00b0-4fd9-b4de-c3c6bd1b53d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:275,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;8562940b-6e04-4756-a5c9-75d9a18b75f3&quot;,&quot;title&quot;:&quot;/DELETE/:id blogs&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\blogs.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\blogs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a blogs given the id&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_ADMIN *********** /DELETE/:id blogs it should DELETE a blogs given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:639,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const blogsdelete = {\n  title: faker.random.words(),\n  description: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/blogs`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(blogsdelete)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;description&#x27;,\n      &#x27;title&#x27;,\n      &#x27;slug&#x27;\n    )\n    chai\n      .request(server)\n      .delete(`${url}/blogs/${res.body._id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfc2788e-86a1-4650-aee8-6318be8f1898&quot;,&quot;parentUUID&quot;:&quot;8562940b-6e04-4756-a5c9-75d9a18b75f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dfc2788e-86a1-4650-aee8-6318be8f1898&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:639,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;d1bdc5a0-e4d6-4052-8224-166bc9b35fd6&quot;,&quot;title&quot;:&quot;*********** CATEGORIES_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\categories.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\categories.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** CATEGORIES_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** CATEGORIES_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  category.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5b7b314-c738-4b00-9001-f7f59e152dde&quot;,&quot;parentUUID&quot;:&quot;d1bdc5a0-e4d6-4052-8224-166bc9b35fd6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bab7d4a8-b475-42be-96db-cfb0a6235492&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\categories.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\categories.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:266,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec5b1242-cade-420f-8f21-01ffe4272a5b&quot;,&quot;parentUUID&quot;:&quot;bab7d4a8-b475-42be-96db-cfb0a6235492&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:358,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6305d2b-7705-4f13-9ffd-fc9732fcd17f&quot;,&quot;parentUUID&quot;:&quot;bab7d4a8-b475-42be-96db-cfb0a6235492&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec5b1242-cade-420f-8f21-01ffe4272a5b&quot;,&quot;d6305d2b-7705-4f13-9ffd-fc9732fcd17f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:624,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;56d14127-043d-4369-9469-90762ec69a2d&quot;,&quot;title&quot;:&quot;/POST categories&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\categories.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\categories.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a category without category&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_ADMIN *********** /POST categories it should NOT POST a category without category&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:190,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const categoryPostOne = {}\nchai\n  .request(server)\n  .post(`${url}/categories`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(categoryPostOne)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2046126f-d890-4c48-aaac-4b87f38c9951&quot;,&quot;parentUUID&quot;:&quot;56d14127-043d-4369-9469-90762ec69a2d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a category &quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_ADMIN *********** /POST categories it should POST a category &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:267,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const categoryPostTwo = {\n  name,\n  icon,\n  description\n}\nchai\n  .request(server)\n  .post(`${url}/categories`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(categoryPostTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;name&#x27;, &#x27;description&#x27;)\n    body.should.have.property(&#x27;name&#x27;).eql(name)\n    body.should.have.property(&#x27;description&#x27;).eql(description)\n    body.should.have.property(&#x27;_id&#x27;).be.a(&#x27;string&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecf0d56f-5dea-432c-a3f7-8ab48f7b869b&quot;,&quot;parentUUID&quot;:&quot;56d14127-043d-4369-9469-90762ec69a2d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2046126f-d890-4c48-aaac-4b87f38c9951&quot;,&quot;ecf0d56f-5dea-432c-a3f7-8ab48f7b869b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:457,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;1511cab8-7dd2-44ea-8139-91a8ccba9b65&quot;,&quot;title&quot;:&quot;/GET/:id categories&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\categories.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\categories.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a categories by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_ADMIN *********** /GET/:id categories it should GET a categories by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/categories/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;name&#x27;, &#x27;description&#x27;, &#x27;_id&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51390cba-3004-44fd-9881-4ff23eb7050f&quot;,&quot;parentUUID&quot;:&quot;1511cab8-7dd2-44ea-8139-91a8ccba9b65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_ADMIN *********** /GET/:id categories it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/categories/${id}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a942cc6-7321-47be-bbe5-cb408ba3cf53&quot;,&quot;parentUUID&quot;:&quot;1511cab8-7dd2-44ea-8139-91a8ccba9b65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51390cba-3004-44fd-9881-4ff23eb7050f&quot;,&quot;3a942cc6-7321-47be-bbe5-cb408ba3cf53&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:261,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;f24dc6f6-86f9-4f4f-9de0-a6492c1666a4&quot;,&quot;title&quot;:&quot;/PATCH/:id categories&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\categories.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\categories.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a category given the id&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_ADMIN *********** /PATCH/:id categories it should UPDATE a category given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:275,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/categories/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({\n    name: newCategory,\n    icon: faker.random.words(),\n    description: faker.random.words()\n  })\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.have.property(&#x27;name&#x27;).eql(newCategory)\n    body._id.should.be.a(&#x27;string&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccab9414-66d9-429d-91b9-86cf25478375&quot;,&quot;parentUUID&quot;:&quot;f24dc6f6-86f9-4f4f-9de0-a6492c1666a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not UPDATE a departure empty&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_ADMIN *********** /PATCH/:id categories it should not UPDATE a departure empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:171,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/categories/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({})\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77abdbca-1d70-4c22-87b8-224628a48666&quot;,&quot;parentUUID&quot;:&quot;f24dc6f6-86f9-4f4f-9de0-a6492c1666a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_ADMIN *********** /PATCH/:id categories it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/categories/${id}`)\n  .send({\n    name: newCategory,\n    icon: faker.random.words(),\n    description: faker.random.words()\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;348879d8-8862-45d2-9490-9ac3f494d35e&quot;,&quot;parentUUID&quot;:&quot;f24dc6f6-86f9-4f4f-9de0-a6492c1666a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ccab9414-66d9-429d-91b9-86cf25478375&quot;,&quot;77abdbca-1d70-4c22-87b8-224628a48666&quot;,&quot;348879d8-8862-45d2-9490-9ac3f494d35e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:450,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;3a000dfa-2f43-45d6-8d85-8db550ecf987&quot;,&quot;title&quot;:&quot;/DELETE/:id category&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\categories.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\categories.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a category given the id&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_ADMIN *********** /DELETE/:id category it should DELETE a category given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:555,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const categorydelete = {\n  name: faker.random.words(),\n  icon: faker.random.words(),\n  description: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/categories`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(categorydelete)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;name&#x27;,\n      &#x27;icon&#x27;,\n      &#x27;description&#x27;\n    )\n    chai\n      .request(server)\n      .delete(`${url}/categories/${res.body._id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eae8867e-a878-4dec-857b-082b5c0390c8&quot;,&quot;parentUUID&quot;:&quot;3a000dfa-2f43-45d6-8d85-8db550ecf987&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eae8867e-a878-4dec-857b-082b5c0390c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:555,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;8d743c90-8cf7-4eed-b2b3-844f55720388&quot;,&quot;title&quot;:&quot;*********** COMMENTS_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\comments.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\comments.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** COMMENTS_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** COMMENTS_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  comment.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;576e8db1-bab9-4e87-9638-77ff97d3b09a&quot;,&quot;parentUUID&quot;:&quot;8d743c90-8cf7-4eed-b2b3-844f55720388&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b899f07b-ce83-4e98-a0c9-7163533ab4d4&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\comments.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\comments.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:276,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42c1401b-2844-4b0a-85d0-6293817d0189&quot;,&quot;parentUUID&quot;:&quot;b899f07b-ce83-4e98-a0c9-7163533ab4d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:375,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dafb02b0-f58c-4a5f-87c9-40b99bf1e40f&quot;,&quot;parentUUID&quot;:&quot;b899f07b-ce83-4e98-a0c9-7163533ab4d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42c1401b-2844-4b0a-85d0-6293817d0189&quot;,&quot;dafb02b0-f58c-4a5f-87c9-40b99bf1e40f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:651,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;070452d6-8567-4f5b-b123-00b5c124499e&quot;,&quot;title&quot;:&quot;/POST comments&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\comments.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\comments.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a comment without comment&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /POST comments it should NOT POST a comment without comment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:87,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const commentPostOne = {}\nchai\n  .request(server)\n  .post(`${url}/comments`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(commentPostOne)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43402f03-846d-4186-bbcb-b1de3e8a45b5&quot;,&quot;parentUUID&quot;:&quot;070452d6-8567-4f5b-b123-00b5c124499e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a comment &quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /POST comments it should POST a comment &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:196,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const commentPostTwo = {\n  vote: 3,\n  content,\n  idUser,\n  status: &#x27;publish&#x27;,\n  tags: [&#x27;tren&#x27;]\n}\nchai\n  .request(server)\n  .post(`${url}/comments`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(commentPostTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;vote&#x27;, &#x27;content&#x27;)\n    body.should.have.property(&#x27;status&#x27;).eql(&#x27;publish&#x27;)\n    body.should.have.property(&#x27;content&#x27;).eql(content)\n    body.should.have.property(&#x27;_id&#x27;).be.a(&#x27;string&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f0c572e-b358-4fb1-9230-c74d881241ca&quot;,&quot;parentUUID&quot;:&quot;070452d6-8567-4f5b-b123-00b5c124499e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;43402f03-846d-4186-bbcb-b1de3e8a45b5&quot;,&quot;4f0c572e-b358-4fb1-9230-c74d881241ca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:283,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;844d5008-016d-402c-8abb-880e555e3887&quot;,&quot;title&quot;:&quot;/GET comments&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\comments.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\comments.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the comments&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /GET comments it should GET all the comments&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:189,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/comments`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    const { docs } = body\n    const commentFirst = _.head(docs)\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.have.lengthOf(1)\n    id = commentFirst._id\n    commentFirst.should.include.keys(&#x27;_id&#x27;, &#x27;content&#x27;, &#x27;vote&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6cd9e8d-1b4f-40c7-ad52-160349013f41&quot;,&quot;parentUUID&quot;:&quot;844d5008-016d-402c-8abb-880e555e3887&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not GET comments unauthorized&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /GET comments it should not GET comments unauthorized&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/comments`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d85484db-899d-4b54-a812-32acc48c9355&quot;,&quot;parentUUID&quot;:&quot;844d5008-016d-402c-8abb-880e555e3887&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6cd9e8d-1b4f-40c7-ad52-160349013f41&quot;,&quot;d85484db-899d-4b54-a812-32acc48c9355&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:192,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;445b8368-4f9d-4570-a635-2abeeb23254b&quot;,&quot;title&quot;:&quot;/GET/:id comments&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\comments.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\comments.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a comments by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /GET/:id comments it should GET a comments by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:173,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/comments/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;status&#x27;, &#x27;tags&#x27;, &#x27;_id&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8b464f0-1800-496e-8159-d2fbedcb2aa4&quot;,&quot;parentUUID&quot;:&quot;445b8368-4f9d-4570-a635-2abeeb23254b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /GET/:id comments it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/comments/${id}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7c0e7b5-2adb-4289-8ada-4b44ebec248b&quot;,&quot;parentUUID&quot;:&quot;445b8368-4f9d-4570-a635-2abeeb23254b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d8b464f0-1800-496e-8159-d2fbedcb2aa4&quot;,&quot;d7c0e7b5-2adb-4289-8ada-4b44ebec248b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:175,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;b37fb752-de27-497f-8fd8-37597de51909&quot;,&quot;title&quot;:&quot;/PATCH/:id comments&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\comments.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\comments.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a comment given the id&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /PATCH/:id comments it should UPDATE a comment given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:189,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/comments/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({\n    vote: 3,\n    content,\n    idUser,\n    status: &#x27;publish&#x27;,\n    tags: [&#x27;naturaleza&#x27;]\n  })\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.have.property(&#x27;content&#x27;).eql(content)\n    body._id.should.be.a(&#x27;string&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27d7a6eb-9527-4eaf-a584-16df492a1441&quot;,&quot;parentUUID&quot;:&quot;b37fb752-de27-497f-8fd8-37597de51909&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not UPDATE a comment empty&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /PATCH/:id comments it should not UPDATE a comment empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:94,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/comments/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({})\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3491336e-1616-44d7-be8b-e09a044aa0da&quot;,&quot;parentUUID&quot;:&quot;b37fb752-de27-497f-8fd8-37597de51909&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /PATCH/:id comments it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/comments/${id}`)\n  .send({\n    vote: 3,\n    content,\n    idUser,\n    status: &#x27;publish&#x27;,\n    tags: [&#x27;naturaleza&#x27;]\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9900bb4b-72d2-4e0e-8f31-3930384f50ba&quot;,&quot;parentUUID&quot;:&quot;b37fb752-de27-497f-8fd8-37597de51909&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;27d7a6eb-9527-4eaf-a584-16df492a1441&quot;,&quot;3491336e-1616-44d7-be8b-e09a044aa0da&quot;,&quot;9900bb4b-72d2-4e0e-8f31-3930384f50ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:286,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;3795774a-a9eb-4dd1-a195-50b4a74dca12&quot;,&quot;title&quot;:&quot;/DELETE/:id comment&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\comments.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\comments.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a comment given the id&quot;,&quot;fullTitle&quot;:&quot;*********** COMMENTS_ADMIN *********** /DELETE/:id comment it should DELETE a comment given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:383,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const commentdelete = {\n  vote: 3,\n  content,\n  idUser,\n  status: &#x27;publish&#x27;,\n  tags: [&#x27;naturaleza&#x27;]\n}\nchai\n  .request(server)\n  .post(`${url}/comments`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(commentdelete)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;vote&#x27;,\n      &#x27;status&#x27;,\n      &#x27;tags&#x27;\n    )\n    chai\n      .request(server)\n      .delete(`${url}/comments/${res.body._id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8e2335a-9feb-4d26-a216-11611a8f1fc7&quot;,&quot;parentUUID&quot;:&quot;3795774a-a9eb-4dd1-a195-50b4a74dca12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e8e2335a-9feb-4d26-a216-11611a8f1fc7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:383,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;7e51e8f7-76c7-41d6-8802-699f2990f891&quot;,&quot;title&quot;:&quot;*********** CONVERSATIONS_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\conversations.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\conversations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** CONVERSATIONS_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** CONVERSATIONS_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  conversation.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88bfd85b-24d2-40f7-be57-fc1c3d5434a8&quot;,&quot;parentUUID&quot;:&quot;7e51e8f7-76c7-41d6-8802-699f2990f891&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f6445f21-8914-489c-8e3f-747ed498dc28&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\conversations.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\conversations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:265,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;355d821f-95da-493f-8865-33af6ce6b42e&quot;,&quot;parentUUID&quot;:&quot;f6445f21-8914-489c-8e3f-747ed498dc28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:356,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0657e5ae-ef6d-40c1-b32c-461dfb6f372d&quot;,&quot;parentUUID&quot;:&quot;f6445f21-8914-489c-8e3f-747ed498dc28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;355d821f-95da-493f-8865-33af6ce6b42e&quot;,&quot;0657e5ae-ef6d-40c1-b32c-461dfb6f372d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:621,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;09d86707-8237-4cb5-b87a-9dbe20a96c2e&quot;,&quot;title&quot;:&quot;/DELETE/:id conversation&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\conversations.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\conversations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a conversation given the id&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_ADMIN *********** /DELETE/:id conversation it should DELETE a conversation given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:746,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const messagePost = {\n  message: faker.random.words(),\n  to: toUser2\n}\nchai\n  .request(server)\n  .post(`${url}/messages`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(messagePost)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;_id&#x27;, &#x27;hash&#x27;, &#x27;messages&#x27;)\n    chai\n      .request(server)\n      .delete(`${url}/conversations/${res.body._id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3ea7325-f03f-40a0-98e8-b972f46735b0&quot;,&quot;parentUUID&quot;:&quot;09d86707-8237-4cb5-b87a-9dbe20a96c2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b3ea7325-f03f-40a0-98e8-b972f46735b0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:746,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;8426b2e2-9e88-483b-b7ea-ee4fe6825404&quot;,&quot;title&quot;:&quot;*********** DEPARTURES_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\departures.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\departures.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** DEPARTURES_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** DEPARTURES_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** DEPARTURES_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((idDeparture) =&gt; {\n  departure.findByIdAndRemove(idDeparture, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;715654bd-e63e-436c-9200-3241aa1ac208&quot;,&quot;parentUUID&quot;:&quot;8426b2e2-9e88-483b-b7ea-ee4fe6825404&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3d262fa4-0f40-4933-a991-ad36bd1e61d8&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\departures.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\departures.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** DEPARTURES_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:256,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43868d9e-fb61-4cfe-a5fe-bd288b5b5826&quot;,&quot;parentUUID&quot;:&quot;3d262fa4-0f40-4933-a991-ad36bd1e61d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** DEPARTURES_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:360,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d873681f-ef5c-49c7-8202-e5424bb39ec8&quot;,&quot;parentUUID&quot;:&quot;3d262fa4-0f40-4933-a991-ad36bd1e61d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;43868d9e-fb61-4cfe-a5fe-bd288b5b5826&quot;,&quot;d873681f-ef5c-49c7-8202-e5424bb39ec8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:616,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;7775d047-9853-415f-aa23-05cc35f87acd&quot;,&quot;title&quot;:&quot;/POST departures&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\departures.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\departures.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a departure without departure&quot;,&quot;fullTitle&quot;:&quot;*********** DEPARTURES_ADMIN *********** /POST departures it should NOT POST a departure without departure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:177,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const departurePostOne = {}\nchai\n  .request(server)\n  .post(`${url}/departures`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(departurePostOne)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ad0882a-5fba-4272-966e-eafa9377688f&quot;,&quot;parentUUID&quot;:&quot;7775d047-9853-415f-aa23-05cc35f87acd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a departure &quot;,&quot;fullTitle&quot;:&quot;*********** DEPARTURES_ADMIN *********** /POST departures it should POST a departure &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:366,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const departurePostTwo = {\n  startDateDeparture: &#x27;21-03-2021&#x27;,\n  endDateDeparture: &#x27;11-04-2021&#x27;,\n  minAge: faker.random.number(),\n  maxAge: faker.random.number(),\n  stock: faker.random.number(),\n  minStock: faker.random.number(),\n  normalPrice: faker.random.number(),\n  closeDateDeparture: &#x27;15-11-2020&#x27;,\n  flight: faker.random.boolean(),\n  idTour,\n  status: &#x27;visible&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/departures`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(departurePostTwo)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(201)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;createdAt&#x27;)\n    body.should.have.property(&#x27;closeDateDeparture&#x27;).eql(&#x27;15-11-2020&#x27;)\n    body._id.should.be.a(&#x27;string&#x27;)\n    body.payAmount.should.be.a(&#x27;array&#x27;).length(0)\n    body.should.have.property(&#x27;startDateDeparture&#x27;).eql(&#x27;21-03-2021&#x27;)\n    body.should.have.property(&#x27;status&#x27;).eql(&#x27;visible&#x27;)\n    body.endDateDeparture.should.be.a(&#x27;string&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07b055ae-5588-421f-92c9-b74e571a94ad&quot;,&quot;parentUUID&quot;:&quot;7775d047-9853-415f-aa23-05cc35f87acd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3ad0882a-5fba-4272-966e-eafa9377688f&quot;,&quot;07b055ae-5588-421f-92c9-b74e571a94ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:543,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;bdebcae4-d5ce-41ab-becc-be9c207137b5&quot;,&quot;title&quot;:&quot;/PATCH/:id departures&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\departures.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\departures.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a departure given the id&quot;,&quot;fullTitle&quot;:&quot;*********** DEPARTURES_ADMIN *********** /PATCH/:id departures it should UPDATE a departure given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:270,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/departures/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({\n    startDateDeparture: &#x27;21-05-2021&#x27;,\n    endDateDeparture: &#x27;11-05-2021&#x27;,\n    stock: faker.random.number(),\n    minStock: faker.random.number(),\n    minAge: faker.random.number(),\n    maxAge: faker.random.number(),\n    normalPrice: faker.random.number(),\n    closeDateDeparture: &#x27;15-11-2020&#x27;,\n    flight: faker.random.boolean(),\n    idTour\n  })\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.have.property(&#x27;startDateDeparture&#x27;).eql(&#x27;21-05-2021&#x27;)\n    body._id.should.be.a(&#x27;string&#x27;)\n    body.minStock.should.be.a(&#x27;number&#x27;)\n    body.normalPrice.should.be.a(&#x27;number&#x27;)\n    body.closeDateDeparture.should.be.a(&#x27;string&#x27;)\n    body.idTour.should.be.a(&#x27;string&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e7aac61-ac46-40b6-bf5e-facf24af5b9b&quot;,&quot;parentUUID&quot;:&quot;bdebcae4-d5ce-41ab-becc-be9c207137b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** DEPARTURES_ADMIN *********** /PATCH/:id departures it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/departures/${id}`)\n  .send({\n    startDateDeparture: &#x27;21-05-2021&#x27;,\n    endDateDeparture: &#x27;11-05-2021&#x27;,\n    stock: faker.random.number(),\n    minStock: faker.random.number(),\n    normalPrice: faker.random.number(),\n    closeDateDeparture: &#x27;15-11-2020&#x27;,\n    flight: faker.random.boolean(),\n    payAmount: faker.finance.amount(),\n    idTour\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;534e7ddd-209e-4cf6-bc6a-ae2e32646e9a&quot;,&quot;parentUUID&quot;:&quot;bdebcae4-d5ce-41ab-becc-be9c207137b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e7aac61-ac46-40b6-bf5e-facf24af5b9b&quot;,&quot;534e7ddd-209e-4cf6-bc6a-ae2e32646e9a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:273,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;d647f1de-dade-4265-a213-f42ecd2e5c96&quot;,&quot;title&quot;:&quot;/DELETE/:id departure&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\departures.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\departures.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a departure given the id&quot;,&quot;fullTitle&quot;:&quot;*********** DEPARTURES_ADMIN *********** /DELETE/:id departure it should DELETE a departure given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:631,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const departuredelete = {\n  startDateDeparture: &#x27;21-05-2021&#x27;,\n  endDateDeparture: &#x27;11-05-2021&#x27;,\n  stock: faker.random.number(),\n  minStock: faker.random.number(),\n  normalPrice: faker.random.number(),\n  closeDateDeparture: &#x27;15-11-2020&#x27;,\n  payAmount: faker.finance.amount(),\n  flight: faker.random.boolean(),\n  idTour,\n  status: &#x27;visible&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/departures`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(departuredelete)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;_id&#x27;)\n    chai\n      .request(server)\n      .delete(`${url}/departures/${res.body._id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .end((error, result) =&gt; {\n        result.should.have.status(200)\n        result.body.should.be.a(&#x27;object&#x27;)\n        result.body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;235cc542-d1f9-49a5-8a88-559708907346&quot;,&quot;parentUUID&quot;:&quot;d647f1de-dade-4265-a213-f42ecd2e5c96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;235cc542-d1f9-49a5-8a88-559708907346&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:631,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;cdadab4f-0acf-4850-b132-cf1d7caf1d31&quot;,&quot;title&quot;:&quot;*********** ITINERARIES_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\itineraries.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\itineraries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst newDescription = faker.random.words()\nconst newTitle = faker.random.words()\nchai\n  .request(server)\n  .patch(`${url}/itineraries/${id}`)\n  .send({\n    itineraryName: newTitle,\n    itineraryDescription: newDescription\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d524172-68cf-4e2e-bf5f-ac30d507704c&quot;,&quot;parentUUID&quot;:&quot;cdadab4f-0acf-4850-b132-cf1d7caf1d31&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c20e8c91-b345-4a77-9cb8-f3ad808e6b24&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\itineraries.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\itineraries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:278,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46be6f53-9daf-4c47-b10b-cd11fa319ad1&quot;,&quot;parentUUID&quot;:&quot;c20e8c91-b345-4a77-9cb8-f3ad808e6b24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:361,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07c2196c-696e-465b-b04e-3ee21d9d558d&quot;,&quot;parentUUID&quot;:&quot;c20e8c91-b345-4a77-9cb8-f3ad808e6b24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46be6f53-9daf-4c47-b10b-cd11fa319ad1&quot;,&quot;07c2196c-696e-465b-b04e-3ee21d9d558d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:639,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;b4f62f19-cd9e-4f6e-bbc1-734d7a77b28e&quot;,&quot;title&quot;:&quot;/GET itineraries&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\itineraries.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\itineraries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the itineraries&quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** /GET itineraries it should GET all the itineraries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:92,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/itineraries`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.an(&#x27;object&#x27;)\n    body.docs.should.be.a(&#x27;array&#x27;)\n    const firstItinerary = _.head(body.docs)\n    idItinerary = firstItinerary._id\n    firstItinerary.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;itineraryName&#x27;,\n      &#x27;itineraryDescription&#x27;,\n      &#x27;idTour&#x27;,\n      &#x27;stringLocation&#x27;,\n      &#x27;details&#x27;\n    )\n    firstItinerary._id.should.be.a(&#x27;string&#x27;)\n    firstItinerary.itineraryName.should.be.a(&#x27;string&#x27;)\n    firstItinerary.idTour.should.be.a(&#x27;string&#x27;).eql(idTour)\n    firstItinerary.details.should.be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bbebb22-32d3-4562-95de-d346277e6de4&quot;,&quot;parentUUID&quot;:&quot;b4f62f19-cd9e-4f6e-bbc1-734d7a77b28e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5bbebb22-32d3-4562-95de-d346277e6de4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:92,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;8fbaeaa1-9e3a-437f-a6ba-e55c71838718&quot;,&quot;title&quot;:&quot;/POST itineraries&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\itineraries.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\itineraries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a itinerary without itinerary&quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** /POST itineraries it should NOT POST a itinerary without itinerary&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:188,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const itineraryOne = {}\nchai\n  .request(server)\n  .post(`${url}/itineraries`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(itineraryOne)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf7330c1-0ac5-4b38-a4fb-61ba1b797777&quot;,&quot;parentUUID&quot;:&quot;8fbaeaa1-9e3a-437f-a6ba-e55c71838718&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a itineraries &quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** /POST itineraries it should POST a itineraries &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:360,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/itineraries`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(newObject)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(201)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;stringLocation&#x27;)\n    body.should.include.property(&#x27;itineraryName&#x27;).eql(itineraryName)\n    body._id.should.be.a(&#x27;string&#x27;)\n    body.itineraryName.should.be.a(&#x27;string&#x27;)\n    body.itineraryDescription.should.be.a(&#x27;string&#x27;)\n    body.idTour.should.be.a(&#x27;string&#x27;).eql(idTour)\n    body.stringLocation.should.be.a(&#x27;object&#x27;)\n    body.details.should.be.a(&#x27;array&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;baa5b733-4613-4449-a7cc-9abf92a5183b&quot;,&quot;parentUUID&quot;:&quot;8fbaeaa1-9e3a-437f-a6ba-e55c71838718&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT POST a itinerary that incomplete fields&quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** /POST itineraries it should NOT POST a itinerary that incomplete fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:178,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const itineraryTwo = {\n  changeNameItinerary\n}\nchai\n  .request(server)\n  .post(`${url}/itineraries`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(itineraryTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3dedd196-f740-4196-b5ac-1ae231c989e7&quot;,&quot;parentUUID&quot;:&quot;8fbaeaa1-9e3a-437f-a6ba-e55c71838718&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** /POST itineraries it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/itineraries`)\n  .send(newObject)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee0b8544-a533-4f75-af49-ddb3f4dd26b4&quot;,&quot;parentUUID&quot;:&quot;8fbaeaa1-9e3a-437f-a6ba-e55c71838718&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf7330c1-0ac5-4b38-a4fb-61ba1b797777&quot;,&quot;baa5b733-4613-4449-a7cc-9abf92a5183b&quot;,&quot;3dedd196-f740-4196-b5ac-1ae231c989e7&quot;,&quot;ee0b8544-a533-4f75-af49-ddb3f4dd26b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:732,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;2be1e48a-c00d-4e75-b2d9-3564c64df000&quot;,&quot;title&quot;:&quot;/GET/:id itineraries&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\itineraries.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\itineraries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a itinerary by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** /GET/:id itineraries it should GET a itinerary by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:278,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/itineraries/${idItinerary}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(idItinerary)\n    // res.body.should.include.property(&#x27;itineraryName&#x27;).eql(itineraryName)\n    body._id.should.be.a(&#x27;string&#x27;)\n    body.itineraryName.should.be.a(&#x27;string&#x27;)\n    body.itineraryDescription.should.be.a(&#x27;string&#x27;)\n    body.idTour.should.be.a(&#x27;string&#x27;).eql(idTour)\n    body.stringLocation.should.be.a(&#x27;object&#x27;)\n    body.details.should.be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dea6e453-e758-4cca-9447-82b5b51a6e77&quot;,&quot;parentUUID&quot;:&quot;2be1e48a-c00d-4e75-b2d9-3564c64df000&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a itinerary by the given id rute admin&quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** /GET/:id itineraries it should GET a itinerary by the given id rute admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:276,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/itineraries/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.include.property(&#x27;itineraryName&#x27;).eql(itineraryName)\n    body._id.should.be.a(&#x27;string&#x27;)\n    body.itineraryName.should.be.a(&#x27;string&#x27;)\n    body.itineraryDescription.should.be.a(&#x27;string&#x27;)\n    body.idTour.should.be.a(&#x27;string&#x27;)\n    body.stringLocation.should.be.a(&#x27;object&#x27;)\n    body.details.should.be.a(&#x27;array&#x27;).length(2)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21e26faf-0ff3-4253-b135-362fa205e3d6&quot;,&quot;parentUUID&quot;:&quot;2be1e48a-c00d-4e75-b2d9-3564c64df000&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent rute admin&quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** /GET/:id itineraries it should NOT be able to consume the route since no token was sent rute admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/itineraries/${id}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9217caee-644c-4502-8933-b1bb4b452903&quot;,&quot;parentUUID&quot;:&quot;2be1e48a-c00d-4e75-b2d9-3564c64df000&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dea6e453-e758-4cca-9447-82b5b51a6e77&quot;,&quot;21e26faf-0ff3-4253-b135-362fa205e3d6&quot;,&quot;9217caee-644c-4502-8933-b1bb4b452903&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:557,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;4b9b5561-e79a-47aa-8e3c-67ac80e4ea54&quot;,&quot;title&quot;:&quot;/PATCH/:id itineraries&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\itineraries.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\itineraries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a itinerary given the id&quot;,&quot;fullTitle&quot;:&quot;*********** ITINERARIES_ADMIN *********** /PATCH/:id itineraries it should UPDATE a itinerary given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:302,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst newDescription = faker.random.words()\nconst newTitle = faker.random.words()\nchai\n  .request(server)\n  .patch(`${url}/itineraries/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({\n    itineraryName: newTitle,\n    itineraryDescription: newDescription\n  })\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;itineraryDescription&#x27;, &#x27;itineraryName&#x27;)\n    body.itineraryName.should.be.a(&#x27;string&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.have.property(&#x27;itineraryName&#x27;).eql(newTitle)\n    body.should.have.property(&#x27;itineraryDescription&#x27;).eql(newDescription)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d18b1bf-b056-440b-9a4e-6bcae58d804c&quot;,&quot;parentUUID&quot;:&quot;4b9b5561-e79a-47aa-8e3c-67ac80e4ea54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4d18b1bf-b056-440b-9a4e-6bcae58d804c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:302,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[&quot;6d524172-68cf-4e2e-bf5f-ac30d507704c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;2e214edf-8c43-40d2-a8ab-ae4ee00ca753&quot;,&quot;title&quot;:&quot;/DELETE/:id itineraries&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\itineraries.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\itineraries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a itinerary given the id&quot;,&quot;fullTitle&quot;:&quot;/DELETE/:id itineraries it should DELETE a itinerary given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:591,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .delete(`${url}/itineraries/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, result) =&gt; {\n    result.should.have.status(200)\n    result.body.should.be.a(&#x27;object&#x27;)\n    result.body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29258273-af2a-4681-a901-29703d0c7d68&quot;,&quot;parentUUID&quot;:&quot;2e214edf-8c43-40d2-a8ab-ae4ee00ca753&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29258273-af2a-4681-a901-29703d0c7d68&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:591,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;0f58c1fd-c1df-4dd0-b775-95b2f28cacac&quot;,&quot;title&quot;:&quot;*********** PAY_ORDERS_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\payOrders.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\payOrders.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** PAY_ORDERS_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** PAY_ORDERS_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  orders.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      console.log(err.message)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e62c2a2-9159-44f0-9b0f-b99ab58747fc&quot;,&quot;parentUUID&quot;:&quot;0f58c1fd-c1df-4dd0-b775-95b2f28cacac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0af7f011-8eb8-4849-9337-e59051c6d894&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\payOrders.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\payOrders.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:280,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0482c63f-5021-4a38-81a4-6fc0759049b6&quot;,&quot;parentUUID&quot;:&quot;0af7f011-8eb8-4849-9337-e59051c6d894&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:380,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86a63b8f-d404-47cb-a07c-d0dfc274c28b&quot;,&quot;parentUUID&quot;:&quot;0af7f011-8eb8-4849-9337-e59051c6d894&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0482c63f-5021-4a38-81a4-6fc0759049b6&quot;,&quot;86a63b8f-d404-47cb-a07c-d0dfc274c28b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:660,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;a097ae57-b61f-4028-809c-57325f779ac3&quot;,&quot;title&quot;:&quot;/POST payOrders&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\payOrders.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\payOrders.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a orders without orders&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** /POST payOrders it should NOT POST a orders without orders&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:196,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPostOne = {}\nchai\n  .request(server)\n  .post(`${url}/payOrders`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPostOne)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c477eac-9df0-44eb-b4dd-541194faad34&quot;,&quot;parentUUID&quot;:&quot;a097ae57-b61f-4028-809c-57325f779ac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a orders  pay Wallet&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** /POST payOrders it should POST a orders  pay Wallet&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1141,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPostTwo = {\n  idOperation: faker.random.words(),\n  amount: faker.random.number(),\n  idUser,\n  platform: &#x27;stripe&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/payOrders`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPostTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;idUser&#x27;, &#x27;platform&#x27;, &#x27;idOperation&#x27;, &#x27;idUser&#x27;, &#x27;platform&#x27;)\n    body.should.have.property(&#x27;platform&#x27;).eql(&#x27;stripe&#x27;)\n    body.should.have.property(&#x27;idUser&#x27;).eql(idUser)\n    body.should.have.property(&#x27;amount&#x27;).eql(orderPostTwo.amount)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6934280-50fc-4793-acc7-6b7f0665fb24&quot;,&quot;parentUUID&quot;:&quot;a097ae57-b61f-4028-809c-57325f779ac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a orders pay reservation&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** /POST payOrders it should POST a orders pay reservation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1754,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPostTwo = {\n  idReservation,\n  idOperation: faker.random.words(),\n  amount: faker.random.number(),\n  idUser,\n  platform: &#x27;stripe&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/payOrders`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPostTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;idUser&#x27;, &#x27;platform&#x27;, &#x27;idOperation&#x27;, &#x27;idUser&#x27;, &#x27;platform&#x27;)\n    body.should.have.property(&#x27;platform&#x27;).eql(&#x27;stripe&#x27;)\n    body.should.have.property(&#x27;idReservation&#x27;).eql(idReservation)\n    body.should.have.property(&#x27;amount&#x27;).eql(orderPostTwo.amount)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bfaddf5-dd5a-447f-9210-9b99b9a7dc31&quot;,&quot;parentUUID&quot;:&quot;a097ae57-b61f-4028-809c-57325f779ac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c477eac-9df0-44eb-b4dd-541194faad34&quot;,&quot;c6934280-50fc-4793-acc7-6b7f0665fb24&quot;,&quot;5bfaddf5-dd5a-447f-9210-9b99b9a7dc31&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3091,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;9e747642-c99c-4b54-ac3c-e99329696f57&quot;,&quot;title&quot;:&quot;/GET payOrders&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\payOrders.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\payOrders.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the payOrders&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** /GET payOrders it should GET all the payOrders&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:262,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/payOrders`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    const { docs } = body\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.have.lengthOf(2)\n    const firstorder = _.head(docs)\n    firstorder.should.include.keys(&#x27;_id&#x27;, &#x27;amount&#x27;, &#x27;idOperation&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f319acd9-7f17-401f-abd2-5b193d688179&quot;,&quot;parentUUID&quot;:&quot;9e747642-c99c-4b54-ac3c-e99329696f57&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f319acd9-7f17-401f-abd2-5b193d688179&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:262,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;17233494-ac31-4e9e-97e3-34d279e1bafc&quot;,&quot;title&quot;:&quot;/GET/:id payOrders&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\payOrders.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\payOrders.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a payOrders by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** /GET/:id payOrders it should GET a payOrders by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:252,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/payOrders/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;status&#x27;, &#x27;_id&#x27;, &#x27;idReservation&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d37c7c39-48cc-46a9-9f6a-3ab4de5f0e2b&quot;,&quot;parentUUID&quot;:&quot;17233494-ac31-4e9e-97e3-34d279e1bafc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** /GET/:id payOrders it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/payOrders/${id}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07baf76a-4c3e-4326-b2c7-23e325b1c293&quot;,&quot;parentUUID&quot;:&quot;17233494-ac31-4e9e-97e3-34d279e1bafc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d37c7c39-48cc-46a9-9f6a-3ab4de5f0e2b&quot;,&quot;07baf76a-4c3e-4326-b2c7-23e325b1c293&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:255,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;9590b582-4f42-4f88-85b2-0158b3739aad&quot;,&quot;title&quot;:&quot;/PATCH/:id payOrders&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\payOrders.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\payOrders.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a orders given the id&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** /PATCH/:id payOrders it should UPDATE a orders given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:265,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst object = { amount: faker.random.number() }\nchai\n  .request(server)\n  .patch(`${url}/payOrders/fromPanel/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(object)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.have.property(&#x27;amount&#x27;).eql(object.amount)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a37ca1e3-6f2d-44c3-860b-108515958ae9&quot;,&quot;parentUUID&quot;:&quot;9590b582-4f42-4f88-85b2-0158b3739aad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** /PATCH/:id payOrders it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/payOrders/fromPanel/${id}`)\n  .send({\n    amount: faker.random.number()\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;216a000a-a447-49e6-a94e-ee037aade08b&quot;,&quot;parentUUID&quot;:&quot;9590b582-4f42-4f88-85b2-0158b3739aad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a37ca1e3-6f2d-44c3-860b-108515958ae9&quot;,&quot;216a000a-a447-49e6-a94e-ee037aade08b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:268,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;dc5777c4-00e7-4bb2-b72c-c8bb4dd54c7c&quot;,&quot;title&quot;:&quot;/DELETE/:id orders&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\payOrders.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\payOrders.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a orders given the id&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_ADMIN *********** /DELETE/:id orders it should DELETE a orders given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2095,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const objectDelete = {\n  idReservation,\n  idOperation: faker.random.words(),\n  amount: faker.random.number(),\n  idUser,\n  platform: &#x27;stripe&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/payOrders`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(objectDelete)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;idOperation&#x27;,\n      &#x27;idUser&#x27;,\n      &#x27;platform&#x27;\n    )\n    chai\n      .request(server)\n      .delete(`${url}/payOrders/${res.body._id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e932806-7a76-477c-bc8e-418b28cca9d0&quot;,&quot;parentUUID&quot;:&quot;dc5777c4-00e7-4bb2-b72c-c8bb4dd54c7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e932806-7a76-477c-bc8e-418b28cca9d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2095,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;226c8e2a-cd57-45f5-8cc9-b997fca14f61&quot;,&quot;title&quot;:&quot;*********** QUESTIONS_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\questions.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** QUESTIONS_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** QUESTIONS_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  questions.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e04c1a6c-9130-4a2f-ac0b-1b9720ce3682&quot;,&quot;parentUUID&quot;:&quot;226c8e2a-cd57-45f5-8cc9-b997fca14f61&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0805cda4-9162-42bd-932e-25b1deba2a50&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\questions.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:279,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02ceb798-f43b-4ad0-a94b-eb7faa6914e6&quot;,&quot;parentUUID&quot;:&quot;0805cda4-9162-42bd-932e-25b1deba2a50&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:365,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abebe9c3-9068-4418-8022-26e09ed8548c&quot;,&quot;parentUUID&quot;:&quot;0805cda4-9162-42bd-932e-25b1deba2a50&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;02ceb798-f43b-4ad0-a94b-eb7faa6914e6&quot;,&quot;abebe9c3-9068-4418-8022-26e09ed8548c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:644,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;7c374dd4-af0d-45d6-9090-7ad729cd6693&quot;,&quot;title&quot;:&quot;/POST questions&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\questions.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a questions without questions&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /POST questions it should NOT POST a questions without questions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:175,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPostOne = {}\nchai\n  .request(server)\n  .post(`${url}/questions`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPostOne)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;227332bb-982f-4518-843e-e008c6f74d04&quot;,&quot;parentUUID&quot;:&quot;7c374dd4-af0d-45d6-9090-7ad729cd6693&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a questions&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /POST questions it should POST a questions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:271,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const questionTwo = {\n  question: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/questions`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(questionTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;question&#x27;)\n    body.should.have.property(&#x27;question&#x27;).eql(questionTwo.question)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0689f6e0-941d-4c18-ad19-37f3d49340a7&quot;,&quot;parentUUID&quot;:&quot;7c374dd4-af0d-45d6-9090-7ad729cd6693&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;227332bb-982f-4518-843e-e008c6f74d04&quot;,&quot;0689f6e0-941d-4c18-ad19-37f3d49340a7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:446,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;cacd8afd-07f2-403a-aded-22f5b2f5b675&quot;,&quot;title&quot;:&quot;/GET questions&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\questions.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the questions&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /GET questions it should GET all the questions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:264,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/questions`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    const { docs } = body\n    const question = _.head(docs)\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.have.lengthOf(5)\n    id = question._id\n    question.should.include.keys(&#x27;_id&#x27;, &#x27;status&#x27;, &#x27;title&#x27;, &#x27;question&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c97528a7-8170-4209-8c50-fb55ea2b4322&quot;,&quot;parentUUID&quot;:&quot;cacd8afd-07f2-403a-aded-22f5b2f5b675&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT GET the questions with filters&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /GET questions it should NOT GET the questions with filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/questions?filter=noexiste&amp;fields=status`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    const { body } = res\n    const { docs, totalDocs } = body\n    totalDocs.should.be.a(&#x27;number&#x27;)\n    body.should.have.property(&#x27;totalDocs&#x27;).eql(0)\n    docs.should.have.lengthOf(0)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c070372-519e-425b-9024-d3502e389238&quot;,&quot;parentUUID&quot;:&quot;cacd8afd-07f2-403a-aded-22f5b2f5b675&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET the questions with filters&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /GET questions it should GET the questions with filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:257,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/questions?filter=public&amp;fields=status`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    const { body } = res\n    const { docs } = body\n    const question = _.head(docs)\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.have.lengthOf(4)\n    question.should.include.keys(&#x27;_id&#x27;, &#x27;title&#x27;, &#x27;question&#x27;)\n    question.should.have.property(&#x27;status&#x27;).eql(&#x27;public&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51db4442-7e2a-4eaa-8114-328e62eb7f77&quot;,&quot;parentUUID&quot;:&quot;cacd8afd-07f2-403a-aded-22f5b2f5b675&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c97528a7-8170-4209-8c50-fb55ea2b4322&quot;,&quot;7c070372-519e-425b-9024-d3502e389238&quot;,&quot;51db4442-7e2a-4eaa-8114-328e62eb7f77&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:779,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;949114ac-372e-4dd5-861d-1677a40fd27d&quot;,&quot;title&quot;:&quot;/GET/:id questions&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\questions.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a questions by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /GET/:id questions it should GET a questions by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/questions/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    console.log(body.errors)\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;status&#x27;, &#x27;_id&#x27;, &#x27;question&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26cd110b-0c17-4166-9bea-bf1ff961181b&quot;,&quot;parentUUID&quot;:&quot;949114ac-372e-4dd5-861d-1677a40fd27d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /GET/:id questions it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/questions/${id}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2901f2ca-2ea5-44c6-ad17-2f5b4af11912&quot;,&quot;parentUUID&quot;:&quot;949114ac-372e-4dd5-861d-1677a40fd27d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;26cd110b-0c17-4166-9bea-bf1ff961181b&quot;,&quot;2901f2ca-2ea5-44c6-ad17-2f5b4af11912&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:261,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;84716fa5-7a15-451a-a1b5-583ff53d720a&quot;,&quot;title&quot;:&quot;/PATCH/:id questions&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\questions.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a questions given the id&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /PATCH/:id questions it should UPDATE a questions given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:274,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst object = { question: faker.random.words() }\nchai\n  .request(server)\n  .patch(`${url}/questions/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(object)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.have.property(&#x27;question&#x27;).eql(object.question)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5368ecf7-139f-4293-844f-ae3ebd2d9568&quot;,&quot;parentUUID&quot;:&quot;84716fa5-7a15-451a-a1b5-583ff53d720a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /PATCH/:id questions it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/questions/${id}`)\n  .send({\n    question: faker.random.words()\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c2bc552-94b1-47b1-b20a-4bde6afdab0c&quot;,&quot;parentUUID&quot;:&quot;84716fa5-7a15-451a-a1b5-583ff53d720a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5368ecf7-139f-4293-844f-ae3ebd2d9568&quot;,&quot;3c2bc552-94b1-47b1-b20a-4bde6afdab0c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:278,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;ebe1fc13-7735-4ba3-95b1-42971d8c471c&quot;,&quot;title&quot;:&quot;/DELETE/:id questions&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\questions.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a questions given the id&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_ADMIN *********** /DELETE/:id questions it should DELETE a questions given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:543,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const objectDelete = {\n  question: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/questions`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(objectDelete)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;_id&#x27;, &#x27;question&#x27;)\n    chai\n      .request(server)\n      .delete(`${url}/questions/${res.body._id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8d25ef9-1758-4089-917b-769b4cd85057&quot;,&quot;parentUUID&quot;:&quot;ebe1fc13-7735-4ba3-95b1-42971d8c471c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8d25ef9-1758-4089-917b-769b4cd85057&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:543,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;a8760459-3357-42b0-ba6c-1e6b5413d7a1&quot;,&quot;title&quot;:&quot;*********** REFERREDS_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reffereds.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reffereds.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** REFERREDS_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** REFERREDS_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  reffered.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a14bf52c-203b-4f01-a715-790324c9bab8&quot;,&quot;parentUUID&quot;:&quot;a8760459-3357-42b0-ba6c-1e6b5413d7a1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;489e3ca2-d69f-420d-bf56-12d5e778f037&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reffereds.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reffereds.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:263,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;519a9488-2077-458b-b04e-188af4a13cab&quot;,&quot;parentUUID&quot;:&quot;489e3ca2-d69f-420d-bf56-12d5e778f037&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:417,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd83474a-59de-4e03-b9bc-a11cb090b08a&quot;,&quot;parentUUID&quot;:&quot;489e3ca2-d69f-420d-bf56-12d5e778f037&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;519a9488-2077-458b-b04e-188af4a13cab&quot;,&quot;fd83474a-59de-4e03-b9bc-a11cb090b08a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:680,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;111e6198-97ff-4e3f-9a35-1ebb1efcd79b&quot;,&quot;title&quot;:&quot;/GET referreds&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reffereds.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reffereds.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the referreds&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** /GET referreds it should GET all the referreds&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:177,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/referreds`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    const { docs } = body\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.be.an(&#x27;array&#x27;).length(2)\n    const firstorder = _.head(docs)\n    firstorder.should.include.keys(&#x27;_id&#x27;, &#x27;amountTo&#x27;, &#x27;amountFrom&#x27;)\n    const from = firstorder.userFrom\n    from.should.have.property(&#x27;_id&#x27;).eql(userFrom)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cb5ed90-4009-4263-bf17-061a87c5343a&quot;,&quot;parentUUID&quot;:&quot;111e6198-97ff-4e3f-9a35-1ebb1efcd79b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5cb5ed90-4009-4263-bf17-061a87c5343a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:177,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;af9e8b1b-0149-4600-9eb3-893fe80b20cc&quot;,&quot;title&quot;:&quot;/POST referreds&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reffereds.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reffereds.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a reffered without&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** /POST referreds it should NOT POST a reffered without&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:173,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const refferedPostOne = {}\nchai\n  .request(server)\n  .post(`${url}/referreds`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(refferedPostOne)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f433b4b0-f897-4432-ab05-e2a98ccf59e9&quot;,&quot;parentUUID&quot;:&quot;af9e8b1b-0149-4600-9eb3-893fe80b20cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a reffered &quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** /POST referreds it should POST a reffered &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:273,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const refferedPostTwo = {\n  userFrom,\n  userTo,\n  planReferred,\n  amountTo: faker.random.number(),\n  amountFrom: faker.random.number(),\n  status: &#x27;available&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/referreds`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(refferedPostTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;planReferred&#x27;, &#x27;userTo&#x27;)\n    body.should.have.property(&#x27;status&#x27;).eql(&#x27;available&#x27;)\n    body.should.have.property(&#x27;amountFrom&#x27;).eql(refferedPostTwo.amountFrom)\n    body.should.have.property(&#x27;_id&#x27;).be.a(&#x27;string&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db127cb5-a38b-49dd-80c6-442c5544395f&quot;,&quot;parentUUID&quot;:&quot;af9e8b1b-0149-4600-9eb3-893fe80b20cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f433b4b0-f897-4432-ab05-e2a98ccf59e9&quot;,&quot;db127cb5-a38b-49dd-80c6-442c5544395f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:446,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;8178dd56-deac-4769-8b80-a5ad09013911&quot;,&quot;title&quot;:&quot;/GET/:id referreds&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reffereds.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reffereds.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a referreds by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** /GET/:id referreds it should GET a referreds by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:260,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/referreds/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;amountTo&#x27;, &#x27;amountFrom&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30dcf38a-aa98-43ce-ac64-3fdfb65ad406&quot;,&quot;parentUUID&quot;:&quot;8178dd56-deac-4769-8b80-a5ad09013911&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** /GET/:id referreds it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/referreds/${id}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e2e223d-5b81-4bf3-aa76-0d7bfdea338b&quot;,&quot;parentUUID&quot;:&quot;8178dd56-deac-4769-8b80-a5ad09013911&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30dcf38a-aa98-43ce-ac64-3fdfb65ad406&quot;,&quot;7e2e223d-5b81-4bf3-aa76-0d7bfdea338b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:263,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;e19822ff-430d-48a5-9829-61edb55f9e01&quot;,&quot;title&quot;:&quot;/PATCH/:id referreds&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reffereds.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reffereds.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a reffered given the id&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** /PATCH/:id referreds it should UPDATE a reffered given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:187,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst newAmount = faker.random.number()\nchai\n  .request(server)\n  .patch(`${url}/referreds/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({\n    amountTo: newAmount\n  })\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.have.property(&#x27;amountTo&#x27;).eql(newAmount)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ef54509-9969-4812-b6a6-e7faad216383&quot;,&quot;parentUUID&quot;:&quot;e19822ff-430d-48a5-9829-61edb55f9e01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not UPDATE a object empty&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** /PATCH/:id referreds it should not UPDATE a object empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:181,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/referreds/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({})\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0492eb01-c06f-479d-bd1c-645c16a5ac79&quot;,&quot;parentUUID&quot;:&quot;e19822ff-430d-48a5-9829-61edb55f9e01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** /PATCH/:id referreds it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/referreds/${id}`)\n  .send({})\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cbd9327-1ee9-4041-95f5-2475fa65eb68&quot;,&quot;parentUUID&quot;:&quot;e19822ff-430d-48a5-9829-61edb55f9e01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ef54509-9969-4812-b6a6-e7faad216383&quot;,&quot;0492eb01-c06f-479d-bd1c-645c16a5ac79&quot;,&quot;7cbd9327-1ee9-4041-95f5-2475fa65eb68&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:372,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;9c45520e-a78c-46b2-a25e-82c789decc79&quot;,&quot;title&quot;:&quot;/DELETE/:id reffered&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reffereds.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reffereds.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a reffered given the id&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_ADMIN *********** /DELETE/:id reffered it should DELETE a reffered given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:540,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const reffereddelete = {\n  userFrom,\n  userTo,\n  planReferred,\n  amountTo: faker.random.number(),\n  amountFrom: faker.random.number(),\n  status: &#x27;available&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/referreds`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(reffereddelete)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;amountTo&#x27;,\n      &#x27;amountFrom&#x27;,\n      &#x27;status&#x27;\n    )\n    chai\n      .request(server)\n      .delete(`${url}/referreds/${res.body._id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16f13c64-74a5-40d7-891d-e75cf7f11099&quot;,&quot;parentUUID&quot;:&quot;9c45520e-a78c-46b2-a25e-82c789decc79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;16f13c64-74a5-40d7-891d-e75cf7f11099&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:540,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;f93e277c-44be-4199-98c9-d4f361d058c8&quot;,&quot;title&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\refferedSettings.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\refferedSettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** REFERREDS_SETTINGS_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** REFERREDS_SETTINGS_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  referredSettings.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27475291-8792-4353-984d-ba4ec9b1b954&quot;,&quot;parentUUID&quot;:&quot;f93e277c-44be-4199-98c9-d4f361d058c8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;343be817-0b17-4ea9-8bb4-f84a5a8efe00&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\refferedSettings.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\refferedSettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:267,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50171e26-9967-4616-b71c-745bbb5120d2&quot;,&quot;parentUUID&quot;:&quot;343be817-0b17-4ea9-8bb4-f84a5a8efe00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:350,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f98662b-455f-400d-9794-41937d008c45&quot;,&quot;parentUUID&quot;:&quot;343be817-0b17-4ea9-8bb4-f84a5a8efe00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;50171e26-9967-4616-b71c-745bbb5120d2&quot;,&quot;6f98662b-455f-400d-9794-41937d008c45&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:617,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;cd6977f3-a462-4eda-a0ea-8435ce339fec&quot;,&quot;title&quot;:&quot;/GET referreds_settings&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\refferedSettings.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\refferedSettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the referreds&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /GET referreds_settings it should GET all the referreds&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:172,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/referredSettings`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    const {\n      docs,\n      totalDocs,\n      hasPrevPage,\n      hasNextPage\n    } = body\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.be.a(&#x27;array&#x27;)\n    hasNextPage.should.be.a(&#x27;boolean&#x27;)\n    hasPrevPage.should.be.a(&#x27;boolean&#x27;)\n    body.limit.should.be.a(&#x27;number&#x27;)\n    body.page.should.be.a(&#x27;number&#x27;)\n    totalDocs.should.be.a(&#x27;number&#x27;).eql(2)\n    docs.should.have.length(2)\n    body.totalPages.should.be.a(&#x27;number&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa9e51f1-f166-4df4-8aca-38796e632d9f&quot;,&quot;parentUUID&quot;:&quot;cd6977f3-a462-4eda-a0ea-8435ce339fec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /GET referreds_settings it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/referreds`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f3ec990-5111-4af4-b3e1-5825b8d0344e&quot;,&quot;parentUUID&quot;:&quot;cd6977f3-a462-4eda-a0ea-8435ce339fec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aa9e51f1-f166-4df4-8aca-38796e632d9f&quot;,&quot;1f3ec990-5111-4af4-b3e1-5825b8d0344e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:175,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;a6e27dfe-0a2f-4148-9afa-0405c3ffd874&quot;,&quot;title&quot;:&quot;/POST referreds_settings&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\refferedSettings.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\refferedSettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a referreds_settings without referreds_settings&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /POST referreds_settings it should NOT POST a referreds_settings without referreds_settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:96,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const settingsPostOne = {}\nchai\n  .request(server)\n  .post(`${url}/referredSettings`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(settingsPostOne)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a032530b-8ce2-42c1-a07d-2eadbdc0e8ab&quot;,&quot;parentUUID&quot;:&quot;a6e27dfe-0a2f-4148-9afa-0405c3ffd874&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a referreds_settings &quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /POST referreds_settings it should POST a referreds_settings &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:178,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const settingsPostTwo = {\n  name: faker.random.words(),\n  label: faker.random.words(),\n  amountTo: faker.random.number(),\n  amountFrom: faker.random.number()\n}\nchai\n  .request(server)\n  .post(`${url}/referredSettings`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(settingsPostTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;name&#x27;, &#x27;label&#x27;, &#x27;amountTo&#x27;)\n    body.should.have.property(&#x27;name&#x27;).eql(settingsPostTwo.name)\n    body.should.have.property(&#x27;label&#x27;).eql(settingsPostTwo.label)\n    body.should.have.property(&#x27;_id&#x27;).be.a(&#x27;string&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00cadf57-2c23-4382-b1dc-530e61b0d250&quot;,&quot;parentUUID&quot;:&quot;a6e27dfe-0a2f-4148-9afa-0405c3ffd874&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a032530b-8ce2-42c1-a07d-2eadbdc0e8ab&quot;,&quot;00cadf57-2c23-4382-b1dc-530e61b0d250&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:274,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;bce27bdb-55a0-44ae-bf7d-738f431afcfa&quot;,&quot;title&quot;:&quot;/GET/:id referreds_settings&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\refferedSettings.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\refferedSettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a referreds_settings by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /GET/:id referreds_settings it should GET a referreds_settings by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:174,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/referredSettings/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;name&#x27;, &#x27;amountTo&#x27;, &#x27;_id&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ea3df8f-acd9-4b0f-abd0-4b03b62cd570&quot;,&quot;parentUUID&quot;:&quot;bce27bdb-55a0-44ae-bf7d-738f431afcfa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /GET/:id referreds_settings it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/referredSettings/${id}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9784051-d0fe-4530-8e38-e9d97ff1d848&quot;,&quot;parentUUID&quot;:&quot;bce27bdb-55a0-44ae-bf7d-738f431afcfa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ea3df8f-acd9-4b0f-abd0-4b03b62cd570&quot;,&quot;e9784051-d0fe-4530-8e38-e9d97ff1d848&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:177,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;868016f7-5c7b-4def-bee7-1cc63fd80d23&quot;,&quot;title&quot;:&quot;/PATCH/:id referreds_settings&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\refferedSettings.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\refferedSettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a category given the id&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /PATCH/:id referreds_settings it should UPDATE a category given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:272,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst newName = faker.random.words()\nconst newAmount = faker.random.number()\nchai\n  .request(server)\n  .patch(`${url}/referredSettings/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({\n    name: newName,\n    label: newName,\n    amountTo: newAmount,\n    amountFrom: newAmount\n  })\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.have.property(&#x27;name&#x27;).eql(newName)\n    body.should.have.property(&#x27;label&#x27;).eql(newName)\n    body.should.have.property(&#x27;amountTo&#x27;).eql(newAmount)\n    body.should.have.property(&#x27;amountFrom&#x27;).eql(newAmount)\n    body._id.should.be.a(&#x27;string&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;737003ff-cb3a-42fe-8fdc-4bcf19e86f23&quot;,&quot;parentUUID&quot;:&quot;868016f7-5c7b-4def-bee7-1cc63fd80d23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not UPDATE a type referred empty&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /PATCH/:id referreds_settings it should not UPDATE a type referred empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .patch(`${url}/referredSettings`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({})\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(404)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c519c768-0d20-46e8-a2be-60722b3288d4&quot;,&quot;parentUUID&quot;:&quot;868016f7-5c7b-4def-bee7-1cc63fd80d23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /PATCH/:id referreds_settings it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/referredSettings/${id}`)\n  .send({\n    name: faker.random.words()\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e65030f-47b1-42f3-8844-cf6c1e7ddc68&quot;,&quot;parentUUID&quot;:&quot;868016f7-5c7b-4def-bee7-1cc63fd80d23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;737003ff-cb3a-42fe-8fdc-4bcf19e86f23&quot;,&quot;c519c768-0d20-46e8-a2be-60722b3288d4&quot;,&quot;2e65030f-47b1-42f3-8844-cf6c1e7ddc68&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:277,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;0b55d9e4-20ab-441f-8e7c-3d610cf8ae82&quot;,&quot;title&quot;:&quot;/DELETE/:id category&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\refferedSettings.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\refferedSettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a category given the id&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_SETTINGS_ADMIN *********** /DELETE/:id category it should DELETE a category given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:465,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const typeRefferedDeleted = {\n  name: faker.random.words(),\n  label: faker.random.words(),\n  amountTo: faker.random.number(),\n  amountFrom: faker.random.number()\n}\nchai\n  .request(server)\n  .post(`${url}/referredSettings`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(typeRefferedDeleted)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;label&#x27;,\n      &#x27;name&#x27;,\n      &#x27;amountTo&#x27;,\n      &#x27;amountFrom&#x27;\n    )\n    chai\n      .request(server)\n      .delete(`${url}/referredSettings/${res.body._id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e37bc2b8-616e-4e74-b4de-07fd69d2eea5&quot;,&quot;parentUUID&quot;:&quot;0b55d9e4-20ab-441f-8e7c-3d610cf8ae82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e37bc2b8-616e-4e74-b4de-07fd69d2eea5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:465,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;048db841-adda-4b55-b3f7-c1ee364b0214&quot;,&quot;title&quot;:&quot;*********** RESERVATIONS_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** RESERVATIONS_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** RESERVATIONS_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  reservation.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28e46e58-4fa8-4811-88b7-8b52903522b8&quot;,&quot;parentUUID&quot;:&quot;048db841-adda-4b55-b3f7-c1ee364b0214&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d9a72d82-152d-41fa-bf41-e7e537704ac8&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:263,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aba57d3e-3b01-4a41-9562-4971113e5243&quot;,&quot;parentUUID&quot;:&quot;d9a72d82-152d-41fa-bf41-e7e537704ac8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:353,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7dbb16d3-1481-4099-8f59-234533dcd2b5&quot;,&quot;parentUUID&quot;:&quot;d9a72d82-152d-41fa-bf41-e7e537704ac8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aba57d3e-3b01-4a41-9562-4971113e5243&quot;,&quot;7dbb16d3-1481-4099-8f59-234533dcd2b5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:616,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;fc6cf4f1-f126-4d1e-ad42-672486cf0d49&quot;,&quot;title&quot;:&quot;/GET reservations&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /GET reservations it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/reservations/all`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16ff7ba0-173d-4e23-9040-6e6e85bf9e93&quot;,&quot;parentUUID&quot;:&quot;fc6cf4f1-f126-4d1e-ad42-672486cf0d49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET all the Reservations&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /GET reservations it should GET all the Reservations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:349,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/reservations/all`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.an(&#x27;object&#x27;)\n    const { docs, totalDocs } = body\n    docs.should.be.a(&#x27;array&#x27;)\n    totalDocs.should.be.a(&#x27;number&#x27;)\n    const reservationHead = _.head(docs)\n    reservationHead.should.include.keys(\n      &#x27;code&#x27;,\n      &#x27;departure&#x27;,\n      &#x27;idTour&#x27;\n    )\n    reservationHead.should.have.property(&#x27;user&#x27;).be.a(&#x27;object&#x27;)\n    reservationHead._id.should.be.a(&#x27;string&#x27;)\n    reservationHead.travelerLastName.should.be.a(&#x27;string&#x27;)\n    reservationHead.should.have.property(&#x27;travelerFirstName&#x27;).eql(&#x27;daniel&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a892e57-41d6-406e-9004-607c1de56eeb&quot;,&quot;parentUUID&quot;:&quot;fc6cf4f1-f126-4d1e-ad42-672486cf0d49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;16ff7ba0-173d-4e23-9040-6e6e85bf9e93&quot;,&quot;0a892e57-41d6-406e-9004-607c1de56eeb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:353,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;abf2d1b4-d7be-476b-9599-50f5e75fb919&quot;,&quot;title&quot;:&quot;/POST reservations&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a reservation without tour&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /POST reservations it should NOT POST a reservation without tour&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:176,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const reservationsOne = {}\nchai\n  .request(server)\n  .post(`${url}/reservations`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(reservationsOne)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ae01dc7-b1f0-466b-a78d-c5e38243a5b4&quot;,&quot;parentUUID&quot;:&quot;abf2d1b4-d7be-476b-9599-50f5e75fb919&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a reservations &quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /POST reservations it should POST a reservations &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:429,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fackEmail = &#x27;pepito@gmail.com&#x27;\nconst reservationsPost = {\n  travelerFirstName: faker.random.words(),\n  travelerLastName: faker.random.words(),\n  travelerEmail: fackEmail,\n  travelerPhone: {\n    number: &#x27;+57 314 3605160&#x27;,\n    code: &#x27;CO&#x27;\n  },\n  travelerDocument: faker.random.word(),\n  travelerAddress: faker.random.word(),\n  travelerBirthDay: &#x27;02-10-2020&#x27;,\n  travelerGender: &#x27;M&#x27;,\n  country: faker.random.word(),\n  city: faker.random.word(),\n  idTour,\n  idDeparture,\n  idUser,\n  status: &#x27;pending&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/reservations`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(reservationsPost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(201)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;amount&#x27;, &#x27;status&#x27;, &#x27;code&#x27;)\n    body.should.have.property(&#x27;amount&#x27;).to.be.a(&#x27;Number&#x27;)\n    body.should.have.property(&#x27;amount&#x27;).eql(948.99)\n    body.should.have.property(&#x27;status&#x27;).eql(&#x27;pending&#x27;)\n    body.should.have.property(&#x27;travelerEmail&#x27;).eql(fackEmail)\n    body.should.have.property(&#x27;idTour&#x27;).eql(idTour)\n    createdID.push(body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24c8eaee-65f6-4851-9cd6-e2b822c70ed8&quot;,&quot;parentUUID&quot;:&quot;abf2d1b4-d7be-476b-9599-50f5e75fb919&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT POST a reservation&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /POST reservations it should NOT POST a reservation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:177,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const reservationsTwo = {\n  travelerAddres: faker.random.word(),\n  travelerGender: faker.random.word(),\n  idDeparture\n}\nchai\n  .request(server)\n  .post(`${url}/reservations`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(reservationsTwo)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.be.a(&#x27;object&#x27;)\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b847072-1ac0-4277-ab3a-5eb2bbf4a7b0&quot;,&quot;parentUUID&quot;:&quot;abf2d1b4-d7be-476b-9599-50f5e75fb919&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /POST reservations it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const reservationsTwo = {\n  travelerAddres: faker.random.word(),\n  travelerGender: faker.random.word(),\n  idDeparture\n}\nchai\n  .request(server)\n  .post(`${url}/reservations`)\n  .send(reservationsTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;284dc534-8ad6-4f2b-8cab-e6eb5d425e09&quot;,&quot;parentUUID&quot;:&quot;abf2d1b4-d7be-476b-9599-50f5e75fb919&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ae01dc7-b1f0-466b-a78d-c5e38243a5b4&quot;,&quot;24c8eaee-65f6-4851-9cd6-e2b822c70ed8&quot;,&quot;8b847072-1ac0-4277-ab3a-5eb2bbf4a7b0&quot;,&quot;284dc534-8ad6-4f2b-8cab-e6eb5d425e09&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:785,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;6b7b150f-eca3-4436-a8ed-39d2a5b0c94b&quot;,&quot;title&quot;:&quot;/GET/:id Reservation&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should not  GET reservation by the given code&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /GET/:id Reservation it should not  GET reservation by the given code&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:252,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/reservations/getDetails/000-000`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(404)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have\n      .property(&#x27;errors&#x27;)\n      .eql({ msg: &#x27;NOT_FOUND_RESERVATION&#x27; })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba38d176-e3bf-4648-b58e-c8316f2a5244&quot;,&quot;parentUUID&quot;:&quot;6b7b150f-eca3-4436-a8ed-39d2a5b0c94b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a reservation by the given code&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /GET/:id Reservation it should GET a reservation by the given code&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:462,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/reservations/getDetails/${codeReservation}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(\n      &#x27;transactions&#x27;,\n      &#x27;travelerFirstName&#x27;,\n      &#x27;amount&#x27;,\n      &#x27;code&#x27;,\n      &#x27;_id&#x27;\n    )\n    body.should.have.property(&#x27;_id&#x27;).eql(idReservation)\n    body.should.have.property(&#x27;code&#x27;).eql(codeReservation)\n    body.amount.should.be.a(&#x27;number&#x27;)\n    body.asTour.should.be.a(&#x27;object&#x27;)\n    body.asDeparture.should.be.a(&#x27;object&#x27;)\n    body.asUser.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;travelerEmail&#x27;).eql(loginDetails.email)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35cfbb4d-b062-4292-b259-9232dc9b1ac9&quot;,&quot;parentUUID&quot;:&quot;6b7b150f-eca3-4436-a8ed-39d2a5b0c94b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a tour by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /GET/:id Reservation it should GET a tour by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:424,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/reservations/getDetails/${idReservation}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(\n      &#x27;transactions&#x27;,\n      &#x27;travelerFirstName&#x27;,\n      &#x27;amount&#x27;,\n      &#x27;code&#x27;,\n      &#x27;_id&#x27;\n    )\n    body.should.have.property(&#x27;_id&#x27;).eql(idReservation)\n    body.should.have.property(&#x27;code&#x27;).eql(codeReservation)\n    body.amount.should.be.a(&#x27;number&#x27;)\n    body.transactions.should.be.a(&#x27;array&#x27;).length(0)\n    body.should.have.property(&#x27;travelerEmail&#x27;).eql(loginDetails.email)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a379f401-282c-4797-82e0-9900e186e1d1&quot;,&quot;parentUUID&quot;:&quot;6b7b150f-eca3-4436-a8ed-39d2a5b0c94b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba38d176-e3bf-4648-b58e-c8316f2a5244&quot;,&quot;35cfbb4d-b062-4292-b259-9232dc9b1ac9&quot;,&quot;a379f401-282c-4797-82e0-9900e186e1d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1138,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;79b5e070-a25f-4590-b65e-7d9f8f09c09b&quot;,&quot;title&quot;:&quot;/PATCH/:id reservations&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a tour given the id&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /PATCH/:id reservations it should UPDATE a tour given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:366,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst emergencyName = faker.random.words()\nconst emergencyLastName = faker.random.words()\nconst dataUpdate = {\n  travelerFirstName: faker.random.words(),\n  travelerLastName: faker.random.words(),\n  travelerEmail: &#x27;user@user.com&#x27;,\n  travelerPhone: {\n    number: faker.random.words(),\n    code: faker.random.words()\n  },\n  travelerDocument: faker.random.words(),\n  travelerAddress: faker.random.words(),\n  travelerBirthDay: &#x27;2020-09-11T13:58:49.529Z&#x27;,\n  travelerGender: &#x27;F&#x27;,\n  country: faker.random.words(),\n  city: faker.random.words(),\n  observations: faker.random.words(),\n  status: &#x27;completed&#x27;,\n  buyerFirstName: faker.random.words(),\n  buyerLastName: faker.random.words(),\n  buyerDocument: faker.random.words(),\n  buyerEmail: &#x27;userdoc@user.com&#x27;,\n  buyerPhone: {\n    number: faker.random.words(),\n    code: faker.random.words()\n  },\n  buyerBirthDay: &#x27;2020-09-11T13:58:49.529Z&#x27;,\n  emergencyName,\n  emergencyLastName,\n  emergencyPhone: {\n    number: faker.random.words(),\n    code: faker.random.words()\n  },\n  invoice: faker.random.words(),\n  idDeparture,\n  customData: {}\n}\nchai\n  .request(server)\n  .patch(`${url}/reservations/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(dataUpdate)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.include.keys(\n      &#x27;status&#x27;,\n      &#x27;deleted&#x27;,\n      &#x27;_id&#x27;,\n      &#x27;idDeparture&#x27;,\n      &#x27;country&#x27;,\n      &#x27;city&#x27;,\n      &#x27;amount&#x27;,\n      &#x27;idTour&#x27;,\n      &#x27;idUser&#x27;,\n      &#x27;code&#x27;,\n      &#x27;createdAt&#x27;,\n      &#x27;updatedAt&#x27;,\n      &#x27;buyerPhone&#x27;,\n      &#x27;emergencyLastName&#x27;,\n      &#x27;emergencyName&#x27;,\n      &#x27;emergencyPhone&#x27;,\n      &#x27;invoice&#x27;,\n      &#x27;observations&#x27;\n    )\n    body.should.have.property(&#x27;emergencyName&#x27;).eql(emergencyName)\n    body.should.have\n      .property(&#x27;emergencyLastName&#x27;)\n      .eql(emergencyLastName)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41d5a170-dc14-4776-a078-f9da17d212ba&quot;,&quot;parentUUID&quot;:&quot;79b5e070-a25f-4590-b65e-7d9f8f09c09b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /PATCH/:id reservations it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst name = faker.random.words()\nconst lastName = faker.random.words()\nchai\n  .request(server)\n  .patch(`${url}/reservations/${id}`)\n  .send({\n    emergencyName: name,\n    emergencyLastName: lastName,\n    travelerBirthDay: &#x27;02-10-2020&#x27;\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;118fd420-8b3d-4fc1-ab32-2e505282b402&quot;,&quot;parentUUID&quot;:&quot;79b5e070-a25f-4590-b65e-7d9f8f09c09b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41d5a170-dc14-4776-a078-f9da17d212ba&quot;,&quot;118fd420-8b3d-4fc1-ab32-2e505282b402&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:369,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;48cdafa4-f4e0-422b-86f7-45ffd90c646d&quot;,&quot;title&quot;:&quot;/DELETE/:id reservations&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a tour given the id&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_ADMIN *********** /DELETE/:id reservations it should DELETE a tour given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:291,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .delete(`${url}/reservations/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, result) =&gt; {\n    const { body } = result\n    result.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c72c30bd-8f78-4617-8004-d94cf4b171db&quot;,&quot;parentUUID&quot;:&quot;48cdafa4-f4e0-422b-86f7-45ffd90c646d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c72c30bd-8f78-4617-8004-d94cf4b171db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:291,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;3834b275-430a-469a-8d38-240480260bc3&quot;,&quot;title&quot;:&quot;*********** SUPPORT_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\support.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\support.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;45ca5a33-8831-435b-a4b4-298f296c49a8&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\support.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\support.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:261,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0b77a69-2dab-4877-9c98-6efe2e6664df&quot;,&quot;parentUUID&quot;:&quot;45ca5a33-8831-435b-a4b4-298f296c49a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:345,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4aba1fb-2b69-4c3d-b54b-7747a0d0ae82&quot;,&quot;parentUUID&quot;:&quot;45ca5a33-8831-435b-a4b4-298f296c49a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0b77a69-2dab-4877-9c98-6efe2e6664df&quot;,&quot;e4aba1fb-2b69-4c3d-b54b-7747a0d0ae82&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:606,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;7af012ae-39e3-4607-aee2-3241b6c034ef&quot;,&quot;title&quot;:&quot;/GET support&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\support.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\support.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_ADMIN *********** /GET support it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/support`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c245bbb7-b711-4609-9800-afdae0e6cf81&quot;,&quot;parentUUID&quot;:&quot;7af012ae-39e3-4607-aee2-3241b6c034ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET all the support&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_ADMIN *********** /GET support it should GET all the support&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:176,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/support`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.docs.should.be.a(&#x27;array&#x27;)\n    body.totalDocs.should.be.a(&#x27;number&#x27;).eql(1)\n    const { docs } = body\n    const firstChat = _.head(docs)\n    firstChat.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;status&#x27;,\n      &#x27;hash&#x27;,\n      &#x27;firstMessage&#x27;\n    )\n    id = firstChat._id\n    firstChat._id.should.be.a(&#x27;string&#x27;)\n    firstChat.hash.should.be.a(&#x27;string&#x27;).eql(hash)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7f5c417-f268-45ac-86ac-40eecded8c4b&quot;,&quot;parentUUID&quot;:&quot;7af012ae-39e3-4607-aee2-3241b6c034ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET item by id&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_ADMIN *********** /GET support it should GET item by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:171,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/support/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;status&#x27;,\n      &#x27;hash&#x27;,\n      &#x27;messages&#x27;\n    )\n    body._id.should.be.a(&#x27;string&#x27;).eql(id)\n    body.hash.should.be.a(&#x27;string&#x27;).eql(hash)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2338f96e-f5ce-4150-9d9a-f3642726b113&quot;,&quot;parentUUID&quot;:&quot;7af012ae-39e3-4607-aee2-3241b6c034ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c245bbb7-b711-4609-9800-afdae0e6cf81&quot;,&quot;a7f5c417-f268-45ac-86ac-40eecded8c4b&quot;,&quot;2338f96e-f5ce-4150-9d9a-f3642726b113&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:349,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;b5a035eb-e7b8-41d9-af22-2e06a7fb998d&quot;,&quot;title&quot;:&quot;/POST To new support&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\support.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\support.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;error in params&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_ADMIN *********** /POST To new support error in params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:91,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const messagePost = {\n  message: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/support`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(messagePost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    // res.body.should.include.property(&#x27;errors&#x27;).eql({ msg: &#x27;BODY_INCOMPLETE&#x27; })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5b4e0bf-059f-46ce-85b7-686942f8d3e4&quot;,&quot;parentUUID&quot;:&quot;b5a035eb-e7b8-41d9-af22-2e06a7fb998d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST to without hash&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_ADMIN *********** /POST To new support it should POST to without hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:288,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const messagePost = {\n  message: faker.random.words(),\n  id\n}\nchai\n  .request(server)\n  .post(`${url}/support`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(messagePost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;hash&#x27;)\n    body._id.should.be.a(&#x27;string&#x27;)\n    body.hash.should.be.a(&#x27;string&#x27;)\n    body.messages.should.be.a(&#x27;array&#x27;).length(2)\n    const lastMessage = _.last(body.messages)\n    lastMessage.should.have.property(&#x27;message&#x27;).eql(messagePost.message)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa08607d-77f5-4e3e-9710-030e0f3ed9e5&quot;,&quot;parentUUID&quot;:&quot;b5a035eb-e7b8-41d9-af22-2e06a7fb998d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5b4e0bf-059f-46ce-85b7-686942f8d3e4&quot;,&quot;fa08607d-77f5-4e3e-9710-030e0f3ed9e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:379,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;52bf806a-d796-4a4b-9a29-d0c562c948cd&quot;,&quot;title&quot;:&quot;*********** TAGS_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tags.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tags.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** TAGS_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** TAGS_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  tag.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dceb0747-74ab-4829-8dd2-820055c18124&quot;,&quot;parentUUID&quot;:&quot;52bf806a-d796-4a4b-9a29-d0c562c948cd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c3594596-fc08-405f-a426-f9cea85ef316&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tags.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tags.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:260,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d821f43a-c6d0-491b-a2fb-6dc40b460e39&quot;,&quot;parentUUID&quot;:&quot;c3594596-fc08-405f-a426-f9cea85ef316&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:349,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67f638fb-c59e-4794-863e-f0548ee78abe&quot;,&quot;parentUUID&quot;:&quot;c3594596-fc08-405f-a426-f9cea85ef316&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d821f43a-c6d0-491b-a2fb-6dc40b460e39&quot;,&quot;67f638fb-c59e-4794-863e-f0548ee78abe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:609,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;f46c80cc-bdc0-4563-a2ff-65599bb48820&quot;,&quot;title&quot;:&quot;/GET tags&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tags.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tags.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /GET tags it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tags`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1da25d83-0783-42c3-a351-1d53b622017f&quot;,&quot;parentUUID&quot;:&quot;f46c80cc-bdc0-4563-a2ff-65599bb48820&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET all the tags&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /GET tags it should GET all the tags&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:270,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tags`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.docs.should.be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cfb5cfd-faf5-4090-90ba-9d9d5d670afd&quot;,&quot;parentUUID&quot;:&quot;f46c80cc-bdc0-4563-a2ff-65599bb48820&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET the tags with filters&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /GET tags it should GET the tags with filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tags?filter=tren&amp;fields=name`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.docs.should.be.a(&#x27;array&#x27;)\n    res.body.docs.should.have.lengthOf(1)\n    res.body.docs[0].should.have.property(&#x27;name&#x27;).eql(&#x27;tren&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a346744-39ea-4f5e-a86c-df4602bad45b&quot;,&quot;parentUUID&quot;:&quot;f46c80cc-bdc0-4563-a2ff-65599bb48820&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1da25d83-0783-42c3-a351-1d53b622017f&quot;,&quot;2cfb5cfd-faf5-4090-90ba-9d9d5d670afd&quot;,&quot;2a346744-39ea-4f5e-a86c-df4602bad45b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:532,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;e59855ae-3184-44ac-8e99-71d24f930350&quot;,&quot;title&quot;:&quot;/POST tags&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tags.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tags.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a tag without tag&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /POST tags it should NOT POST a tag without tag&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:173,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const tagPostOne = {}\nchai\n  .request(server)\n  .post(`${url}/tags`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(tagPostOne)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e99aecf3-f3bf-492f-a3e9-76a68f21a052&quot;,&quot;parentUUID&quot;:&quot;e59855ae-3184-44ac-8e99-71d24f930350&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a tag &quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /POST tags it should POST a tag &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:276,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const tagPostTwo = {\n  name\n}\nchai\n  .request(server)\n  .post(`${url}/tags`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(tagPostTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;name&#x27;)\n    body.should.have.property(&#x27;name&#x27;).eql(name)\n    body.should.have.property(&#x27;_id&#x27;).be.a(&#x27;string&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4aa1bfa-3b00-41eb-8ae7-efdc9c34eec9&quot;,&quot;parentUUID&quot;:&quot;e59855ae-3184-44ac-8e99-71d24f930350&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e99aecf3-f3bf-492f-a3e9-76a68f21a052&quot;,&quot;f4aa1bfa-3b00-41eb-8ae7-efdc9c34eec9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:449,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;28144f2b-523d-437e-bbe6-9d0fc878a1c7&quot;,&quot;title&quot;:&quot;/GET/:id tags&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tags.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tags.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a tags by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /GET/:id tags it should GET a tags by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/tags/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;name&#x27;, &#x27;_id&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;edf38bab-0954-420e-a401-75ab471786b1&quot;,&quot;parentUUID&quot;:&quot;28144f2b-523d-437e-bbe6-9d0fc878a1c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /GET/:id tags it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/tags/${id}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9d06839-99f5-4795-9219-204c48287ce9&quot;,&quot;parentUUID&quot;:&quot;28144f2b-523d-437e-bbe6-9d0fc878a1c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;edf38bab-0954-420e-a401-75ab471786b1&quot;,&quot;a9d06839-99f5-4795-9219-204c48287ce9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:262,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;83ce8f2f-ed5d-457e-8649-80149cd222c8&quot;,&quot;title&quot;:&quot;/PATCH/:id tags&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tags.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tags.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a tag given the id&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /PATCH/:id tags it should UPDATE a tag given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:265,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/tags/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({\n    name: newtag\n  })\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.have.property(&#x27;name&#x27;).eql(newtag)\n    body._id.should.be.a(&#x27;string&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cb6c1db-b075-4d6b-9d27-75df839dca59&quot;,&quot;parentUUID&quot;:&quot;83ce8f2f-ed5d-457e-8649-80149cd222c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not UPDATE a tags empty&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /PATCH/:id tags it should not UPDATE a tags empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:174,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/tags/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({})\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74271518-85ce-427e-95b0-79ee169b40c6&quot;,&quot;parentUUID&quot;:&quot;83ce8f2f-ed5d-457e-8649-80149cd222c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /PATCH/:id tags it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/tags/${id}`)\n  .send({\n    name: newtag\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5402d65-d47f-4f30-a680-cf490db2cf44&quot;,&quot;parentUUID&quot;:&quot;83ce8f2f-ed5d-457e-8649-80149cd222c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9cb6c1db-b075-4d6b-9d27-75df839dca59&quot;,&quot;74271518-85ce-427e-95b0-79ee169b40c6&quot;,&quot;b5402d65-d47f-4f30-a680-cf490db2cf44&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:442,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;09cbdf35-f1bc-48a3-b038-7174e56c2cc0&quot;,&quot;title&quot;:&quot;/DELETE/:id tag&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tags.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tags.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a tag given the id&quot;,&quot;fullTitle&quot;:&quot;*********** TAGS_ADMIN *********** /DELETE/:id tag it should DELETE a tag given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:547,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const tagdelete = {\n  name: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/tags`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(tagdelete)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;name&#x27;\n    )\n    chai\n      .request(server)\n      .delete(`${url}/tags/${res.body._id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e17f85a6-fb6e-4b4e-8181-ea5d8ff7f50a&quot;,&quot;parentUUID&quot;:&quot;09cbdf35-f1bc-48a3-b038-7174e56c2cc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e17f85a6-fb6e-4b4e-8181-ea5d8ff7f50a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:547,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;530f0aed-9eec-4381-b722-790d573e9f6b&quot;,&quot;title&quot;:&quot;*********** TOURS_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** TOURS_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** TOURS_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  Tour.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fff29286-72a1-4692-9ab1-dbe847911414&quot;,&quot;parentUUID&quot;:&quot;530f0aed-9eec-4381-b722-790d573e9f6b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d9d161ff-e895-42c3-b739-7ca753025ddb&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:268,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;075233f6-9dcd-407e-8199-ef30a025254b&quot;,&quot;parentUUID&quot;:&quot;d9d161ff-e895-42c3-b739-7ca753025ddb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:354,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c37ed04f-b598-4e2f-8f4a-76302efb05b3&quot;,&quot;parentUUID&quot;:&quot;d9d161ff-e895-42c3-b739-7ca753025ddb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;075233f6-9dcd-407e-8199-ef30a025254b&quot;,&quot;c37ed04f-b598-4e2f-8f4a-76302efb05b3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:622,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;36a4b3fc-57c7-4ee1-888d-66b01feec1ff&quot;,&quot;title&quot;:&quot;/GET tours&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the tours&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /GET tours it should GET all the tours&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:350,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    const { docs, totalDocs } = body\n    body.should.be.an(&#x27;object&#x27;)\n    body.hasNextPage.should.be.a(&#x27;boolean&#x27;)\n    body.hasPrevPage.should.be.a(&#x27;boolean&#x27;)\n    body.limit.should.be.a(&#x27;number&#x27;)\n    body.page.should.be.a(&#x27;number&#x27;)\n    body.pagingCounter.should.be.a(&#x27;number&#x27;)\n    body.totalPages.should.be.a(&#x27;number&#x27;)\n    totalDocs.should.be.a(&#x27;number&#x27;).eql(2)\n    docs.should.be.a(&#x27;array&#x27;)\n    docs.should.have.lengthOf(2)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff21dd09-e577-4682-929d-d4a4455c770e&quot;,&quot;parentUUID&quot;:&quot;36a4b3fc-57c7-4ee1-888d-66b01feec1ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET the tours with limit&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /GET tours it should GET the tours with limit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:342,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours?limit=1`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.an(&#x27;object&#x27;)\n    body.docs.should.be.a(&#x27;array&#x27;)\n    body.docs.should.have.lengthOf(1)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8af6acd6-9408-41d8-933f-5feac1b04b00&quot;,&quot;parentUUID&quot;:&quot;36a4b3fc-57c7-4ee1-888d-66b01feec1ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET the tours with slug&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /GET tours it should GET the tours with slug&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:356,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours/tour-one`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;countries&#x27;, &#x27;departures&#x27;, &#x27;itinerary&#x27;)\n    body.should.have.property(&#x27;slug&#x27;).eql(&#x27;tour-one&#x27;)\n    body.should.have.property(&#x27;status&#x27;).eql(&#x27;publish&#x27;)\n    body.should.have.property(&#x27;departures&#x27;).be.a(&#x27;array&#x27;).length(1)\n    body.should.have.property(&#x27;itinerary&#x27;).be.a(&#x27;array&#x27;).length(2)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;846b6983-2238-4630-b43a-28a12f67b478&quot;,&quot;parentUUID&quot;:&quot;36a4b3fc-57c7-4ee1-888d-66b01feec1ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET number tours all continents&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /GET tours it should GET number tours all continents&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:88,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours/allContinents`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.docs.should.be.an(&#x27;Array&#x27;).length(5)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3eb75dab-5f21-425b-b852-eeef67f2b316&quot;,&quot;parentUUID&quot;:&quot;36a4b3fc-57c7-4ee1-888d-66b01feec1ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff21dd09-e577-4682-929d-d4a4455c770e&quot;,&quot;8af6acd6-9408-41d8-933f-5feac1b04b00&quot;,&quot;846b6983-2238-4630-b43a-28a12f67b478&quot;,&quot;3eb75dab-5f21-425b-b852-eeef67f2b316&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1136,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;8d447409-f371-419e-9dde-793c8aacd6a9&quot;,&quot;title&quot;:&quot;/GET/:id tour&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a tour by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /GET/:id tour it should GET a tour by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:347,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours/5fa181b202945b26c456176a`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;title&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(&#x27;5fa181b202945b26c456176a&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b19edb7-6125-4376-8a59-356e137493ad&quot;,&quot;parentUUID&quot;:&quot;8d447409-f371-419e-9dde-793c8aacd6a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a tour by the given slug&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /GET/:id tour it should GET a tour by the given slug&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:347,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours/tour-one`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;title&#x27;)\n    body.should.have.property(&#x27;slug&#x27;).eql(&#x27;tour-one&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;305f6c01-f717-43b8-a43e-dd06be0a4917&quot;,&quot;parentUUID&quot;:&quot;8d447409-f371-419e-9dde-793c8aacd6a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1b19edb7-6125-4376-8a59-356e137493ad&quot;,&quot;305f6c01-f717-43b8-a43e-dd06be0a4917&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:694,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;a39fef6a-7fa5-401c-88a9-7a8599c7071e&quot;,&quot;title&quot;:&quot;/POST tour&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a tour without tour&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /POST tour it should NOT POST a tour without tour&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:180,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const tour = {}\nchai\n  .request(server)\n  .post(`${url}/tours`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(tour)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;970f8e7d-e79a-493d-be36-f83439872b66&quot;,&quot;parentUUID&quot;:&quot;a39fef6a-7fa5-401c-88a9-7a8599c7071e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a tour &quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /POST tour it should POST a tour &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:383,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const tour = {\n  title,\n  subTitle,\n  description,\n  countries: faker.random.number(),\n  cities: faker.random.number(),\n  duration: faker.random.number(),\n  route,\n  video: &#x27;https://hello.io&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/tours`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(tour)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;_id&#x27;)\n    res.body.should.have.property(&#x27;title&#x27;).eql(title)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f7ce3af-679f-41c4-a134-3fb5d13f71ed&quot;,&quot;parentUUID&quot;:&quot;a39fef6a-7fa5-401c-88a9-7a8599c7071e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT POST a tour that already exists&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /POST tour it should NOT POST a tour that already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:178,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const tour = {\n  title\n}\nchai\n  .request(server)\n  .post(`${url}/tours`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(tour)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4b3d49d-7e2f-45f8-a021-804568c91594&quot;,&quot;parentUUID&quot;:&quot;a39fef6a-7fa5-401c-88a9-7a8599c7071e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;970f8e7d-e79a-493d-be36-f83439872b66&quot;,&quot;6f7ce3af-679f-41c4-a134-3fb5d13f71ed&quot;,&quot;f4b3d49d-7e2f-45f8-a021-804568c91594&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:741,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;132a1257-4efd-4d24-a0e3-0d6c2b9e34e6&quot;,&quot;title&quot;:&quot;/PATCH/:id tour&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a tour given the id&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /PATCH/:id tour it should UPDATE a tour given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:282,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/tours/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({\n    title: newtour,\n    subTitle: faker.random.words(),\n    description: faker.random.words(),\n    route: faker.random.words(),\n    video: &#x27;https://hello.io&#x27;\n  })\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.have.property(&#x27;title&#x27;).eql(newtour)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;edb3b933-1277-4a71-bcfc-c18e7bf012ae&quot;,&quot;parentUUID&quot;:&quot;132a1257-4efd-4d24-a0e3-0d6c2b9e34e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it NOT should UPDATE a tour unauthorized&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /PATCH/:id tour it NOT should UPDATE a tour unauthorized&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .patch(`${url}/tours/${id}`)\n  .send({\n    title: newtour\n  })\n  .end((error, res) =&gt; {\n    res.should.have.status(401)\n    res.body.should.be.a(&#x27;object&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed4aab60-9f10-4dc1-9eb1-3a194ca19d3b&quot;,&quot;parentUUID&quot;:&quot;132a1257-4efd-4d24-a0e3-0d6c2b9e34e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;edb3b933-1277-4a71-bcfc-c18e7bf012ae&quot;,&quot;ed4aab60-9f10-4dc1-9eb1-3a194ca19d3b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:286,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;c36568c1-5d82-41f1-a399-e5c3a1ac8cc6&quot;,&quot;title&quot;:&quot;/DELETE/:id tour&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a tour given the id&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_ADMIN *********** /DELETE/:id tour it should DELETE a tour given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:666,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const tour = {\n  title: faker.random.words(),\n  subTitle,\n  description,\n  countries: faker.random.number(),\n  cities: faker.random.number(),\n  duration: faker.random.number(),\n  route,\n  video: &#x27;https://hello.io&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/tours`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(tour)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;title&#x27;,\n      &#x27;subTitle&#x27;,\n      &#x27;description&#x27;,\n      &#x27;route&#x27;\n    )\n    chai\n      .request(server)\n      .delete(`${url}/tours/${res.body._id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .end((error, result) =&gt; {\n        result.should.have.status(200)\n        result.body.should.be.a(&#x27;object&#x27;)\n        result.body.should.have.property(&#x27;msg&#x27;).eql(&#x27;DELETED&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1303f41b-6dc1-4ead-b277-a089a16db4d5&quot;,&quot;parentUUID&quot;:&quot;c36568c1-5d82-41f1-a399-e5c3a1ac8cc6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1303f41b-6dc1-4ead-b277-a089a16db4d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:666,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;7ee42f6a-de31-4065-8ee7-e6c28125965e&quot;,&quot;title&quot;:&quot;*********** USERS_ADMIN ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\users.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\users.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** USERS_ADMIN ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** \&quot;after all\&quot; hook in \&quot;*********** USERS_ADMIN ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  User.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03432764-f0fb-4d99-b21e-174fdc4dc56d&quot;,&quot;parentUUID&quot;:&quot;7ee42f6a-de31-4065-8ee7-e6c28125965e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f4711ca3-7db7-4244-908a-7f3a38758cd4&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\users.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\users.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:257,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c026c9b-646a-486e-9b4c-6c90e8ec6c16&quot;,&quot;parentUUID&quot;:&quot;f4711ca3-7db7-4244-908a-7f3a38758cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:344,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e3a8bd0-971e-4e19-bfc1-3a600055fd83&quot;,&quot;parentUUID&quot;:&quot;f4711ca3-7db7-4244-908a-7f3a38758cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c026c9b-646a-486e-9b4c-6c90e8ec6c16&quot;,&quot;5e3a8bd0-971e-4e19-bfc1-3a600055fd83&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:601,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;b806d0dc-6505-4b24-b90a-66c3dbc4d269&quot;,&quot;title&quot;:&quot;/GET users&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\users.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\users.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /GET users it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/users`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b18a8d44-77fc-4850-a26b-76a6abfd81c0&quot;,&quot;parentUUID&quot;:&quot;b806d0dc-6505-4b24-b90a-66c3dbc4d269&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET all the users&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /GET users it should GET all the users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:265,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/users`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.docs.should.be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6df79b6e-b96e-4ab9-a16f-2bb5f78ead31&quot;,&quot;parentUUID&quot;:&quot;b806d0dc-6505-4b24-b90a-66c3dbc4d269&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET the users with filters&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /GET users it should GET the users with filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:254,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/users?filter=admin@admin.com&amp;fields=email`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.an(&#x27;object&#x27;)\n    body.docs.should.be.a(&#x27;array&#x27;)\n    body.docs.should.have.lengthOf(1)\n    const { docs } = body\n    const first = _.head(docs)\n    first.should.have.property(&#x27;email&#x27;).eql(&#x27;admin@admin.com&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0230d82d-7c2d-44dc-b44f-8aa0a289fe3d&quot;,&quot;parentUUID&quot;:&quot;b806d0dc-6505-4b24-b90a-66c3dbc4d269&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET public profile&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /GET users it should GET public profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:174,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/users/public/${publicId}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.have.property(&#x27;id&#x27;).eql(publicId)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99cc5e4f-d582-42d5-bcc9-ba5522a6afb0&quot;,&quot;parentUUID&quot;:&quot;b806d0dc-6505-4b24-b90a-66c3dbc4d269&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b18a8d44-77fc-4850-a26b-76a6abfd81c0&quot;,&quot;6df79b6e-b96e-4ab9-a16f-2bb5f78ead31&quot;,&quot;0230d82d-7c2d-44dc-b44f-8aa0a289fe3d&quot;,&quot;99cc5e4f-d582-42d5-bcc9-ba5522a6afb0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:695,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;3cd20e33-6a7b-4c04-8b08-003e5b491e82&quot;,&quot;title&quot;:&quot;/POST user&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\users.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\users.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a user without name&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /POST user it should NOT POST a user without name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:176,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {}\nchai\n  .request(server)\n  .post(`${url}/users`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(user)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab6224ea-07e5-46a4-928e-67d05732609e&quot;,&quot;parentUUID&quot;:&quot;3cd20e33-6a7b-4c04-8b08-003e5b491e82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a user &quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /POST user it should POST a user &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:984,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  name: faker.random.words(),\n  surname: faker.random.words(),\n  document: faker.random.words(),\n  status: &#x27;enabled&#x27;,\n  email,\n  password: faker.random.words(),\n  role: &#x27;user&#x27;,\n  phone: faker.random.words(),\n  description: faker.random.words(),\n  gender: &#x27;O&#x27;,\n  birthDate: &#x27;01-01-1996&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/users`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(user)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;name&#x27;, &#x27;email&#x27;, &#x27;verification&#x27;)\n    const tokenpost = body.accessToken\n    chai\n      .request(server)\n      .post(`${url}/exchange`)\n      .send({\n        accessToken: tokenpost\n      })\n      .end((error, response) =&gt; {\n        response.should.have.status(200)\n        response.body.should.be.an(&#x27;object&#x27;)\n        response.body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n        createdID.push(response.body.user._id)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf7b05fc-f2c7-45ab-94d8-a146d3a4dabe&quot;,&quot;parentUUID&quot;:&quot;3cd20e33-6a7b-4c04-8b08-003e5b491e82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ab6224ea-07e5-46a4-928e-67d05732609e&quot;,&quot;cf7b05fc-f2c7-45ab-94d8-a146d3a4dabe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1160,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;88d060c5-5c26-466e-9f22-c513670f2451&quot;,&quot;title&quot;:&quot;/GET/:id user&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\users.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\users.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a user by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /GET/:id user it should GET a user by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:357,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/users/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;name&#x27;)\n    res.body.should.have.property(&#x27;_id&#x27;).eql(id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fd723e4-b3e4-4298-a7fd-0a641bad8e72&quot;,&quot;parentUUID&quot;:&quot;88d060c5-5c26-466e-9f22-c513670f2451&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2fd723e4-b3e4-4298-a7fd-0a641bad8e72&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:357,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;c91eb4ef-b47e-4fb5-bfd3-158fd12ef372&quot;,&quot;title&quot;:&quot;/GET/PAYMENTS:id user&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\users.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\users.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all transaction in wallet&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /GET/PAYMENTS:id user it should GET all transaction in wallet&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:353,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/users/payment/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    const { docs } = body\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    docs.should.be.a(&#x27;array&#x27;).length(0)\n    body.should.have.property(&#x27;total&#x27;).eql(0)\n    body.should.have.property(&#x27;total&#x27;).eql(0)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a748885-213b-4954-8749-f564d84a96ac&quot;,&quot;parentUUID&quot;:&quot;c91eb4ef-b47e-4fb5-bfd3-158fd12ef372&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a748885-213b-4954-8749-f564d84a96ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:353,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;debb2420-0469-4ed1-88a4-644dec7eb010&quot;,&quot;title&quot;:&quot;/PATCH/:id user&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testAdmin\\users.js&quot;,&quot;file&quot;:&quot;\\test\\testAdmin\\users.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a user given the id&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /PATCH/:id user it should UPDATE a user given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:458,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst user = {\n  name: &#x27;JS123456&#x27;,\n  email: &#x27;emailthatalreadyexists@email.com&#x27;,\n  urlTwitter: faker.internet.url(),\n  urlGitHub: faker.internet.url(),\n  phone: faker.phone.phoneNumber(),\n  city: faker.random.words(),\n  country: faker.random.words(),\n  avatar: faker.internet.url(),\n  video: faker.internet.url(),\n  birthDate: &#x27;01-01-2001&#x27;\n}\nchai\n  .request(server)\n  .patch(`${url}/users/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(user)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(id)\n    body.should.have.property(&#x27;name&#x27;).eql(&#x27;JS123456&#x27;)\n    body.should.have.property(&#x27;email&#x27;).eql(&#x27;emailthatalreadyexists@email.com&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c336246-0691-4915-9e53-f466af2664d0&quot;,&quot;parentUUID&quot;:&quot;debb2420-0469-4ed1-88a4-644dec7eb010&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT UPDATE a user with email that already exists&quot;,&quot;fullTitle&quot;:&quot;*********** USERS_ADMIN *********** /PATCH/:id user it should NOT UPDATE a user with email that already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:263,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst user = {\n  name: faker.random.words(),\n  email: &#x27;admin@admin.com&#x27;,\n  role: &#x27;admin&#x27;\n}\nchai\n  .request(server)\n  .patch(`${url}/users/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(user)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;169aefa9-e9bc-4d4f-9d4b-7a1042d486e1&quot;,&quot;parentUUID&quot;:&quot;debb2420-0469-4ed1-88a4-644dec7eb010&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c336246-0691-4915-9e53-f466af2664d0&quot;,&quot;169aefa9-e9bc-4d4f-9d4b-7a1042d486e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:721,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;6554d753-df1e-4441-9f16-7f544628aad0&quot;,&quot;title&quot;:&quot;*********** AUTH_USER ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** AUTH_USER ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** \&quot;after all\&quot; hook in \&quot;*********** AUTH_USER ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  User.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;923d74bf-7bd3-4bcf-9428-2cf8535a5ca2&quot;,&quot;parentUUID&quot;:&quot;6554d753-df1e-4441-9f16-7f544628aad0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5690e81e-3bd8-4585-ba71-e074495adaf0&quot;,&quot;title&quot;:&quot;/GET /&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET home user url&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /GET / it should GET home user url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e1260f2-62c6-4655-ada2-d7c1237c4448&quot;,&quot;parentUUID&quot;:&quot;5690e81e-3bd8-4585-ba71-e074495adaf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1e1260f2-62c6-4655-ada2-d7c1237c4448&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;b117a80b-eef5-402a-93f2-483aa42616ff&quot;,&quot;title&quot;:&quot;/GET /404url&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET 404 url&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /GET /404url it should GET 404 url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(&#x27;/404url&#x27;)\n  .end((err, res) =&gt; {\n    res.should.have.status(404)\n    res.body.should.be.an(&#x27;object&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;989b0acd-d0c3-48c9-aea9-219babcac154&quot;,&quot;parentUUID&quot;:&quot;b117a80b-eef5-402a-93f2-483aa42616ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;989b0acd-d0c3-48c9-aea9-219babcac154&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;5faa01ef-047b-4cd3-a8d5-99c0a308c30e&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;error login&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /POST login error login&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:176,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send({ email: &#x27;admin@admin.com&#x27;, password: &#x27;error password&#x27; })\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.have.property(&#x27;errors&#x27;).eql({ msg: { msg: &#x27;WRONG_PASSWORD&#x27; } })\n    res.body.should.be.an(&#x27;object&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;355930ce-8116-43ae-aae5-5c1e8ca09e82&quot;,&quot;parentUUID&quot;:&quot;5faa01ef-047b-4cd3-a8d5-99c0a308c30e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET token&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /POST login it should GET token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:291,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    token = res.body.accessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cda0ffed-75f3-4e27-bf2b-b5a9cb6edf24&quot;,&quot;parentUUID&quot;:&quot;5faa01ef-047b-4cd3-a8d5-99c0a308c30e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;355930ce-8116-43ae-aae5-5c1e8ca09e82&quot;,&quot;cda0ffed-75f3-4e27-bf2b-b5a9cb6edf24&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:467,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;d4cbfaba-8370-49dd-bd75-21f2cc53c195&quot;,&quot;title&quot;:&quot;/POST register&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should POST register&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /POST register it should POST register&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  name: faker.random.words(),\n  surname: faker.random.words(),\n  email,\n  password: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/register`)\n  .send(user)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    body.user.should.have.property(&#x27;email&#x27;).eql(email.toLowerCase())\n    createdID.push(res.body.user._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;308a3fbe-e13a-4df4-9998-c8b24a77da68&quot;,&quot;parentUUID&quot;:&quot;d4cbfaba-8370-49dd-bd75-21f2cc53c195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT POST a register empty values&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /POST register it should NOT POST a register empty values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  surname: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/register`)\n  .send(user)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;045b901d-bc0d-41d4-ba97-7026514a4e66&quot;,&quot;parentUUID&quot;:&quot;d4cbfaba-8370-49dd-bd75-21f2cc53c195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT POST a register if email already exists&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /POST register it should NOT POST a register if email already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:91,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  name: faker.random.words(),\n  surname: faker.random.words(),\n  email,\n  password: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/register`)\n  .send(user)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { msg } = body.errors\n    const message = `E11000 duplicate key error collection: oauth_service.users index: email_1 dup key: { email: \&quot;${email.toLowerCase()}\&quot; }`\n    msg.should.have.property(&#x27;msg&#x27;).eql(message)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32b62732-f161-47c7-ab9b-0fdecef8b820&quot;,&quot;parentUUID&quot;:&quot;d4cbfaba-8370-49dd-bd75-21f2cc53c195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;308a3fbe-e13a-4df4-9998-c8b24a77da68&quot;,&quot;045b901d-bc0d-41d4-ba97-7026514a4e66&quot;,&quot;32b62732-f161-47c7-ab9b-0fdecef8b820&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:194,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;a91cd0a6-dc73-49ff-81b0-a688a69263ce&quot;,&quot;title&quot;:&quot;/POST forgot&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should Error  POST forgot&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /POST forgot it should Error  POST forgot&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/forgot`)\n  .send({\n    email: faker.internet.email()\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    body.errors.should.have.property(&#x27;msg&#x27;).eql({ msg: &#x27;USER_DOES_NOT_EXIST&#x27; })\n    verificationForgot = res.body.verification\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b349ea08-d22a-4736-a301-45cf53d7dfcf&quot;,&quot;parentUUID&quot;:&quot;a91cd0a6-dc73-49ff-81b0-a688a69263ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST forgot&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /POST forgot it should POST forgot&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:178,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const object = {\n  email\n}\nchai\n  .request(server)\n  .post(`${url}/forgot`)\n  .send(object)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;msg&#x27;, &#x27;verification&#x27;)\n    verificationForgot = res.body.verification\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89f414f1-0617-4e8f-ad85-f10ec7678b5e&quot;,&quot;parentUUID&quot;:&quot;a91cd0a6-dc73-49ff-81b0-a688a69263ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b349ea08-d22a-4736-a301-45cf53d7dfcf&quot;,&quot;89f414f1-0617-4e8f-ad85-f10ec7678b5e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:267,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;7f518662-ae6d-4bd3-b49e-99dd026ff7f2&quot;,&quot;title&quot;:&quot;/POST reset&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should POST reset&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /POST reset it should POST reset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:344,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/reset`)\n  .send({\n    id: verificationForgot,\n    password: &#x27;12345&#x27;\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;msg&#x27;).eql(&#x27;PASSWORD_CHANGED&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27cd6061-5655-442d-8917-40f6787960b7&quot;,&quot;parentUUID&quot;:&quot;7f518662-ae6d-4bd3-b49e-99dd026ff7f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;27cd6061-5655-442d-8917-40f6787960b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:344,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;362bc4d4-ab02-4c61-84c8-cab6c5e4484f&quot;,&quot;title&quot;:&quot;/GET token&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\auth.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\auth.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /GET token it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/token`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e79eaf81-5301-4ab7-a1b4-f3360ab07df3&quot;,&quot;parentUUID&quot;:&quot;362bc4d4-ab02-4c61-84c8-cab6c5e4484f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** AUTH_USER *********** /GET token it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:341,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken: token\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9676ee5f-bb27-4045-9285-ab86bee1c104&quot;,&quot;parentUUID&quot;:&quot;362bc4d4-ab02-4c61-84c8-cab6c5e4484f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e79eaf81-5301-4ab7-a1b4-f3360ab07df3&quot;,&quot;9676ee5f-bb27-4045-9285-ab86bee1c104&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:344,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;abbd64c5-d9db-49b0-9099-553d78157d1b&quot;,&quot;title&quot;:&quot;*********** BLOGS_USER ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\blogs.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\blogs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8cde832f-de26-4614-ac3c-37e1782c1f75&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\blogs.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\blogs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_USER *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:272,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb975fa7-9e72-40e2-b9d4-f689c6fbc28f&quot;,&quot;parentUUID&quot;:&quot;8cde832f-de26-4614-ac3c-37e1782c1f75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb975fa7-9e72-40e2-b9d4-f689c6fbc28f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:272,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;df7ef7af-ab38-42c1-b0da-d927e053ecab&quot;,&quot;title&quot;:&quot;/GET blogs&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\blogs.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\blogs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;/GET blogs\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_USER *********** /GET blogs \&quot;after all\&quot; hook in \&quot;/GET blogs\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((idBlog) =&gt; {\n  Blog.findByIdAndRemove(idBlog, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dedc536e-8762-489a-94da-108bb6ba65e0&quot;,&quot;parentUUID&quot;:&quot;df7ef7af-ab38-42c1-b0da-d927e053ecab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the blogs&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_USER *********** /GET blogs it should GET all the blogs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/blogs`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    const { docs } = body\n    const blog = _.head(docs)\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.have.lengthOf(1)\n    docs.should.be.a(&#x27;array&#x27;)\n    id = blog._id\n    slugBlog = blog.slug\n    blog.should.include.keys(&#x27;_id&#x27;, &#x27;title&#x27;, &#x27;description&#x27;)\n    body.should.be.an(&#x27;object&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a39cc8a7-5665-4e2b-9aef-81d78add61af&quot;,&quot;parentUUID&quot;:&quot;df7ef7af-ab38-42c1-b0da-d927e053ecab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7bbd074f-4568-458a-b159-36ad1fea8750&quot;,&quot;title&quot;:&quot;/GET/:id blogs&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\blogs.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\blogs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should not GET a blogs by error id&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_USER *********** /GET blogs /GET/:id blogs it should not GET a blogs by error id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:85,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/blogs/id_error`)\n  .end((error, res) =&gt; {\n    res.should.have.status(404)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    body.should.have.property(&#x27;errors&#x27;).eql({ msg: &#x27;NOT_FOUND&#x27; })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b29e8748-4135-4f2c-a956-67ba836dab00&quot;,&quot;parentUUID&quot;:&quot;7bbd074f-4568-458a-b159-36ad1fea8750&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a blogs by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_USER *********** /GET blogs /GET/:id blogs it should GET a blogs by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/blogs/${id}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;title&#x27;, &#x27;description&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(`${id}`)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c937b7d0-df82-4d31-91bc-adb953d0a4cc&quot;,&quot;parentUUID&quot;:&quot;7bbd074f-4568-458a-b159-36ad1fea8750&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a blogs by the given slug&quot;,&quot;fullTitle&quot;:&quot;*********** BLOGS_USER *********** /GET blogs /GET/:id blogs it should GET a blogs by the given slug&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:83,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/blogs/${slugBlog}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;title&#x27;, &#x27;description&#x27;)\n    body.should.have.property(&#x27;slug&#x27;).eql(`${slugBlog}`)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;908517b7-22d5-46fd-bb3f-fbb590679a78&quot;,&quot;parentUUID&quot;:&quot;7bbd074f-4568-458a-b159-36ad1fea8750&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b29e8748-4135-4f2c-a956-67ba836dab00&quot;,&quot;c937b7d0-df82-4d31-91bc-adb953d0a4cc&quot;,&quot;908517b7-22d5-46fd-bb3f-fbb590679a78&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:254,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[&quot;a39cc8a7-5665-4e2b-9aef-81d78add61af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:90,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;96a5f076-e2b2-4598-9f59-f95bfa1c5482&quot;,&quot;title&quot;:&quot;*********** CATEGORIES_USER ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\categories.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\categories.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** CATEGORIES_USER ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_USER *********** \&quot;after all\&quot; hook in \&quot;*********** CATEGORIES_USER ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((idCategory) =&gt; {\n  modalCategory.findByIdAndRemove(idCategory, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0715c2ac-7c82-4c2e-87f1-863fae23de1a&quot;,&quot;parentUUID&quot;:&quot;96a5f076-e2b2-4598-9f59-f95bfa1c5482&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1a1a9386-79ae-4e16-8eab-e2c22775e270&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\categories.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\categories.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_USER *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3beea2ff-ac09-4857-8c47-5d6480524cae&quot;,&quot;parentUUID&quot;:&quot;1a1a9386-79ae-4e16-8eab-e2c22775e270&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3beea2ff-ac09-4857-8c47-5d6480524cae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:258,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;c021172b-7022-4b49-8c47-0cc76ff9db62&quot;,&quot;title&quot;:&quot;/GET categories&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\categories.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\categories.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the categories&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_USER *********** /GET categories it should GET all the categories&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/categories`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    const { docs } = body\n    const category = _.head(docs)\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.have.lengthOf(1)\n    id = category._id\n    category.should.include.keys(&#x27;_id&#x27;, &#x27;name&#x27;, &#x27;description&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e50c074-7983-4373-b7cf-400926015f5c&quot;,&quot;parentUUID&quot;:&quot;c021172b-7022-4b49-8c47-0cc76ff9db62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT GET the categories with filters&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_USER *********** /GET categories it should NOT GET the categories with filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:85,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/categories?filter=notExist&amp;fields=name`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    const { body } = res\n    const { docs, totalDocs } = body\n    totalDocs.should.be.a(&#x27;number&#x27;)\n    body.should.have.property(&#x27;totalDocs&#x27;).eql(0)\n    docs.should.have.lengthOf(0)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f9e88db-f9ae-459d-a57e-f161aba2f8e8&quot;,&quot;parentUUID&quot;:&quot;c021172b-7022-4b49-8c47-0cc76ff9db62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET the categories with filters&quot;,&quot;fullTitle&quot;:&quot;*********** CATEGORIES_USER *********** /GET categories it should GET the categories with filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:87,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/categories?filter=technology&amp;fields=name`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    const { body } = res\n    const { docs } = body\n    const category = _.head(docs)\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.have.lengthOf(1)\n    category.should.include.keys(&#x27;_id&#x27;, &#x27;name&#x27;, &#x27;description&#x27;)\n    category.should.have.property(&#x27;name&#x27;).eql(&#x27;technology&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04bf5a00-0bc6-4ac6-b374-667f4f1db910&quot;,&quot;parentUUID&quot;:&quot;c021172b-7022-4b49-8c47-0cc76ff9db62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e50c074-7983-4373-b7cf-400926015f5c&quot;,&quot;5f9e88db-f9ae-459d-a57e-f161aba2f8e8&quot;,&quot;04bf5a00-0bc6-4ac6-b374-667f4f1db910&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:256,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;21c58434-34cb-492a-a39d-f87c9cf3a107&quot;,&quot;title&quot;:&quot;*********** CONTRACTS_USER ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\contracts.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\contracts.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;15b6ad0b-6f17-48e4-b288-38f7a8dcd1ec&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\contracts.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\contracts.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** CONTRACTS_USER *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f4bbcdb-1dbf-4d88-8e8f-5843117acaf2&quot;,&quot;parentUUID&quot;:&quot;15b6ad0b-6f17-48e4-b288-38f7a8dcd1ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** CONTRACTS_USER *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:343,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e0bcb4c-8c72-4fd0-84f4-8cf8ebcd564f&quot;,&quot;parentUUID&quot;:&quot;15b6ad0b-6f17-48e4-b288-38f7a8dcd1ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9f4bbcdb-1dbf-4d88-8e8f-5843117acaf2&quot;,&quot;5e0bcb4c-8c72-4fd0-84f4-8cf8ebcd564f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:601,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;d677b80a-2f0a-4924-8118-0c8d49c452b2&quot;,&quot;title&quot;:&quot;/POST contracts&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\contracts.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\contracts.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a contract without contracts&quot;,&quot;fullTitle&quot;:&quot;*********** CONTRACTS_USER *********** /POST contracts it should NOT POST a contract without contracts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:93,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const contractOne = {}\nchai\n  .request(server)\n  .post(`${url}/contracts`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(contractOne)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { msg } = body.errors\n    msg.should.be.a(&#x27;Array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb65337e-9a3b-4379-b62a-0d1c0f76ddad&quot;,&quot;parentUUID&quot;:&quot;d677b80a-2f0a-4924-8118-0c8d49c452b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a contracts 100 percentage&quot;,&quot;fullTitle&quot;:&quot;*********** CONTRACTS_USER *********** /POST contracts it should POST a contracts 100 percentage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:535,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/contracts`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(contractData)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;percentage&#x27;).eql(contractData.payAmount)\n    body.should.have.property(&#x27;idOperation&#x27;).eql(contractData.id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e82465e-1132-4e5d-99e1-078fde5b25e5&quot;,&quot;parentUUID&quot;:&quot;d677b80a-2f0a-4924-8118-0c8d49c452b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a contracts other percentage&quot;,&quot;fullTitle&quot;:&quot;*********** CONTRACTS_USER *********** /POST contracts it should POST a contracts other percentage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:528,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;contractData.payAmount = 10\nchai\n  .request(server)\n  .post(`${url}/contracts`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(contractData)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;percentage&#x27;).eql(contractData.payAmount)\n    body.should.have.property(&#x27;idOperation&#x27;).eql(contractData.id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22a6466d-5630-4370-8e8f-54bef051946d&quot;,&quot;parentUUID&quot;:&quot;d677b80a-2f0a-4924-8118-0c8d49c452b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT POST a contracts are emply fields&quot;,&quot;fullTitle&quot;:&quot;*********** CONTRACTS_USER *********** /POST contracts it should NOT POST a contracts are emply fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const contractTwo = {\n  id: &#x27;5fa1831e02945b26c4561774&#x27;,\n  payAmount: 100\n}\nchai\n  .request(server)\n  .post(`${url}/contracts/`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(contractTwo)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { msg } = body.errors\n    msg.should.be.a(&#x27;Array&#x27;)\n    msg.should.have.length(2)\n    const first = _.head(msg)\n    first.should.include.keys(&#x27;msg&#x27;, &#x27;param&#x27;, &#x27;location&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bad04ef-1c04-43ca-9e04-436083c4e32b&quot;,&quot;parentUUID&quot;:&quot;d677b80a-2f0a-4924-8118-0c8d49c452b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb65337e-9a3b-4379-b62a-0d1c0f76ddad&quot;,&quot;2e82465e-1132-4e5d-99e1-078fde5b25e5&quot;,&quot;22a6466d-5630-4370-8e8f-54bef051946d&quot;,&quot;0bad04ef-1c04-43ca-9e04-436083c4e32b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1256,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;9d1035da-8a7f-4c4f-bb57-e9449504bc53&quot;,&quot;title&quot;:&quot;*********** CONVERSATIONS_USER ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\conversations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\conversations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** CONVERSATIONS_USER ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_USER *********** \&quot;after all\&quot; hook in \&quot;*********** CONVERSATIONS_USER ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  conversation.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4754d591-1206-4be8-87f6-58dac0eabcbc&quot;,&quot;parentUUID&quot;:&quot;9d1035da-8a7f-4c4f-bb57-e9449504bc53&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d755997c-2301-4939-a159-c7ce79bc2fd1&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\conversations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\conversations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_USER *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:268,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f36b1b8-3eaa-4f62-91ee-378accb8f726&quot;,&quot;parentUUID&quot;:&quot;d755997c-2301-4939-a159-c7ce79bc2fd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_USER *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:348,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;311e4759-0c50-4c25-90c6-acbee2b7a4cf&quot;,&quot;parentUUID&quot;:&quot;d755997c-2301-4939-a159-c7ce79bc2fd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7f36b1b8-3eaa-4f62-91ee-378accb8f726&quot;,&quot;311e4759-0c50-4c25-90c6-acbee2b7a4cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:616,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;a3966d68-8e17-441f-9616-a3c4e06b9a7f&quot;,&quot;title&quot;:&quot;/GET conversations&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\conversations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\conversations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_USER *********** /GET conversations it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/conversations`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;255b755c-f779-4514-a41d-3f689b477ae6&quot;,&quot;parentUUID&quot;:&quot;a3966d68-8e17-441f-9616-a3c4e06b9a7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET all the conversations&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_USER *********** /GET conversations it should GET all the conversations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:268,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/conversations`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    // res.body.should.have.lengthOf(1)\n    body.docs.should.be.a(&#x27;array&#x27;)\n    body.limit.should.be.a(&#x27;number&#x27;)\n    body.page.should.be.a(&#x27;number&#x27;)\n    body.pagingCounter.should.be.a(&#x27;number&#x27;)\n    body.totalDocs.should.be.a(&#x27;number&#x27;)\n    body.totalPages.should.be.a(&#x27;number&#x27;)\n    const { docs } = body\n    const firstChat = _.head(docs)\n    firstChat.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;members&#x27;,\n      &#x27;type&#x27;,\n      &#x27;hash&#x27;,\n      &#x27;createdAt&#x27;,\n      &#x27;updatedAt&#x27;,\n      &#x27;messages&#x27;,\n      &#x27;toFrom&#x27;,\n      &#x27;firstMessage&#x27;\n    )\n    firstChat._id.should.be.a(&#x27;string&#x27;)\n    firstChat.members.should.be.a(&#x27;array&#x27;)\n    firstChat.type.should.be.a(&#x27;string&#x27;)\n    firstChat.hash.should.be.a(&#x27;string&#x27;)\n    firstChat.messages.should.be.a(&#x27;array&#x27;)\n    firstChat.toFrom.should.be.a(&#x27;object&#x27;)\n    firstChat.firstMessage.should.be.a(&#x27;object&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c65b06f2-046f-4a71-ba7f-409156f3f6c2&quot;,&quot;parentUUID&quot;:&quot;a3966d68-8e17-441f-9616-a3c4e06b9a7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not  GET conversations by hash&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_USER *********** /GET conversations it should not  GET conversations by hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:175,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/conversations/noexiste`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;errors&#x27;).eql({ msg: &#x27;NOT_FOUND&#x27; })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;577f9b65-3995-4a24-b835-a3ddc98a6027&quot;,&quot;parentUUID&quot;:&quot;a3966d68-8e17-441f-9616-a3c4e06b9a7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;255b755c-f779-4514-a41d-3f689b477ae6&quot;,&quot;c65b06f2-046f-4a71-ba7f-409156f3f6c2&quot;,&quot;577f9b65-3995-4a24-b835-a3ddc98a6027&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:446,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;63597efa-3973-4e90-84bf-133584bd79a2&quot;,&quot;title&quot;:&quot;/POST To new Conversation&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\conversations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\conversations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;error in params&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_USER *********** /POST To new Conversation error in params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:169,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const messagePost = {\n  message: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/messages/false`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(messagePost)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.a(&#x27;object&#x27;)\n    // res.body.should.include.property(&#x27;errors&#x27;).eql({ msg: &#x27;BODY_INCOMPLETE&#x27; })\n    createdID.push(res.body.idConversation)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4c7740c-0569-487a-a99f-b6b9f1b5c360&quot;,&quot;parentUUID&quot;:&quot;63597efa-3973-4e90-84bf-133584bd79a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST to with hash&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_USER *********** /POST To new Conversation it should POST to with hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:265,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const messagePost = {\n  message: faker.random.words(),\n  to: toUser1\n}\nchai\n  .request(server)\n  .post(`${url}/messages/${existHash}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(messagePost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(201)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;hash&#x27;)\n    body.should.include.property(&#x27;hash&#x27;).eql(existHash)\n    body._id.should.be.a(&#x27;string&#x27;)\n    body.members.should.be.a(&#x27;array&#x27;)\n    body.type.should.be.a(&#x27;string&#x27;)\n    body.hash.should.be.a(&#x27;string&#x27;)\n    body.createdAt.should.be.a(&#x27;string&#x27;)\n    body.updatedAt.should.be.a(&#x27;string&#x27;)\n    body.messages.should.be.a(&#x27;array&#x27;)\n    const lastMessage = _.last(body.messages)\n    lastMessage.should.have.property(&#x27;message&#x27;).eql(messagePost.message)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a149b839-1d71-4bc5-a091-85b6498c1d19&quot;,&quot;parentUUID&quot;:&quot;63597efa-3973-4e90-84bf-133584bd79a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;new Conversation&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_USER *********** /POST To new Conversation new Conversation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:347,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const messagePost = {\n  message: faker.random.words(),\n  to: toUser2\n}\nchai\n  .request(server)\n  .post(`${url}/messages`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(messagePost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(201)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;hash&#x27;)\n    body._id.should.be.a(&#x27;string&#x27;)\n    body.members.should.be.a(&#x27;array&#x27;)\n    body.type.should.be.a(&#x27;string&#x27;)\n    body.hash.should.be.a(&#x27;string&#x27;)\n    body.createdAt.should.be.a(&#x27;string&#x27;)\n    body.updatedAt.should.be.a(&#x27;string&#x27;)\n    body.messages.should.be.a(&#x27;array&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;259efb0e-56a4-4f8e-8d89-0b0a8283df34&quot;,&quot;parentUUID&quot;:&quot;63597efa-3973-4e90-84bf-133584bd79a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e4c7740c-0569-487a-a99f-b6b9f1b5c360&quot;,&quot;a149b839-1d71-4bc5-a091-85b6498c1d19&quot;,&quot;259efb0e-56a4-4f8e-8d89-0b0a8283df34&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:781,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;d7f25d24-941a-4a28-b099-46740c7b3414&quot;,&quot;title&quot;:&quot;/GET/:id conversations&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\conversations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\conversations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET conversations by hash&quot;,&quot;fullTitle&quot;:&quot;*********** CONVERSATIONS_USER *********** /GET/:id conversations it should GET conversations by hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:172,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/conversations/${existHash}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.have.property(&#x27;hash&#x27;).eql(existHash)\n    body._id.should.be.a(&#x27;string&#x27;)\n    body.members.should.be.a(&#x27;array&#x27;)\n    body.type.should.be.a(&#x27;string&#x27;)\n    body.hash.should.be.a(&#x27;string&#x27;)\n    body.createdAt.should.be.a(&#x27;string&#x27;)\n    body.updatedAt.should.be.a(&#x27;string&#x27;)\n    body.messages.should.be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb509e01-e0fb-44f4-9212-29c521d7c50f&quot;,&quot;parentUUID&quot;:&quot;d7f25d24-941a-4a28-b099-46740c7b3414&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb509e01-e0fb-44f4-9212-29c521d7c50f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:172,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;442c713c-90cd-4d4e-9d92-7d7c580a6594&quot;,&quot;title&quot;:&quot;*********** EXTERNAL_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\external.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\external.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e155f1c4-5f0a-4862-b56c-653e565ac482&quot;,&quot;title&quot;:&quot;/GET blog&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\external.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\external.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the blogg&quot;,&quot;fullTitle&quot;:&quot;*********** EXTERNAL_USERS *********** /GET blog it should GET all the blogg&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:367,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/external/blog`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(404)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;).eql({})\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43407da5-898f-439d-9861-3151d569b269&quot;,&quot;parentUUID&quot;:&quot;e155f1c4-5f0a-4862-b56c-653e565ac482&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;43407da5-898f-439d-9861-3151d569b269&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:367,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;39bd70f7-8248-4f28-819f-7df6ce4b6f2e&quot;,&quot;title&quot;:&quot;*********** HOOKS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\hooks.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\hooks.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** HOOKS ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** HOOKS *********** \&quot;after all\&quot; hook in \&quot;*********** HOOKS ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  hook.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7bdaa0c4-ee72-4c6a-ae26-cc13ac537008&quot;,&quot;parentUUID&quot;:&quot;39bd70f7-8248-4f28-819f-7df6ce4b6f2e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2b75b21c-506b-4336-a1fb-45d33c8be72b&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\hooks.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\hooks.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** HOOKS *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:259,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d3cec24-faa8-451c-b8f3-751ad2b42df1&quot;,&quot;parentUUID&quot;:&quot;2b75b21c-506b-4336-a1fb-45d33c8be72b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** HOOKS *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:342,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4c24952-38d7-4ed8-872f-7d345fbc4f08&quot;,&quot;parentUUID&quot;:&quot;2b75b21c-506b-4336-a1fb-45d33c8be72b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4d3cec24-faa8-451c-b8f3-751ad2b42df1&quot;,&quot;e4c24952-38d7-4ed8-872f-7d345fbc4f08&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:601,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;d0259093-d11d-408f-9598-0380c4ac79f2&quot;,&quot;title&quot;:&quot;/POST hook&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\hooks.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\hooks.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a hook without hook&quot;,&quot;fullTitle&quot;:&quot;*********** HOOKS *********** /POST hook it should NOT POST a hook without hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const hookPostOne = {}\nchai\n  .request(server)\n  .post(`${url}/hook/subscriber`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .set(&#x27;app_id&#x27;, &#x27;1&#x27;)\n  .set(&#x27;app_secret&#x27;, &#x27;2&#x27;)\n  .send(hookPostOne)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a58c779-0f3e-4ae9-bc10-d0a6d4b1ce98&quot;,&quot;parentUUID&quot;:&quot;d0259093-d11d-408f-9598-0380c4ac79f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it unauthorized POST a hook &quot;,&quot;fullTitle&quot;:&quot;*********** HOOKS *********** /POST hook it unauthorized POST a hook &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const hookPostTwo = {\n  target_url\n}\nchai\n  .request(server)\n  .post(`${url}/hook/subscriber`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .set(&#x27;app_id&#x27;, &#x27;error&#x27;)\n  .set(&#x27;app_secret&#x27;, &#x27;error&#x27;)\n  .send(hookPostTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ff63ab6-82f1-49d7-9a11-90b34cf8f060&quot;,&quot;parentUUID&quot;:&quot;d0259093-d11d-408f-9598-0380c4ac79f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a hook &quot;,&quot;fullTitle&quot;:&quot;*********** HOOKS *********** /POST hook it should POST a hook &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:187,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const hookPostTwo = {\n  target_url,\n  action_trigger\n}\nchai\n  .request(server)\n  .post(`${url}/hook/subscriber`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .set(&#x27;app_id&#x27;, &#x27;1&#x27;)\n  .set(&#x27;app_secret&#x27;, &#x27;2&#x27;)\n  .send(hookPostTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;url&#x27;, &#x27;trigger&#x27;)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be9ba947-4ed4-4c9b-96fc-e24800c858f7&quot;,&quot;parentUUID&quot;:&quot;d0259093-d11d-408f-9598-0380c4ac79f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5a58c779-0f3e-4ae9-bc10-d0a6d4b1ce98&quot;,&quot;2ff63ab6-82f1-49d7-9a11-90b34cf8f060&quot;,&quot;be9ba947-4ed4-4c9b-96fc-e24800c858f7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:362,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;68260258-7c24-4d6f-8660-610c4e4d8e69&quot;,&quot;title&quot;:&quot;/DELETE/:id hook&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\hooks.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\hooks.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a hook given the id&quot;,&quot;fullTitle&quot;:&quot;*********** HOOKS *********** /DELETE/:id hook it should DELETE a hook given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:402,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const hookdelete = {\n  target_url,\n  action_trigger\n}\nchai\n  .request(server)\n  .post(`${url}/hook/subscriber`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .set(&#x27;app_id&#x27;, &#x27;1&#x27;)\n  .set(&#x27;app_secret&#x27;, &#x27;2&#x27;)\n  .send(hookdelete)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;url&#x27;, &#x27;trigger&#x27;)\n    chai\n      .request(server)\n      .delete(`${url}/hook/unsubscriber`)\n      .set(&#x27;app_id&#x27;, &#x27;1&#x27;)\n      .set(&#x27;app_secret&#x27;, &#x27;2&#x27;)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .send(hookdelete)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(201)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.have.property(&#x27;DELETED&#x27;).eql(&#x27;SUCCESS&#x27;)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b66adb7-7635-4732-907d-5f81dfd5de20&quot;,&quot;parentUUID&quot;:&quot;68260258-7c24-4d6f-8660-610c4e4d8e69&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b66adb7-7635-4732-907d-5f81dfd5de20&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:402,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;194c9f8a-a982-484e-bb74-e7696cd973ab&quot;,&quot;title&quot;:&quot;*********** PAY_ORDERS_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\payOrders.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\payOrders.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** PAY_ORDERS_USERS ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_USERS *********** \&quot;after all\&quot; hook in \&quot;*********** PAY_ORDERS_USERS ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;orders.deleteMany({}, (err) =&gt; {\n  if (err) {\n    console.log(err.message)\n  }\n})\ncreatedIDReservation.forEach((id) =&gt; {\n  reservations.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      console.log(err.message)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58014b95-5460-4ace-aed7-1557db3a32a9&quot;,&quot;parentUUID&quot;:&quot;194c9f8a-a982-484e-bb74-e7696cd973ab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c4f4b13f-4bab-45a9-b67a-224d9c36b499&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\payOrders.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\payOrders.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_USERS *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:261,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e73bcb1-9c8b-4141-8cba-16f7adb50a37&quot;,&quot;parentUUID&quot;:&quot;c4f4b13f-4bab-45a9-b67a-224d9c36b499&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_USERS *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:337,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e0ed12b-280c-42d6-adb4-5db2b282bbe4&quot;,&quot;parentUUID&quot;:&quot;c4f4b13f-4bab-45a9-b67a-224d9c36b499&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6e73bcb1-9c8b-4141-8cba-16f7adb50a37&quot;,&quot;6e0ed12b-280c-42d6-adb4-5db2b282bbe4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:598,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;3bfa827e-a8ee-47bf-a3ff-4470e97d849f&quot;,&quot;title&quot;:&quot;/POST reservations&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\payOrders.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\payOrders.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should POST a contracts 100 percentage&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_USERS *********** /POST reservations it should POST a contracts 100 percentage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:514,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/contracts`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(contractData)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    idIntention = body._id\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;percentage&#x27;).eql(contractData.payAmount)\n    body.should.have.property(&#x27;idOperation&#x27;).eql(contractData.id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f96b8a48-629e-4a27-99a9-4613364661b1&quot;,&quot;parentUUID&quot;:&quot;3bfa827e-a8ee-47bf-a3ff-4470e97d849f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a reservations &quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_USERS *********** /POST reservations it should POST a reservations &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:960,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fackEmail = &#x27;pepito@gmail.com&#x27;\nconst reservationsPost = {\n  travelerFirstName: faker.random.words(),\n  travelerLastName: faker.random.words(),\n  travelerEmail: fackEmail,\n  travelerPhone: {\n    number: &#x27;+57 314 3605160&#x27;,\n    code: &#x27;CO&#x27;\n  },\n  travelerDocument: faker.random.word(),\n  travelerAddress: faker.random.word(),\n  travelerBirthDay: &#x27;02-10-2020&#x27;,\n  travelerGender: &#x27;M&#x27;,\n  country: faker.random.word(),\n  city: faker.random.word(),\n  idIntention\n}\nchai\n  .request(server)\n  .post(`${url}/reservations`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(reservationsPost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(201)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;amount&#x27;, &#x27;status&#x27;, &#x27;code&#x27;)\n    body.should.have.property(&#x27;amount&#x27;).to.be.a(&#x27;Number&#x27;)\n    body.should.have.property(&#x27;amount&#x27;).eql(980.1)\n    body.should.have.property(&#x27;status&#x27;).eql(&#x27;pending&#x27;)\n    body.should.have.property(&#x27;travelerEmail&#x27;).eql(fackEmail)\n    idReservation = body._id\n    amountReservation = body.amount\n    createdReservation.push(body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8740f61a-bce4-4dd2-befb-45d0fb534cba&quot;,&quot;parentUUID&quot;:&quot;3bfa827e-a8ee-47bf-a3ff-4470e97d849f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f96b8a48-629e-4a27-99a9-4613364661b1&quot;,&quot;8740f61a-bce4-4dd2-befb-45d0fb534cba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1474,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;4456ac30-8bc9-473b-a1b1-cecc0cc38f63&quot;,&quot;title&quot;:&quot;/POST payment&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\payOrders.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\payOrders.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST payment reservation with wallet&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_USERS *********** /POST payment it should NOT POST payment reservation with wallet&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:252,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPost = {\n  idReservation,\n  amount: 500\n}\nchai\n  .request(server)\n  .post(`${url}/payorders`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).eql(&#x27;Amount Error&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7373abe-75f6-4ffe-88c7-67b98ef1d918&quot;,&quot;parentUUID&quot;:&quot;4456ac30-8bc9-473b-a1b1-cecc0cc38f63&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST to save money in wallet 10000&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_USERS *********** /POST payment it should POST to save money in wallet 10000&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3479,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPost = {\n  token: TokenCard,\n  amount: price,\n  pk\n}\nchai\n  .request(server)\n  .post(`${url}/stripe`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPost)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;id&#x27;, &#x27;client_secret&#x27;)\n    const customData = res.body\n    chai\n      .request(server)\n      .patch(`${url}/payorders/${res.body.id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .send(customData)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.include.keys(&#x27;_id&#x27;, &#x27;idOperation&#x27;)\n        body.should.have.property(&#x27;status&#x27;).eql(&#x27;succeeded&#x27;)\n        body.should.have.property(&#x27;idOperation&#x27;).eql(res.body.id)\n        body.should.have.property(&#x27;amount&#x27;).to.be.a(&#x27;Number&#x27;)\n        body.should.have.property(&#x27;amount&#x27;).eql(price)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05bdce90-08b3-453f-b159-120550c464e5&quot;,&quot;parentUUID&quot;:&quot;4456ac30-8bc9-473b-a1b1-cecc0cc38f63&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET Total in wallet&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_USERS *********** /POST payment it should GET Total in wallet&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:256,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/wallets`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    const { total } = body\n    body.should.be.a(&#x27;object&#x27;)\n    body.totalDocs.should.be.a(&#x27;number&#x27;)\n    body.should.include.keys(&#x27;total&#x27;, &#x27;docs&#x27;)\n    total.should.be.a(&#x27;number&#x27;).eql(10000)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37a082cb-d1b4-4c7f-9d30-57a3aba02dfd&quot;,&quot;parentUUID&quot;:&quot;4456ac30-8bc9-473b-a1b1-cecc0cc38f63&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST payment with wallet&quot;,&quot;fullTitle&quot;:&quot;*********** PAY_ORDERS_USERS *********** /POST payment it should POST payment with wallet&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2740,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPost = {\n  idReservation,\n  amount: amountReservation\n}\nchai\n  .request(server)\n  .post(`${url}/payorders`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(201)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;amount&#x27;).eql(amountReservation)\n    body.should.have.property(&#x27;status&#x27;).eql(&#x27;succeeded&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2783b5c-a052-4897-a477-d09903cd41de&quot;,&quot;parentUUID&quot;:&quot;4456ac30-8bc9-473b-a1b1-cecc0cc38f63&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a7373abe-75f6-4ffe-88c7-67b98ef1d918&quot;,&quot;05bdce90-08b3-453f-b159-120550c464e5&quot;,&quot;37a082cb-d1b4-4c7f-9d30-57a3aba02dfd&quot;,&quot;a2783b5c-a052-4897-a477-d09903cd41de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6727,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;85b68252-95d2-467c-9fad-d1a16820cbb6&quot;,&quot;title&quot;:&quot;*********** HOTELS_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\pluginHotel.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\pluginHotel.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c36f392e-3fc7-4e7b-82d9-8e33a9945fe4&quot;,&quot;title&quot;:&quot;/POST hotels For type&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\pluginHotel.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\pluginHotel.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should not get Hotels For type, error in params because empty&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels For type it should not get Hotels For type, error in params because empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForType = {}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_hotels_selections&#x27;\n  )\n  .send(paramsForType)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80d9cf2a-46fb-4b8f-b14e-18711c78ceb2&quot;,&quot;parentUUID&quot;:&quot;c36f392e-3fc7-4e7b-82d9-8e33a9945fe4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not get Hotels For type, error in params, property is missing&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels For type it should not get Hotels For type, error in params, property is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForType = {\n  params: {\n    check_out: &#x27;2021-08-03&#x27;,\n    language: &#x27;es&#x27;,\n    type: &#x27;populary&#x27;,\n    limit: &#x27;5&#x27;,\n    id: &#x27;6230&#x27; // id city\n  }\n}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_hotels_selections&#x27;\n  )\n  .send(paramsForType)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;errors&#x27;)\n    res.body.should.have.property(&#x27;errors&#x27;).eql({\n      msg: &#x27;Param check_in is required&#x27;\n    })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5681d63-0bd8-47f6-8567-55e364a9e4e3&quot;,&quot;parentUUID&quot;:&quot;c36f392e-3fc7-4e7b-82d9-8e33a9945fe4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get Hotels For type&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels For type it should get Hotels For type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:511,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForType = {\n  params: {\n    check_in: &#x27;2021-08-01&#x27;,\n    check_out: &#x27;2021-08-03&#x27;,\n    language: &#x27;es&#x27;,\n    type: &#x27;populary&#x27;,\n    limit: &#x27;5&#x27;,\n    id: &#x27;6230&#x27; // id city\n  }\n}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_hotels_selections&#x27;\n  )\n  .send(paramsForType)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;populary&#x27;)\n    res.body.populary.should.be.an(&#x27;Array&#x27;)\n    res.body.populary.should.have.lengthOf(5)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c55f4cc-f0ac-4149-8494-2b82e6507852&quot;,&quot;parentUUID&quot;:&quot;c36f392e-3fc7-4e7b-82d9-8e33a9945fe4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;80d9cf2a-46fb-4b8f-b14e-18711c78ceb2&quot;,&quot;d5681d63-0bd8-47f6-8567-55e364a9e4e3&quot;,&quot;5c55f4cc-f0ac-4149-8494-2b82e6507852&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:685,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;44fe7783-5874-4c1a-82e8-79e05fb338c6&quot;,&quot;title&quot;:&quot;/POST hotels For PRICE&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\pluginHotel.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\pluginHotel.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should not get Hotels For PRICE, error in params because empty&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels For PRICE it should not get Hotels For PRICE, error in params because empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_cost_in_hotels&#x27;\n  )\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b855dccd-7c37-4364-a774-93aa5e1bcd60&quot;,&quot;parentUUID&quot;:&quot;44fe7783-5874-4c1a-82e8-79e05fb338c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not get Hotels For PRICE, error in params, property is missing&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels For PRICE it should not get Hotels For PRICE, error in params, property is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:85,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {\n  params: {\n    locationId,\n    checkOut: &#x27;2020-10-15&#x27;,\n    limit: &#x27;1000&#x27;\n  }\n}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_cost_in_hotels&#x27;\n  )\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;errors&#x27;)\n    res.body.should.have.property(&#x27;errors&#x27;).eql({\n      msg: &#x27;Param checkIn is required&#x27;\n    })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ec85db9-42da-4461-aafb-913cf2a6fd62&quot;,&quot;parentUUID&quot;:&quot;44fe7783-5874-4c1a-82e8-79e05fb338c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not get Hotels For PRICE, error in Dates&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels For PRICE it should not get Hotels For PRICE, error in Dates&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:610,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {\n  params: {\n    locationId,\n    checkIn: &#x27;2020-10-01&#x27;,\n    checkOut: &#x27;2020-10-15&#x27;,\n    limit: &#x27;10&#x27;\n  }\n}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_cost_in_hotels&#x27;\n  )\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;Array&#x27;)\n    res.body.should.have.lengthOf(0)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6b895d4-1a01-4ddf-aa3d-b6b57e1cb30a&quot;,&quot;parentUUID&quot;:&quot;44fe7783-5874-4c1a-82e8-79e05fb338c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get Hotels For PRICE&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels For PRICE it should get Hotels For PRICE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:525,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {\n  params: {\n    locationId,\n    checkIn: &#x27;2021-10-01&#x27;,\n    checkOut: &#x27;2021-10-15&#x27;,\n    limit: &#x27;10&#x27;\n  }\n}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_cost_in_hotels&#x27;\n  )\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;Array&#x27;)\n    res.body.should.have.lengthOf(10)\n    _.map(res.body, (a, b) =&gt; {\n      res.body[b].should.include.keys(&#x27;location&#x27;, &#x27;pricePercentile&#x27;)\n    })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44b4ada4-881e-41d0-8f5b-af447afc5b3b&quot;,&quot;parentUUID&quot;:&quot;44fe7783-5874-4c1a-82e8-79e05fb338c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b855dccd-7c37-4364-a774-93aa5e1bcd60&quot;,&quot;4ec85db9-42da-4461-aafb-913cf2a6fd62&quot;,&quot;d6b895d4-1a01-4ddf-aa3d-b6b57e1cb30a&quot;,&quot;44b4ada4-881e-41d0-8f5b-af447afc5b3b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1309,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;a05e92b9-510b-4125-a847-6db31a00334d&quot;,&quot;title&quot;:&quot;/POST hotels ALL HOTELS&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\pluginHotel.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\pluginHotel.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should not get all Hotels, error in params because empty&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels ALL HOTELS it should not get all Hotels, error in params because empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_search_management&#x27;\n  )\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51687750-76a9-4489-b458-8962a6987425&quot;,&quot;parentUUID&quot;:&quot;a05e92b9-510b-4125-a847-6db31a00334d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not get all Hotels, error in params, property is missing&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels ALL HOTELS it should not get all Hotels, error in params, property is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {\n  params: {\n    sortBy: &#x27;popularity&#x27;,\n    checkIn: &#x27;2020-11-07&#x27;,\n    checkOut: &#x27;2020-11-16&#x27;,\n    adultsCount: 2,\n    childrenCount: 0\n  }\n}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_search_management&#x27;\n  )\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;errors&#x27;)\n    res.body.should.have.property(&#x27;errors&#x27;).eql({\n      msg: &#x27;Param cityId or hotelId or iata is required&#x27;\n    })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c989749-6d76-4472-898e-633998a990a4&quot;,&quot;parentUUID&quot;:&quot;a05e92b9-510b-4125-a847-6db31a00334d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not get all Hotels, error in Dates&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels ALL HOTELS it should not get all Hotels, error in Dates&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:441,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {\n  params: {\n    sortBy: &#x27;popularity&#x27;,\n    cityId: &#x27;6258&#x27;,\n    checkIn: &#x27;2019-11-07&#x27;,\n    checkOut: &#x27;2019-11-16&#x27;,\n    adultsCount: 2,\n    childrenCount: 0\n  }\n}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_search_management&#x27;\n  )\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.an(&#x27;Object&#x27;)\n    res.body.should.include.keys(&#x27;errors&#x27;)\n    res.body.should.have.property(&#x27;errors&#x27;).eql({\n      msg: &#x27;ERROR_WITH_HOTEL_API&#x27;\n    })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d23ac58-3527-441a-9ca5-3c06a344455d&quot;,&quot;parentUUID&quot;:&quot;a05e92b9-510b-4125-a847-6db31a00334d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get all Hotels&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels ALL HOTELS it should get all Hotels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:423,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {\n  params: {\n    sortBy: &#x27;popularity&#x27;,\n    cityId: &#x27;6258&#x27;,\n    checkIn: &#x27;2021-11-07&#x27;,\n    checkOut: &#x27;2021-11-16&#x27;,\n    adultsCount: 2,\n    childrenCount: 0\n  }\n}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_search_management&#x27;\n  )\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.an(&#x27;Object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;).be.an(&#x27;object&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).eql(&#x27;ERROR_WITH_HOTEL_API&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac53e9a5-1fa9-4a82-a7eb-850af90e0d52&quot;,&quot;parentUUID&quot;:&quot;a05e92b9-510b-4125-a847-6db31a00334d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51687750-76a9-4489-b458-8962a6987425&quot;,&quot;8c989749-6d76-4472-898e-633998a990a4&quot;,&quot;3d23ac58-3527-441a-9ca5-3c06a344455d&quot;,&quot;ac53e9a5-1fa9-4a82-a7eb-850af90e0d52&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1038,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;2f1ede15-1928-40f2-9b8d-e7b73d4263a2&quot;,&quot;title&quot;:&quot;/POST hotels SEARCH PLACES&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\pluginHotel.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\pluginHotel.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should not search PLACES, error in params because empty&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels SEARCH PLACES it should not search PLACES, error in params because empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {\n  params: {\n    query: &#x27;&#x27;\n  }\n}\nchai\n  .request(server)\n  .post(&#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/search_place&#x27;)\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;errors&#x27;)\n    res.body.should.have\n      .property(&#x27;errors&#x27;)\n      .eql({ msg: &#x27;Param query is required&#x27; })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d221ff0-45b8-4bc0-9f96-92291aa86bb9&quot;,&quot;parentUUID&quot;:&quot;2f1ede15-1928-40f2-9b8d-e7b73d4263a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not search PLACES, search is empty&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels SEARCH PLACES it should not search PLACES, search is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:561,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {\n  params: {\n    query: &#x27;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#x27;\n  }\n}\nchai\n  .request(server)\n  .post(&#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/search_place&#x27;)\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;Array&#x27;)\n    res.body.should.have.lengthOf(0)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd35dc95-bd21-42b5-997b-c6c1b06ba284&quot;,&quot;parentUUID&quot;:&quot;2f1ede15-1928-40f2-9b8d-e7b73d4263a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should search PLACES&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels SEARCH PLACES it should search PLACES&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:553,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {\n  params: {\n    query: &#x27;medellin&#x27;\n  }\n}\nchai\n  .request(server)\n  .post(&#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/search_place&#x27;)\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;Array&#x27;)\n    res.body.should.have.lengthOf(5)\n    res.body[0].should.include.keys(&#x27;cityName&#x27;, &#x27;location&#x27;, &#x27;countryName&#x27;)\n    res.body[0].should.have.property(&#x27;cityName&#x27;).eql(&#x27;Medellin&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;209071ba-06d7-474d-9737-879c4a94d3b6&quot;,&quot;parentUUID&quot;:&quot;2f1ede15-1928-40f2-9b8d-e7b73d4263a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9d221ff0-45b8-4bc0-9f96-92291aa86bb9&quot;,&quot;fd35dc95-bd21-42b5-997b-c6c1b06ba284&quot;,&quot;209071ba-06d7-474d-9737-879c4a94d3b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1200,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;67f07789-b1be-496c-a274-07cc97103013&quot;,&quot;title&quot;:&quot;/POST hotels COLLECTIONS TYPES&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\pluginHotel.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\pluginHotel.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should not get collection types, error in id params &quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels COLLECTIONS TYPES it should not get collection types, error in id params &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:91,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {\n  params: {\n    id: &#x27;&#x27;\n  }\n}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_types_hotel_collections&#x27;\n  )\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;errors&#x27;)\n    res.body.should.have\n      .property(&#x27;errors&#x27;)\n      .eql({ msg: &#x27;Param id is required&#x27; })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7990589c-ff31-46e9-922f-d16fe05dbc8b&quot;,&quot;parentUUID&quot;:&quot;67f07789-b1be-496c-a274-07cc97103013&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not get collection types, error in params because empty&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels COLLECTIONS TYPES it should not get collection types, error in params because empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_types_hotel_collections&#x27;\n  )\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;625d1eb1-e092-49b6-a2ba-f44e5a6d0549&quot;,&quot;parentUUID&quot;:&quot;67f07789-b1be-496c-a274-07cc97103013&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get collection&quot;,&quot;fullTitle&quot;:&quot;*********** HOTELS_USERS *********** /POST hotels COLLECTIONS TYPES it should get collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:525,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const paramsForHotel = {\n  params: {\n    id: 3683\n  }\n}\nchai\n  .request(server)\n  .post(\n    &#x27;/api/1.0/plugins/travelpayouts-api-hotels/events/get_types_hotel_collections&#x27;\n  )\n  .send(paramsForHotel)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;Array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09ce1ef1-0b52-4657-8baa-95a45dbeaaba&quot;,&quot;parentUUID&quot;:&quot;67f07789-b1be-496c-a274-07cc97103013&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7990589c-ff31-46e9-922f-d16fe05dbc8b&quot;,&quot;625d1eb1-e092-49b6-a2ba-f44e5a6d0549&quot;,&quot;09ce1ef1-0b52-4657-8baa-95a45dbeaaba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:705,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;b2189c29-ec33-482f-92f3-66278074276c&quot;,&quot;title&quot;:&quot;*********** PROFILE_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\profile.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\profile.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c249076e-69f3-4a28-8d2f-5543d9ba274b&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\profile.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\profile.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** PROFILE_USERS *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:269,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;706d602d-c06c-4b83-b92c-a8a879080d5a&quot;,&quot;parentUUID&quot;:&quot;c249076e-69f3-4a28-8d2f-5543d9ba274b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** PROFILE_USERS *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:354,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0097a950-5df1-4536-8b75-6adafd11fb6b&quot;,&quot;parentUUID&quot;:&quot;c249076e-69f3-4a28-8d2f-5543d9ba274b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;706d602d-c06c-4b83-b92c-a8a879080d5a&quot;,&quot;0097a950-5df1-4536-8b75-6adafd11fb6b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:623,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;1a3d7051-f3f0-40f5-81d3-e18c2741c731&quot;,&quot;title&quot;:&quot;/GET profile&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\profile.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\profile.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** PROFILE_USERS *********** /GET profile it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/profile`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82e7e2d3-3308-4c98-b8dd-a3f5f5e9f322&quot;,&quot;parentUUID&quot;:&quot;1a3d7051-f3f0-40f5-81d3-e18c2741c731&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET profile&quot;,&quot;fullTitle&quot;:&quot;*********** PROFILE_USERS *********** /GET profile it should GET profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:176,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/profile`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;name&#x27;, &#x27;email&#x27;)\n    body.should.have.property(&#x27;role&#x27;).eql(&#x27;admin&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;395b17c9-8b3d-46ec-b148-744ec0e77dac&quot;,&quot;parentUUID&quot;:&quot;1a3d7051-f3f0-40f5-81d3-e18c2741c731&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET reffered&quot;,&quot;fullTitle&quot;:&quot;*********** PROFILE_USERS *********** /GET profile it should GET reffered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:274,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/profile/referred`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f6d2e69-8800-4b69-8882-797835837997&quot;,&quot;parentUUID&quot;:&quot;1a3d7051-f3f0-40f5-81d3-e18c2741c731&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;82e7e2d3-3308-4c98-b8dd-a3f5f5e9f322&quot;,&quot;395b17c9-8b3d-46ec-b148-744ec0e77dac&quot;,&quot;4f6d2e69-8800-4b69-8882-797835837997&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:452,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;fc395a86-6ef3-409a-ae2f-bf3ab9de11e1&quot;,&quot;title&quot;:&quot;/PATCH profile&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\profile.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\profile.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE profile&quot;,&quot;fullTitle&quot;:&quot;*********** PROFILE_USERS *********** /PATCH profile it should UPDATE profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:178,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  name: &#x27;Test123456&#x27;,\n  surname: &#x27;Test123456&#x27;,\n  avatar: &#x27;https://hello.com&#x27;,\n  video: &#x27;https://hello.io&#x27;,\n  birthDate: &#x27;02-10-2010&#x27;,\n  country: &#x27;Colombia&#x27;\n}\nchai\n  .request(server)\n  .patch(`${url}/profile`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(user)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;name&#x27;).eql(&#x27;Test123456&#x27;)\n    body.should.have.property(&#x27;surname&#x27;).eql(&#x27;Test123456&#x27;)\n    body.should.have.property(&#x27;video&#x27;).eql(&#x27;https://hello.io&#x27;)\n    body.should.have.property(&#x27;country&#x27;).eql(&#x27;Colombia&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f182ff7b-1c5b-450e-94ae-44b45bbfba35&quot;,&quot;parentUUID&quot;:&quot;fc395a86-6ef3-409a-ae2f-bf3ab9de11e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT UPDATE profile with email that already exists&quot;,&quot;fullTitle&quot;:&quot;*********** PROFILE_USERS *********** /PATCH profile it should NOT UPDATE profile with email that already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:179,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  email: &#x27;user@user.com&#x27;\n}\nchai\n  .request(server)\n  .patch(`${url}/profile`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(user)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b864e724-3c67-4f3e-be61-2633019542fd&quot;,&quot;parentUUID&quot;:&quot;fc395a86-6ef3-409a-ae2f-bf3ab9de11e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT UPDATE profile with not valid URLs&quot;,&quot;fullTitle&quot;:&quot;*********** PROFILE_USERS *********** /PATCH profile it should NOT UPDATE profile with not valid URLs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  name: &#x27;Test123456&#x27;,\n  urlTwitter: &#x27;hello&#x27;,\n  urlGitHub: &#x27;hello&#x27;,\n  city: &#x27;Bucaramanga&#x27;,\n  country: &#x27;Colombia&#x27;\n}\nchai\n  .request(server)\n  .patch(`${url}/profile`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(user)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;).that.has.property(&#x27;msg&#x27;)\n    body.errors.msg[0].should.have\n      .property(&#x27;msg&#x27;)\n      .eql(&#x27;NOT_A_VALID_URL&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2fd77ff-55db-4eb8-82a1-46c065390fae&quot;,&quot;parentUUID&quot;:&quot;fc395a86-6ef3-409a-ae2f-bf3ab9de11e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f182ff7b-1c5b-450e-94ae-44b45bbfba35&quot;,&quot;b864e724-3c67-4f3e-be61-2633019542fd&quot;,&quot;e2fd77ff-55db-4eb8-82a1-46c065390fae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:443,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;88bf26a0-70d4-4f76-8f9c-0f205c3bf23a&quot;,&quot;title&quot;:&quot;/POST profile/changePassword&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\profile.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\profile.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT change password&quot;,&quot;fullTitle&quot;:&quot;*********** PROFILE_USERS *********** /POST profile/changePassword it should NOT change password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:265,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = {\n  old: &#x27;123456&#x27;,\n  newpass: &#x27;123456&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/profile/changePassword`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(data)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    const { body } = res\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;).be.a(&#x27;object&#x27;)\n    const { msg } = body.errors\n    msg.should.have.property(&#x27;msg&#x27;).eql(&#x27;WRONG_PASSWORD&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d9d2df0-865f-4fa7-9dcd-5aefe27e0177&quot;,&quot;parentUUID&quot;:&quot;88bf26a0-70d4-4f76-8f9c-0f205c3bf23a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT change a too short password&quot;,&quot;fullTitle&quot;:&quot;*********** PROFILE_USERS *********** /POST profile/changePassword it should NOT change a too short password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = {\n  old: &#x27;1234&#x27;,\n  newpass: &#x27;1234&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/profile/changePassword`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(data)\n  .end((err, res) =&gt; {\n    res.should.have.status(422)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;errors&#x27;).that.has.property(&#x27;msg&#x27;)\n    res.body.errors.msg[0].should.have\n      .property(&#x27;msg&#x27;)\n      .eql(&#x27;PASSWORD_TOO_SHORT_MIN_5&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;135c12f8-ef8f-4ccd-b896-b1a8b504ee66&quot;,&quot;parentUUID&quot;:&quot;88bf26a0-70d4-4f76-8f9c-0f205c3bf23a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should change password&quot;,&quot;fullTitle&quot;:&quot;*********** PROFILE_USERS *********** /POST profile/changePassword it should change password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:346,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = {\n  old: loginDetails.password,\n  newass: &#x27;12345678&#x27;\n}\nchai\n  .request(server)\n  .post(`${url}/profile/changePassword`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(data)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;msg&#x27;).eql(&#x27;PASSWORD_CHANGED&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b47d1c3c-2431-4162-b318-14246e26b08c&quot;,&quot;parentUUID&quot;:&quot;88bf26a0-70d4-4f76-8f9c-0f205c3bf23a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4d9d2df0-865f-4fa7-9dcd-5aefe27e0177&quot;,&quot;135c12f8-ef8f-4ccd-b896-b1a8b504ee66&quot;,&quot;b47d1c3c-2431-4162-b318-14246e26b08c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:700,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;cd3dfb5d-20b1-4d52-a2a7-cf3435d98ae9&quot;,&quot;title&quot;:&quot;*********** QUESTIONS_USER ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\questions.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** QUESTIONS_USER ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_USER *********** \&quot;after all\&quot; hook in \&quot;*********** QUESTIONS_USER ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((idquestion) =&gt; {\n  modalquestion.findByIdAndRemove(idquestion, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77dc3c76-6938-4626-a475-f3c48b89af35&quot;,&quot;parentUUID&quot;:&quot;cd3dfb5d-20b1-4d52-a2a7-cf3435d98ae9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;95f6002f-a9f7-41d5-a866-228c133dbb54&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\questions.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_USER *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:263,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34be4940-b3db-436c-9ced-c43a6c5b27bd&quot;,&quot;parentUUID&quot;:&quot;95f6002f-a9f7-41d5-a866-228c133dbb54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_USER *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:529,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afd53ddd-67f8-40d4-ba8f-a809491c9faa&quot;,&quot;parentUUID&quot;:&quot;95f6002f-a9f7-41d5-a866-228c133dbb54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;34be4940-b3db-436c-9ced-c43a6c5b27bd&quot;,&quot;afd53ddd-67f8-40d4-ba8f-a809491c9faa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:792,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;2d9dbefb-f685-4ca2-b34b-1c3493e4bddb&quot;,&quot;title&quot;:&quot;/GET questions&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\questions.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the questions&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_USER *********** /GET questions it should GET all the questions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:91,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/questions`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    const { docs } = body\n    const question = _.head(docs)\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.have.lengthOf(4)\n    id = question._id\n    question.should.include.keys(&#x27;_id&#x27;, &#x27;status&#x27;, &#x27;title&#x27;, &#x27;question&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a331261a-2dba-474a-a0ef-19a326c8f9a2&quot;,&quot;parentUUID&quot;:&quot;2d9dbefb-f685-4ca2-b34b-1c3493e4bddb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT GET the questions with filters&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_USER *********** /GET questions it should NOT GET the questions with filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:83,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/questions?filter=noexiste&amp;fields=status`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    const { body } = res\n    const { docs, totalDocs } = body\n    totalDocs.should.be.a(&#x27;number&#x27;)\n    body.should.have.property(&#x27;totalDocs&#x27;).eql(0)\n    docs.should.have.lengthOf(0)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cf693e6-d56f-498a-bcfb-f5bbec8ee275&quot;,&quot;parentUUID&quot;:&quot;2d9dbefb-f685-4ca2-b34b-1c3493e4bddb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET the questions with filters&quot;,&quot;fullTitle&quot;:&quot;*********** QUESTIONS_USER *********** /GET questions it should GET the questions with filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/questions?filter=public&amp;fields=status`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    const { body } = res\n    const { docs } = body\n    const question = _.head(docs)\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.have.lengthOf(3)\n    question.should.include.keys(&#x27;_id&#x27;, &#x27;title&#x27;, &#x27;question&#x27;)\n    question.should.have.property(&#x27;status&#x27;).eql(&#x27;public&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95ff1783-e51d-4a37-bc36-26652620c98f&quot;,&quot;parentUUID&quot;:&quot;2d9dbefb-f685-4ca2-b34b-1c3493e4bddb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a331261a-2dba-474a-a0ef-19a326c8f9a2&quot;,&quot;2cf693e6-d56f-498a-bcfb-f5bbec8ee275&quot;,&quot;95ff1783-e51d-4a37-bc36-26652620c98f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:264,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;802e55ba-ebff-4030-8437-a4fb17ceaf3f&quot;,&quot;title&quot;:&quot;*********** REFERREDS_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\referreds.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\referreds.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4b1cd978-eb87-437a-a03c-34636e82ed89&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\referreds.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\referreds.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_USERS *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:261,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;361df5c7-e372-4417-9db1-145a0bf6ed84&quot;,&quot;parentUUID&quot;:&quot;4b1cd978-eb87-437a-a03c-34636e82ed89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_USERS *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:353,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea1d31e9-67b0-4819-9eb2-fc592ce66ae7&quot;,&quot;parentUUID&quot;:&quot;4b1cd978-eb87-437a-a03c-34636e82ed89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;361df5c7-e372-4417-9db1-145a0bf6ed84&quot;,&quot;ea1d31e9-67b0-4819-9eb2-fc592ce66ae7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:614,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;4e7b0b42-b191-4143-a905-9a0564fde8e3&quot;,&quot;title&quot;:&quot;/GET referreds&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\referreds.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\referreds.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the referreds&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_USERS *********** /GET referreds it should GET all the referreds&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:171,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/referreds`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    const {\n      docs,\n      totalDocs,\n      hasPrevPage,\n      hasNextPage\n    } = body\n    body.should.be.an(&#x27;object&#x27;)\n    docs.should.be.a(&#x27;array&#x27;)\n    docs.should.have.length(2)\n    hasNextPage.should.be.a(&#x27;boolean&#x27;)\n    hasPrevPage.should.be.a(&#x27;boolean&#x27;)\n    body.limit.should.be.a(&#x27;number&#x27;)\n    body.page.should.be.a(&#x27;number&#x27;)\n    totalDocs.should.be.a(&#x27;number&#x27;)\n    body.totalPages.should.be.a(&#x27;number&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ea0305b-5ae5-427f-b236-ddf88654195d&quot;,&quot;parentUUID&quot;:&quot;4e7b0b42-b191-4143-a905-9a0564fde8e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** REFERREDS_USERS *********** /GET referreds it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/referreds`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30962089-239a-42c6-ae57-73f411483bc2&quot;,&quot;parentUUID&quot;:&quot;4e7b0b42-b191-4143-a905-9a0564fde8e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ea0305b-5ae5-427f-b236-ddf88654195d&quot;,&quot;30962089-239a-42c6-ae57-73f411483bc2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:174,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;9d074490-abfd-4889-ab24-8a3e217c7417&quot;,&quot;title&quot;:&quot;*********** RESERVATIONS_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** RESERVATIONS_USERS ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** \&quot;after all\&quot; hook in \&quot;*********** RESERVATIONS_USERS ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  reservation.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f1ec41d-c2e6-45fc-8609-ba429efc4722&quot;,&quot;parentUUID&quot;:&quot;9d074490-abfd-4889-ab24-8a3e217c7417&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;464c9c7f-dedf-4d90-b72e-ed969ac8dc4c&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39774653-5027-4541-92f6-4574cc99aff1&quot;,&quot;parentUUID&quot;:&quot;464c9c7f-dedf-4d90-b72e-ed969ac8dc4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:346,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21d613c3-7d85-4d53-ab22-5305132d4541&quot;,&quot;parentUUID&quot;:&quot;464c9c7f-dedf-4d90-b72e-ed969ac8dc4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39774653-5027-4541-92f6-4574cc99aff1&quot;,&quot;21d613c3-7d85-4d53-ab22-5305132d4541&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:604,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;2b10045d-61bf-4d82-a310-3bc5bc0ad026&quot;,&quot;title&quot;:&quot;/GET reservations&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /GET reservations it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/reservations`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e4133c7-146e-4a88-ac11-11060466d067&quot;,&quot;parentUUID&quot;:&quot;2b10045d-61bf-4d82-a310-3bc5bc0ad026&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET all the Reservations&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /GET reservations it should GET all the Reservations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/reservations`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.an(&#x27;object&#x27;)\n    const { docs, totalDocs } = body\n    docs.should.be.a(&#x27;array&#x27;)\n    totalDocs.should.be.a(&#x27;number&#x27;)\n    const reservationHead = _.head(docs)\n    reservationHead.should.include.keys(\n      &#x27;code&#x27;,\n      &#x27;departure&#x27;,\n      &#x27;tour&#x27;\n    )\n    reservationHead._id.should.be.a(&#x27;string&#x27;)\n    reservationHead.travelerLastName.should.be.a(&#x27;string&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b7cef6c-e8bd-4a39-ba7d-aae2aa44cfa6&quot;,&quot;parentUUID&quot;:&quot;2b10045d-61bf-4d82-a310-3bc5bc0ad026&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e4133c7-146e-4a88-ac11-11060466d067&quot;,&quot;3b7cef6c-e8bd-4a39-ba7d-aae2aa44cfa6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:261,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;c6defd2f-002b-4007-b178-eb364c28fa35&quot;,&quot;title&quot;:&quot;/POST reservations&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a reservation without tour&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /POST reservations it should NOT POST a reservation without tour&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:187,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const reservationsOne = {}\nchai\n  .request(server)\n  .post(`${url}/reservations`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(reservationsOne)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    errors.msg.should.have.length(24)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be027fd3-09c0-421f-8f0f-9ac4687f1e78&quot;,&quot;parentUUID&quot;:&quot;c6defd2f-002b-4007-b178-eb364c28fa35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a contracts 100 percentage&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /POST reservations it should POST a contracts 100 percentage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:532,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/contracts`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(contractData)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    idIntention = body._id\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;percentage&#x27;).eql(contractData.payAmount)\n    body.should.have.property(&#x27;idOperation&#x27;).eql(contractData.id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;adfbf23c-d8ae-4d75-b9ab-e8873007c410&quot;,&quot;parentUUID&quot;:&quot;c6defd2f-002b-4007-b178-eb364c28fa35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a reservations &quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /POST reservations it should POST a reservations &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:622,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fackEmail = &#x27;pepito@gmail.com&#x27;\nconst reservationsPost = {\n  travelerFirstName: faker.random.words(),\n  travelerLastName: faker.random.words(),\n  travelerEmail: fackEmail,\n  travelerPhone: {\n    number: &#x27;+57 314 3605160&#x27;,\n    code: &#x27;CO&#x27;\n  },\n  travelerDocument: faker.random.word(),\n  travelerAddress: faker.random.word(),\n  travelerBirthDay: &#x27;02-10-2020&#x27;,\n  travelerGender: &#x27;M&#x27;,\n  country: faker.random.word(),\n  city: faker.random.word(),\n  idIntention\n}\nchai\n  .request(server)\n  .post(`${url}/reservations`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(reservationsPost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(201)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;amount&#x27;, &#x27;status&#x27;, &#x27;code&#x27;)\n    body.should.have.property(&#x27;amount&#x27;).to.be.a(&#x27;Number&#x27;)\n    body.should.have.property(&#x27;amount&#x27;).eql(980.1)\n    body.should.have.property(&#x27;status&#x27;).eql(&#x27;pending&#x27;)\n    body.should.have.property(&#x27;travelerEmail&#x27;).eql(fackEmail)\n    createdID.push(body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90902572-0c77-414d-b175-dc68fcd0192d&quot;,&quot;parentUUID&quot;:&quot;c6defd2f-002b-4007-b178-eb364c28fa35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT POST a reservation&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /POST reservations it should NOT POST a reservation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:175,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const reservationsTwo = {\n  travelerAddres: faker.random.word(),\n  travelerGender: faker.random.word(),\n  idDeparture\n}\nchai\n  .request(server)\n  .post(`${url}/reservations`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(reservationsTwo)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.be.a(&#x27;object&#x27;)\n    errors.should.have.property(&#x27;msg&#x27;).be.a(&#x27;array&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc0c2414-f961-47b9-a789-25b56a22e1ae&quot;,&quot;parentUUID&quot;:&quot;c6defd2f-002b-4007-b178-eb364c28fa35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /POST reservations it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const reservationsTwo = {\n  travelerAddres: faker.random.word(),\n  travelerGender: faker.random.word(),\n  idDeparture\n}\nchai\n  .request(server)\n  .post(`${url}/reservations`)\n  .send(reservationsTwo)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e49988b-0ba3-4415-9925-37194568b5c3&quot;,&quot;parentUUID&quot;:&quot;c6defd2f-002b-4007-b178-eb364c28fa35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be027fd3-09c0-421f-8f0f-9ac4687f1e78&quot;,&quot;adfbf23c-d8ae-4d75-b9ab-e8873007c410&quot;,&quot;90902572-0c77-414d-b175-dc68fcd0192d&quot;,&quot;fc0c2414-f961-47b9-a789-25b56a22e1ae&quot;,&quot;0e49988b-0ba3-4415-9925-37194568b5c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1518,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;8ef2e8b8-a93f-48d2-b26f-83e2dff2d907&quot;,&quot;title&quot;:&quot;/GET/:id Reservation&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should not  GET reservation by the given code&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /GET/:id Reservation it should not  GET reservation by the given code&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:254,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/reservations/000-000`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(404)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have\n      .property(&#x27;errors&#x27;)\n      .eql({ msg: &#x27;NOT_FOUND_RESERVATION&#x27; })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68e5e337-681f-497c-aab3-3f89a0dd629e&quot;,&quot;parentUUID&quot;:&quot;8ef2e8b8-a93f-48d2-b26f-83e2dff2d907&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a reservation by the given code&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /GET/:id Reservation it should GET a reservation by the given code&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:348,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/reservations/${codeReservation}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(\n      &#x27;asTour&#x27;,\n      &#x27;canUpdate&#x27;,\n      &#x27;code&#x27;\n    )\n    body.should.have.property(&#x27;_id&#x27;).eql(idReservation)\n    body.should.have.property(&#x27;code&#x27;).eql(codeReservation)\n    body.amount.should.be.a(&#x27;number&#x27;)\n    body.asTour.should.be.a(&#x27;array&#x27;)\n    body.should.have.property(&#x27;travelerEmail&#x27;).eql(loginDetails.email)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7752a67-b870-431b-93b6-626a841c28f8&quot;,&quot;parentUUID&quot;:&quot;8ef2e8b8-a93f-48d2-b26f-83e2dff2d907&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a tour by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /GET/:id Reservation it should GET a tour by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:350,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/reservations/${idReservation}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(\n      &#x27;asTour&#x27;,\n      &#x27;canUpdate&#x27;,\n      &#x27;code&#x27;\n    )\n    body.should.have.property(&#x27;_id&#x27;).eql(idReservation)\n    body.should.have.property(&#x27;code&#x27;).eql(codeReservation)\n    body.amount.should.be.a(&#x27;number&#x27;)\n    body.asTour.should.be.a(&#x27;array&#x27;)\n    body.should.have.property(&#x27;travelerEmail&#x27;).eql(loginDetails.email)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6855cbe-5933-485d-9732-6c06a3cf4d27&quot;,&quot;parentUUID&quot;:&quot;8ef2e8b8-a93f-48d2-b26f-83e2dff2d907&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;68e5e337-681f-497c-aab3-3f89a0dd629e&quot;,&quot;f7752a67-b870-431b-93b6-626a841c28f8&quot;,&quot;d6855cbe-5933-485d-9732-6c06a3cf4d27&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:952,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;d7e09259-0e21-4209-8228-e05cf1151519&quot;,&quot;title&quot;:&quot;/GET/payment/:code Reservation&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a tour by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /GET/payment/:code Reservation it should GET a tour by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:758,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/reservations/payment/${codeReservation}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.have.property(&#x27;idReservation&#x27;).eql(idReservation)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;transactions&#x27;)\n    body.transactions.should.have.lengthOf(0)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b631ff49-409c-4ee7-94db-9112060f6e24&quot;,&quot;parentUUID&quot;:&quot;d7e09259-0e21-4209-8228-e05cf1151519&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b631ff49-409c-4ee7-94db-9112060f6e24&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:758,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;45cda2c4-7c8d-44a7-99aa-010d24150dde&quot;,&quot;title&quot;:&quot;/PATCH/:id reservations&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\reservations.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\reservations.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should UPDATE a tour given the id&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /PATCH/:id reservations it should UPDATE a tour given the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:348,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst emergencyName = faker.random.words()\nconst emergencyLastName = faker.random.words()\nconst dataUpdate = {\n  travelerFirstName: faker.random.words(),\n  travelerLastName: faker.random.words(),\n  travelerEmail: &#x27;user@user.com&#x27;,\n  travelerPhone: {\n    number: faker.random.words(),\n    code: faker.random.words()\n  },\n  travelerDocument: faker.random.words(),\n  travelerAddress: faker.random.words(),\n  travelerBirthDay: &#x27;2020-09-11T13:58:49.529Z&#x27;,\n  travelerGender: &#x27;F&#x27;,\n  idDeparture: &#x27;5f7dd6b56ce74a8e3ff15add&#x27;,\n  country: faker.random.words(),\n  city: faker.random.words(),\n  observations: faker.random.words(),\n  status: &#x27;completed&#x27;,\n  idTour: &#x27;5fa181b202945b26c456176a&#x27;,\n  idUser: &#x27;5aa1c2c35ef7a4e97b5e995b&#x27;,\n  buyerFirstName: faker.random.words(),\n  buyerLastName: faker.random.words(),\n  buyerDocument: faker.random.words(),\n  buyerEmail: &#x27;userdoc@user.com&#x27;,\n  buyerPhone: {\n    number: faker.random.words(),\n    code: faker.random.words()\n  },\n  buyerBirthDay: &#x27;2020-09-11T13:58:49.529Z&#x27;,\n  imagePassPort: {},\n  emergencyName,\n  emergencyLastName,\n  emergencyPhone: {\n    number: faker.random.words(),\n    code: faker.random.words()\n  },\n  invoice: faker.random.words(),\n  customData: {}\n}\nchai\n  .request(server)\n  .patch(`${url}/reservations/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(dataUpdate)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;_id&#x27;).eql(id)\n    res.body.should.include.keys(\n      &#x27;status&#x27;,\n      &#x27;deleted&#x27;,\n      &#x27;_id&#x27;,\n      &#x27;idDeparture&#x27;,\n      &#x27;country&#x27;,\n      &#x27;city&#x27;,\n      &#x27;amount&#x27;,\n      &#x27;idTour&#x27;,\n      &#x27;idUser&#x27;,\n      &#x27;code&#x27;,\n      &#x27;createdAt&#x27;,\n      &#x27;updatedAt&#x27;,\n      &#x27;buyerPhone&#x27;,\n      &#x27;emergencyLastName&#x27;,\n      &#x27;emergencyName&#x27;,\n      &#x27;emergencyPhone&#x27;,\n      &#x27;invoice&#x27;,\n      &#x27;observations&#x27;\n    )\n    res.body.should.have.property(&#x27;emergencyName&#x27;).eql(emergencyName)\n    res.body.should.have\n      .property(&#x27;emergencyLastName&#x27;)\n      .eql(emergencyLastName)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fecbe55-008f-4a6a-93a3-02acd40e6ed2&quot;,&quot;parentUUID&quot;:&quot;45cda2c4-7c8d-44a7-99aa-010d24150dde&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** RESERVATIONS_USERS *********** /PATCH/:id reservations it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nconst name = faker.random.words()\nconst lastName = faker.random.words()\nchai\n  .request(server)\n  .patch(`${url}/reservations/${id}`)\n  .send({\n    emergencyName: name,\n    emergencyLastName: lastName,\n    travelerBirthDay: &#x27;02-10-2020&#x27;\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb14f3cf-e579-4bf3-8717-073f3b4f5f38&quot;,&quot;parentUUID&quot;:&quot;45cda2c4-7c8d-44a7-99aa-010d24150dde&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1fecbe55-008f-4a6a-93a3-02acd40e6ed2&quot;,&quot;bb14f3cf-e579-4bf3-8717-073f3b4f5f38&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:351,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;4a5a1627-72c1-49ab-978c-f59fd88498b9&quot;,&quot;title&quot;:&quot;*********** SETTINGS_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\settings.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\settings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6e898060-2f86-48c6-a27e-5b6a3bf045db&quot;,&quot;title&quot;:&quot;/GET settings/check&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\settings.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\settings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET &quot;,&quot;fullTitle&quot;:&quot;*********** SETTINGS_USERS *********** /GET settings/check it should GET &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/settings/check`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;currencies&#x27;, &#x27;payAmount&#x27;, &#x27;name&#x27;)\n    body.currencies.should.be.a(&#x27;array&#x27;)\n    body.payAmount.should.be.a(&#x27;array&#x27;)\n    body.name.should.be.a(&#x27;string&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ab54144-791a-41ff-8653-5656de18dc7f&quot;,&quot;parentUUID&quot;:&quot;6e898060-2f86-48c6-a27e-5b6a3bf045db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ab54144-791a-41ff-8653-5656de18dc7f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:89,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;223730bb-3054-45a6-99f4-bbc3851e320b&quot;,&quot;title&quot;:&quot;*********** STORAGE_USER ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\storage.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\storage.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** STORAGE_USER ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** STORAGE_USER *********** \&quot;after all\&quot; hook in \&quot;*********** STORAGE_USER ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  storage.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;409e750f-2c26-4cda-836b-d98ed254428a&quot;,&quot;parentUUID&quot;:&quot;223730bb-3054-45a6-99f4-bbc3851e320b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2d5d3c63-b343-4a70-9862-4c32aeffbfcc&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\storage.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\storage.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** STORAGE_USER *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:264,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d00372ed-0022-4d49-95f1-cd361ce2490f&quot;,&quot;parentUUID&quot;:&quot;2d5d3c63-b343-4a70-9862-4c32aeffbfcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** STORAGE_USER *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:342,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88097a51-56f2-4702-8aee-db4d2b2214bb&quot;,&quot;parentUUID&quot;:&quot;2d5d3c63-b343-4a70-9862-4c32aeffbfcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d00372ed-0022-4d49-95f1-cd361ce2490f&quot;,&quot;88097a51-56f2-4702-8aee-db4d2b2214bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:606,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;1ac3210e-c6fc-43a1-b835-2bbedaa95b34&quot;,&quot;title&quot;:&quot;/GET storage&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\storage.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\storage.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** STORAGE_USER *********** /GET storage it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/storage/test`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be7af068-69cc-47cc-a08e-c51fb1ff891a&quot;,&quot;parentUUID&quot;:&quot;1ac3210e-c6fc-43a1-b835-2bbedaa95b34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be7af068-69cc-47cc-a08e-c51fb1ff891a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;b1dce52d-30f8-416a-a9ac-b1663b8285d2&quot;,&quot;title&quot;:&quot;/POST Storage&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\storage.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\storage.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it is not post in Storage &quot;,&quot;fullTitle&quot;:&quot;*********** STORAGE_USER *********** /POST Storage it is not post in Storage &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/storage`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .set(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;)\n  .end((err, res) =&gt; {\n    const { body } = res\n    body.should.be.an(&#x27;object&#x27;)\n    res.should.have.status(400)\n    body.should.have.property(&#x27;errors&#x27;)\n      .eql({ msg: &#x27;No files were uploaded.&#x27; })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cedf566-07c9-4084-9de7-ecabc6fea619&quot;,&quot;parentUUID&quot;:&quot;b1dce52d-30f8-416a-a9ac-b1663b8285d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Error in params &quot;,&quot;fullTitle&quot;:&quot;*********** STORAGE_USER *********** /POST Storage Error in params &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:96,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/storage`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .set(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;)\n  .attach(&#x27;file&#x27;, fs.readFileSync(file), &#x27;pruebas.jpg&#x27;)\n  .end((err, res) =&gt; {\n    const { body } = res\n    body.should.be.an(&#x27;object&#x27;)\n    res.should.have.status(422)\n    const { errors } = body\n    errors.should.have.property(&#x27;msg&#x27;).eql(&#x27;Param file[] required&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb4ce1fb-c827-46c3-9818-5dcfa527c1be&quot;,&quot;parentUUID&quot;:&quot;b1dce52d-30f8-416a-a9ac-b1663b8285d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Empty Array Files &quot;,&quot;fullTitle&quot;:&quot;*********** STORAGE_USER *********** /POST Storage Empty Array Files &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:88,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/storage`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .set(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;)\n  .attach(&#x27;file[]&#x27;, &#x27;&#x27;)\n  .end((err, res) =&gt; {\n    const { body } = res\n    body.should.be.an(&#x27;object&#x27;)\n    res.should.have.status(400)\n    body.should.have.property(&#x27;errors&#x27;).eql({ msg: &#x27;No files were uploaded.&#x27; })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d00f4be-cc60-4375-854b-c4cb09143647&quot;,&quot;parentUUID&quot;:&quot;b1dce52d-30f8-416a-a9ac-b1663b8285d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it post in Storage video&quot;,&quot;fullTitle&quot;:&quot;*********** STORAGE_USER *********** /POST Storage it post in Storage video&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:202,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/storage`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .set(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;)\n  .attach(&#x27;file[]&#x27;, fs.readFileSync(video), &#x27;pruebas-video.mp4&#x27;)\n  .end((err, res) =&gt; {\n    const { body } = res\n    body.should.be.an(&#x27;array&#x27;)\n    const firstFile = _.head(body)\n    firstFile.should.be.an(&#x27;object&#x27;)\n    firstFile.should.include.keys(&#x27;source&#x27;, &#x27;type&#x27;, &#x27;fileName&#x27;, &#x27;_id&#x27;)\n    createdID.push(res.body[0]._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cc8df60-42f5-47e2-ad08-248b26aba9f9&quot;,&quot;parentUUID&quot;:&quot;b1dce52d-30f8-416a-a9ac-b1663b8285d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it post in Storage image&quot;,&quot;fullTitle&quot;:&quot;*********** STORAGE_USER *********** /POST Storage it post in Storage image&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2778,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/storage`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .set(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;)\n  .attach(&#x27;file[]&#x27;, fs.readFileSync(file), &#x27;pruebas.jpg&#x27;)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.body.should.be.an(&#x27;array&#x27;)\n    const firstFile = _.head(body)\n    firstFile.should.be.an(&#x27;object&#x27;)\n    firstFile.should.include.keys(&#x27;source&#x27;, &#x27;type&#x27;, &#x27;fileName&#x27;, &#x27;_id&#x27;)\n    createdID.push(res.body[0]._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;979e4021-5912-4ec4-b2e4-99c711123027&quot;,&quot;parentUUID&quot;:&quot;b1dce52d-30f8-416a-a9ac-b1663b8285d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0cedf566-07c9-4084-9de7-ecabc6fea619&quot;,&quot;bb4ce1fb-c827-46c3-9818-5dcfa527c1be&quot;,&quot;4d00f4be-cc60-4375-854b-c4cb09143647&quot;,&quot;9cc8df60-42f5-47e2-ad08-248b26aba9f9&quot;,&quot;979e4021-5912-4ec4-b2e4-99c711123027&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3250,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;c3599b58-b0f0-4461-92aa-68b56ba16413&quot;,&quot;title&quot;:&quot;/GET/:id Storage&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\storage.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\storage.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a Storage by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** STORAGE_USER *********** /GET/:id Storage it should GET a Storage by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:174,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = createdID.slice(-1).pop()\nchai\n  .request(server)\n  .get(`${url}/storage/${id}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;_id&#x27;).eql(id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5ce583e-d4d5-4057-b172-e9d3ba71c42f&quot;,&quot;parentUUID&quot;:&quot;c3599b58-b0f0-4461-92aa-68b56ba16413&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5ce583e-d4d5-4057-b172-e9d3ba71c42f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:174,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;65ac881c-d57c-4b31-a792-c2021aa06b14&quot;,&quot;title&quot;:&quot;*********** STRIPE_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\stripe.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\stripe.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** STRIPE_USERS ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** STRIPE_USERS *********** \&quot;after all\&quot; hook in \&quot;*********** STRIPE_USERS ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;payOrders.deleteMany({}, (err) =&gt; {\n  if (err) {\n    console.log(err)\n  }\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a7d2612-50f6-486e-b4c1-8a664d6e5095&quot;,&quot;parentUUID&quot;:&quot;65ac881c-d57c-4b31-a792-c2021aa06b14&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;64fae24b-d2c6-425c-97bc-7e979fc6145d&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\stripe.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\stripe.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** STRIPE_USERS *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:271,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4f3ce99-79e4-44a0-8102-fcba14de5284&quot;,&quot;parentUUID&quot;:&quot;64fae24b-d2c6-425c-97bc-7e979fc6145d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** STRIPE_USERS *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:340,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;499c4c79-ff04-4fa2-8773-2d4d57a8647e&quot;,&quot;parentUUID&quot;:&quot;64fae24b-d2c6-425c-97bc-7e979fc6145d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e4f3ce99-79e4-44a0-8102-fcba14de5284&quot;,&quot;499c4c79-ff04-4fa2-8773-2d4d57a8647e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:611,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;1bb27de0-33c6-474f-b84b-7e4cc7abebb8&quot;,&quot;title&quot;:&quot;/POST stripe&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\stripe.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\stripe.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST  without params&quot;,&quot;fullTitle&quot;:&quot;*********** STRIPE_USERS *********** /POST stripe it should NOT POST  without params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:87,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPost = {\n  token: TokenCard\n}\nchai\n  .request(server)\n  .post(`${url}/stripe`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.be.a(&#x27;object&#x27;)\n    errors.msg.should.be.a(&#x27;array&#x27;).length(2)\n    // errors.should.have.property(&#x27;msg&#x27;).eql(&#x27;Invalid integer: NaN&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76693f94-2687-40a1-9d81-b3ddc070b8c9&quot;,&quot;parentUUID&quot;:&quot;1bb27de0-33c6-474f-b84b-7e4cc7abebb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a Stripe with amount &quot;,&quot;fullTitle&quot;:&quot;*********** STRIPE_USERS *********** /POST stripe it should POST a Stripe with amount &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6046,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPost = {\n  token: TokenCard,\n  amount: price,\n  pk\n}\nchai\n  .request(server)\n  .post(`${url}/stripe`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(201)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;id&#x27;, &#x27;client_secret&#x27;, &#x27;amount&#x27;)\n    const { description, amount } = body\n    amount.should.be.a(&#x27;number&#x27;).eql(price * 100)\n    description.should.be.a(&#x27;string&#x27;).eql(&#x27;Abono a monedero&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cadc934f-abfa-4a44-b06d-665f2dff18c7&quot;,&quot;parentUUID&quot;:&quot;1bb27de0-33c6-474f-b84b-7e4cc7abebb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT POST error params&quot;,&quot;fullTitle&quot;:&quot;*********** STRIPE_USERS *********** /POST stripe it should NOT POST error params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPost = {\n  token: TokenCard,\n  reference: reservation._id\n}\nchai\n  .request(server)\n  .post(`${url}/stripe`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.be.a(&#x27;object&#x27;)\n    errors.msg.should.be.a(&#x27;array&#x27;).length(2)\n    // errors.should.have.property(&#x27;msg&#x27;).eql(&#x27;Invalid integer: NaN&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e0b2bf6-d8a7-4faf-afb5-fb0839980278&quot;,&quot;parentUUID&quot;:&quot;1bb27de0-33c6-474f-b84b-7e4cc7abebb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a Stripe with Reservation &quot;,&quot;fullTitle&quot;:&quot;*********** STRIPE_USERS *********** /POST stripe it should POST a Stripe with Reservation &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4510,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPost = {\n  token: TokenCard,\n  reference: reservation._id,\n  amount: price,\n  pk\n}\nchai\n  .request(server)\n  .post(`${url}/stripe`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPost)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.amount.should.be.a(&#x27;number&#x27;).eql(price * 100)\n    res.body.should.include.keys(&#x27;id&#x27;, &#x27;client_secret&#x27;)\n    customData = res.body\n    chai\n      .request(server)\n      .patch(`${url}/payorders/${res.body.id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .send(customData)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.include.keys(&#x27;_id&#x27;, &#x27;idOperation&#x27;, &#x27;customData&#x27;)\n        body.should.have.property(&#x27;status&#x27;).eql(&#x27;succeeded&#x27;)\n        body.should.have.property(&#x27;idOperation&#x27;).eql(res.body.id)\n        body.should.have.property(&#x27;amount&#x27;).to.be.a(&#x27;Number&#x27;)\n        body.should.have.property(&#x27;amount&#x27;).eql(price)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3138afc4-876d-4398-9902-c5919ab8862f&quot;,&quot;parentUUID&quot;:&quot;1bb27de0-33c6-474f-b84b-7e4cc7abebb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** STRIPE_USERS *********** /POST stripe it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/stripe`)\n  .send({\n    token: TokenCard,\n    reference: reservation._id,\n    amount: price\n  })\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cbace26-bc49-4429-a80a-d639fe4fc050&quot;,&quot;parentUUID&quot;:&quot;1bb27de0-33c6-474f-b84b-7e4cc7abebb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76693f94-2687-40a1-9d81-b3ddc070b8c9&quot;,&quot;cadc934f-abfa-4a44-b06d-665f2dff18c7&quot;,&quot;6e0b2bf6-d8a7-4faf-afb5-fb0839980278&quot;,&quot;3138afc4-876d-4398-9902-c5919ab8862f&quot;,&quot;4cbace26-bc49-4429-a80a-d639fe4fc050&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10747,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;a593abe7-e193-491d-86e8-8b7975fa4fe7&quot;,&quot;title&quot;:&quot;*********** SUPPORT_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\support.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\support.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** SUPPORT_USERS ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_USERS *********** \&quot;after all\&quot; hook in \&quot;*********** SUPPORT_USERS ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  support.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b453494-d2fb-4bb8-84d8-d384962a9c2d&quot;,&quot;parentUUID&quot;:&quot;a593abe7-e193-491d-86e8-8b7975fa4fe7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;35248e0d-93d1-4890-8f5a-6afea22cf336&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\support.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\support.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_USERS *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:266,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39d8e9c1-07c3-4485-930c-4867bf8ec937&quot;,&quot;parentUUID&quot;:&quot;35248e0d-93d1-4890-8f5a-6afea22cf336&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_USERS *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:347,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9d4b159-d5b3-4d41-8268-7a6a628cfe81&quot;,&quot;parentUUID&quot;:&quot;35248e0d-93d1-4890-8f5a-6afea22cf336&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39d8e9c1-07c3-4485-930c-4867bf8ec937&quot;,&quot;a9d4b159-d5b3-4d41-8268-7a6a628cfe81&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:613,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;bbab1b85-bbc6-4b25-8198-38fdab5461f3&quot;,&quot;title&quot;:&quot;/GET support&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\support.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\support.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_USERS *********** /GET support it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/support`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d90ec5e0-ec73-430b-a5c7-07cdb5a94788&quot;,&quot;parentUUID&quot;:&quot;bbab1b85-bbc6-4b25-8198-38fdab5461f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET all the support&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_USERS *********** /GET support it should GET all the support&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:193,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/support/${codeReservation}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.docs.should.be.a(&#x27;array&#x27;)\n    body.totalDocs.should.be.a(&#x27;number&#x27;).eql(1)\n    const { docs } = body\n    const firstChat = _.head(docs)\n    firstChat.should.include.keys(\n      &#x27;_id&#x27;,\n      &#x27;status&#x27;,\n      &#x27;hash&#x27;,\n      &#x27;firstMessage&#x27;,\n      &#x27;codeReservation&#x27;\n    )\n    firstChat._id.should.be.a(&#x27;string&#x27;)\n    firstChat.hash.should.be.a(&#x27;string&#x27;).eql(hash)\n    firstChat.codeReservation.should.be.a(&#x27;string&#x27;).eql(codeReservation)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0344f36-fae2-4b13-9a5e-32961f8c27f4&quot;,&quot;parentUUID&quot;:&quot;bbab1b85-bbc6-4b25-8198-38fdab5461f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not  GET support by codeReservation&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_USERS *********** /GET support it should not  GET support by codeReservation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:173,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/support/6035014000c0712dcc000368`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.have.property(&#x27;docs&#x27;)\n    const { docs } = body\n    docs.should.be.an(&#x27;array&#x27;)\n    docs.should.have.length(0)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9ece9a5-4386-4f4a-82fe-12206351aa79&quot;,&quot;parentUUID&quot;:&quot;bbab1b85-bbc6-4b25-8198-38fdab5461f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d90ec5e0-ec73-430b-a5c7-07cdb5a94788&quot;,&quot;c0344f36-fae2-4b13-9a5e-32961f8c27f4&quot;,&quot;e9ece9a5-4386-4f4a-82fe-12206351aa79&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:369,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;bd6bd5d1-9bbb-4aa1-a0c8-d95fb350d999&quot;,&quot;title&quot;:&quot;/POST To new support&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\support.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\support.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;error in params&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_USERS *********** /POST To new support error in params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:91,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const messagePost = {\n  message: faker.random.words()\n}\nchai\n  .request(server)\n  .post(`${url}/support`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(messagePost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3dde19ef-3d89-4dd7-a98e-1a8d2afd025d&quot;,&quot;parentUUID&quot;:&quot;bd6bd5d1-9bbb-4aa1-a0c8-d95fb350d999&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST to with hash&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_USERS *********** /POST To new support it should POST to with hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:288,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const messagePost = {\n  message: faker.random.words(),\n  codeReservation,\n  hash\n}\nchai\n  .request(server)\n  .post(`${url}/support`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(messagePost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;hash&#x27;)\n    body.should.include.property(&#x27;hash&#x27;).eql(hash)\n    body._id.should.be.a(&#x27;string&#x27;)\n    body.hash.should.be.a(&#x27;string&#x27;)\n    // body.messages.should.be.a(&#x27;array&#x27;).length(2)\n    body.codeReservation.should.be.a(&#x27;string&#x27;).eql(codeReservation)\n    const lastMessage = _.last(body.messages)\n    lastMessage.should.have.property(&#x27;message&#x27;).eql(messagePost.message)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73992942-a7d2-4506-9adc-0a6aa087b6fa&quot;,&quot;parentUUID&quot;:&quot;bd6bd5d1-9bbb-4aa1-a0c8-d95fb350d999&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;new support&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_USERS *********** /POST To new support new support&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:506,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const messagePost = {\n  message: faker.random.words(),\n  codeReservation\n}\nchai\n  .request(server)\n  .post(`${url}/support`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(messagePost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;hash&#x27;)\n    body._id.should.be.a(&#x27;string&#x27;)\n    body.hash.should.be.a(&#x27;string&#x27;)\n    body.messages.should.be.a(&#x27;array&#x27;).length(1)\n    const lastMessage = _.last(body.messages)\n    lastMessage.should.have.property(&#x27;message&#x27;).eql(messagePost.message)\n    body.codeReservation.should.be.a(&#x27;string&#x27;).eql(codeReservation)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43023bea-d5c6-405b-b9f0-6d776bd1c355&quot;,&quot;parentUUID&quot;:&quot;bd6bd5d1-9bbb-4aa1-a0c8-d95fb350d999&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3dde19ef-3d89-4dd7-a98e-1a8d2afd025d&quot;,&quot;73992942-a7d2-4506-9adc-0a6aa087b6fa&quot;,&quot;43023bea-d5c6-405b-b9f0-6d776bd1c355&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:885,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;2c4f47ca-e4ab-4674-a5c7-567226d49595&quot;,&quot;title&quot;:&quot;/GET/: support currentChat&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\support.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\support.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET support by hash&quot;,&quot;fullTitle&quot;:&quot;*********** SUPPORT_USERS *********** /GET/: support currentChat it should GET support by hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:175,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/support/currentChat`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(object)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;_id&#x27;, &#x27;hash&#x27;)\n    body.should.have.property(&#x27;hash&#x27;).eql(hash)\n    // body.messages.should.be.a(&#x27;array&#x27;).length(2)\n    body.codeReservation.should.be.a(&#x27;string&#x27;).eql(codeReservation)\n    createdID.push(res.body._id)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86f404b2-077e-484d-a23f-37b2bdff20dc&quot;,&quot;parentUUID&quot;:&quot;2c4f47ca-e4ab-4674-a5c7-567226d49595&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;86f404b2-077e-484d-a23f-37b2bdff20dc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:175,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;3a129131-32b8-450e-ac8d-6b4f936d5134&quot;,&quot;title&quot;:&quot;*********** TOURS_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** TOURS_USERS ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** \&quot;after all\&quot; hook in \&quot;*********** TOURS_USERS ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  Tour.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7f36c5d-deab-4ad3-adf1-e50fadc36058&quot;,&quot;parentUUID&quot;:&quot;3a129131-32b8-450e-ac8d-6b4f936d5134&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3213b6fb-9201-4feb-9e3b-22322d1b1408&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:315,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;457adc12-a36a-42f6-ac57-909fd005db68&quot;,&quot;parentUUID&quot;:&quot;3213b6fb-9201-4feb-9e3b-22322d1b1408&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:345,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23d1210a-0e1b-48e8-b7c9-193a341e8e6f&quot;,&quot;parentUUID&quot;:&quot;3213b6fb-9201-4feb-9e3b-22322d1b1408&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;457adc12-a36a-42f6-ac57-909fd005db68&quot;,&quot;23d1210a-0e1b-48e8-b7c9-193a341e8e6f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:660,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;70341cc4-a764-4a99-9b2a-a7bf215699ab&quot;,&quot;title&quot;:&quot;/GET tours&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the tours&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** /GET tours it should GET all the tours&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:183,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    const { docs, totalDocs } = body\n    body.should.be.an(&#x27;object&#x27;)\n    body.hasNextPage.should.be.a(&#x27;boolean&#x27;)\n    body.hasPrevPage.should.be.a(&#x27;boolean&#x27;)\n    body.limit.should.be.a(&#x27;number&#x27;)\n    body.page.should.be.a(&#x27;number&#x27;)\n    body.pagingCounter.should.be.a(&#x27;number&#x27;)\n    body.totalPages.should.be.a(&#x27;number&#x27;)\n    totalDocs.should.be.a(&#x27;number&#x27;).eql(2)\n    docs.should.be.a(&#x27;array&#x27;)\n    docs.should.have.lengthOf(2)\n    _.map(docs, (a, i) =&gt; {\n      docs[i].category.should.be.a(&#x27;array&#x27;).lengthOf(1)\n      docs[i].should.include.keys(&#x27;title&#x27;, &#x27;slug&#x27;, &#x27;route&#x27;)\n    })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf0c3d9a-1e96-4ee9-85c5-3c956e1dbe25&quot;,&quot;parentUUID&quot;:&quot;70341cc4-a764-4a99-9b2a-a7bf215699ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET the tours with limit&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** /GET tours it should GET the tours with limit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:199,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours?limit=1`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.an(&#x27;object&#x27;)\n    body.docs.should.be.a(&#x27;array&#x27;)\n    body.docs.should.have.lengthOf(1)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f825cca8-5f51-44a6-b05d-f617a264e90f&quot;,&quot;parentUUID&quot;:&quot;70341cc4-a764-4a99-9b2a-a7bf215699ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET the tours with query,Empty&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** /GET tours it should GET the tours with query,Empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:88,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours?query=zzzzzzzzzz`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    const { body } = res\n    body.should.be.an(&#x27;object&#x27;)\n    body.docs.should.be.a(&#x27;array&#x27;)\n    body.docs.should.have.lengthOf(0)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23ef9cbb-25cb-4121-ae44-1248ebedded2&quot;,&quot;parentUUID&quot;:&quot;70341cc4-a764-4a99-9b2a-a7bf215699ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET the tours with query&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** /GET tours it should GET the tours with query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:194,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours?query=medellin`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.docs.should.be.a(&#x27;array&#x27;)\n    body.docs.should.have.lengthOf(1)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dd9e968-39eb-4939-9540-efae54a932e8&quot;,&quot;parentUUID&quot;:&quot;70341cc4-a764-4a99-9b2a-a7bf215699ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET number tours for continents&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** /GET tours it should GET number tours for continents&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours/forContinents`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;Array&#x27;)\n    _.map(res.body, (a, i) =&gt; {\n      body[i].should.have.property(&#x27;count&#x27;).to.be.a(&#x27;number&#x27;)\n      body[i].should.have.property(&#x27;count&#x27;).to.be.above(0)\n    })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7fd9a76-0ee8-4974-89a8-7318e4294623&quot;,&quot;parentUUID&quot;:&quot;70341cc4-a764-4a99-9b2a-a7bf215699ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET departures tours&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** /GET tours it should GET departures tours&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:91,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours/departures/tour-one`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;Object&#x27;)\n    body.should.have.property(&#x27;departures&#x27;)\n    body.should.have.property(&#x27;departures&#x27;).be.an(&#x27;Array&#x27;)\n    body.should.have.property(&#x27;status&#x27;).eql(&#x27;publish&#x27;)\n    body.should.have.property(&#x27;slug&#x27;).eql(&#x27;tour-one&#x27;)\n    body.departures.should.have.length(1)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0365c635-bb0a-4451-a048-23872629c919&quot;,&quot;parentUUID&quot;:&quot;70341cc4-a764-4a99-9b2a-a7bf215699ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bf0c3d9a-1e96-4ee9-85c5-3c956e1dbe25&quot;,&quot;f825cca8-5f51-44a6-b05d-f617a264e90f&quot;,&quot;23ef9cbb-25cb-4121-ae44-1248ebedded2&quot;,&quot;4dd9e968-39eb-4939-9540-efae54a932e8&quot;,&quot;f7fd9a76-0ee8-4974-89a8-7318e4294623&quot;,&quot;0365c635-bb0a-4451-a048-23872629c919&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:845,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;c5abaa54-f829-4668-85f9-2de93c8342cc&quot;,&quot;title&quot;:&quot;*********** SEARCH TOURS ******************&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;with out params&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** *********** SEARCH TOURS ****************** with out params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours/search`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(404)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;).eql({ msg: &#x27;Params Error&#x27; })\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe6f1720-0201-4826-837d-6248bc6086e9&quot;,&quot;parentUUID&quot;:&quot;c5abaa54-f829-4668-85f9-2de93c8342cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;search with params&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** *********** SEARCH TOURS ****************** search with params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:590,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours/search?query=MedeLLIN`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;tours&#x27;)\n    body.should.have.property(&#x27;places&#x27;)\n    body.tours.should.have.lengthOf(1)\n    body.tours[0].should.have.property(&#x27;title&#x27;).eql(&#x27;tour one&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;847d6fbf-1363-4cca-a0e7-56f4e517ad29&quot;,&quot;parentUUID&quot;:&quot;c5abaa54-f829-4668-85f9-2de93c8342cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;empty search&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** *********** SEARCH TOURS ****************** empty search&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:565,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours/search?query=zzzzzzzzzzzzzzzzzz`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;tours&#x27;)\n    body.should.have.property(&#x27;places&#x27;)\n    body.tours.should.have.lengthOf(0)\n    body.places.should.have.lengthOf(0)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ade09d4e-372a-4c4f-9bda-563a5aa5cda6&quot;,&quot;parentUUID&quot;:&quot;c5abaa54-f829-4668-85f9-2de93c8342cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe6f1720-0201-4826-837d-6248bc6086e9&quot;,&quot;847d6fbf-1363-4cca-a0e7-56f4e517ad29&quot;,&quot;ade09d4e-372a-4c4f-9bda-563a5aa5cda6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1158,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;e79f2c9d-da85-471f-a154-a15190c5f110&quot;,&quot;title&quot;:&quot;/GET/:id tour&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\tours.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\tours.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a tour by the given id&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** /GET/:id tour it should GET a tour by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours/5fa181b202945b26c456176a`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;title&#x27;)\n    body.should.have.property(&#x27;_id&#x27;).eql(&#x27;5fa181b202945b26c456176a&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;303221db-dc38-49eb-99f7-12b1198dfeb5&quot;,&quot;parentUUID&quot;:&quot;e79f2c9d-da85-471f-a154-a15190c5f110&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a tour by the given slug&quot;,&quot;fullTitle&quot;:&quot;*********** TOURS_USERS *********** /GET/:id tour it should GET a tour by the given slug&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:92,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/tours/tour-one`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((error, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;title&#x27;)\n    body.should.have.property(&#x27;slug&#x27;).eql(&#x27;tour-one&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7054e139-6154-4596-ab7d-9eb7b4d9ef5b&quot;,&quot;parentUUID&quot;:&quot;e79f2c9d-da85-471f-a154-a15190c5f110&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;303221db-dc38-49eb-99f7-12b1198dfeb5&quot;,&quot;7054e139-6154-4596-ab7d-9eb7b4d9ef5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:192,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;3df9e37a-1e6b-4787-98b2-0481a74a0086&quot;,&quot;title&quot;:&quot;*********** MANAGER_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\users.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\users.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** MANAGER_USERS ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** MANAGER_USERS *********** \&quot;after all\&quot; hook in \&quot;*********** MANAGER_USERS ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createdID.forEach((id) =&gt; {\n  User.findByIdAndRemove(id, (err) =&gt; {\n    if (err) {\n      // console.log(err)\n    }\n  })\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac682664-9860-4c18-be46-1e24a1781ac7&quot;,&quot;parentUUID&quot;:&quot;3df9e37a-1e6b-4787-98b2-0481a74a0086&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;45e3b57f-11e2-4f30-a6ea-0908298810ef&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\users.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\users.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** MANAGER_USERS *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:255,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f774f595-26b3-4e4c-93cc-0730643e5d8e&quot;,&quot;parentUUID&quot;:&quot;45e3b57f-11e2-4f30-a6ea-0908298810ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** MANAGER_USERS *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:351,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    publicId = res.body.user._id\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb875023-e26c-42a1-90a6-455ab7b9e5f2&quot;,&quot;parentUUID&quot;:&quot;45e3b57f-11e2-4f30-a6ea-0908298810ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f774f595-26b3-4e4c-93cc-0730643e5d8e&quot;,&quot;cb875023-e26c-42a1-90a6-455ab7b9e5f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:606,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;a98b2ae9-55e5-422f-8676-424deac9e567&quot;,&quot;title&quot;:&quot;/GET users&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\users.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\users.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET public profile&quot;,&quot;fullTitle&quot;:&quot;*********** MANAGER_USERS *********** /GET users it should GET public profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:175,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/users/public/${publicId}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.have.property(&#x27;id&#x27;).eql(publicId)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfa4c955-47e8-4d31-8516-a66cb73d54a9&quot;,&quot;parentUUID&quot;:&quot;a98b2ae9-55e5-422f-8676-424deac9e567&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dfa4c955-47e8-4d31-8516-a66cb73d54a9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:175,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;42422213-3f9c-4ac6-9474-1ca6e5ee24f4&quot;,&quot;title&quot;:&quot;*********** WALLETS_USERS ***********&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\wallets.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\wallets.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;*********** WALLETS_USERS ***********\&quot;&quot;,&quot;fullTitle&quot;:&quot;*********** WALLETS_USERS *********** \&quot;after all\&quot; hook in \&quot;*********** WALLETS_USERS ***********\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collectionPayOrder.deleteMany({}, (err) =&gt; {\n  if (err) {\n    // console.log(err)\n  }\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e893600d-4f05-447f-a87d-43f9698342d8&quot;,&quot;parentUUID&quot;:&quot;42422213-3f9c-4ac6-9474-1ca6e5ee24f4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dd12e239-7aec-45dc-badd-4e46fc1b1c47&quot;,&quot;title&quot;:&quot;/POST login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\wallets.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\wallets.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET token user&quot;,&quot;fullTitle&quot;:&quot;*********** WALLETS_USERS *********** /POST login it should GET token user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:282,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/login`)\n  .send(loginDetails)\n  .end((err, res) =&gt; {\n    res.should.have.status(200)\n    res.body.should.be.an(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;accessToken&#x27;, &#x27;user&#x27;)\n    const currentAccessToken = res.body.accessToken\n    accessToken = currentAccessToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44bdbba1-db90-4fb1-b8fa-856319197bbc&quot;,&quot;parentUUID&quot;:&quot;dd12e239-7aec-45dc-badd-4e46fc1b1c47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET a fresh token&quot;,&quot;fullTitle&quot;:&quot;*********** WALLETS_USERS *********** /POST login it should GET a fresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:339,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(`${url}/exchange`)\n  .send({\n    accessToken\n  })\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    body.should.be.an(&#x27;object&#x27;)\n    body.should.include.keys(&#x27;token&#x27;, &#x27;user&#x27;)\n    const currentToken = body.token\n    token = currentToken\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;504dce8d-1f69-4da5-a54c-dbb824d881e6&quot;,&quot;parentUUID&quot;:&quot;dd12e239-7aec-45dc-badd-4e46fc1b1c47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;44bdbba1-db90-4fb1-b8fa-856319197bbc&quot;,&quot;504dce8d-1f69-4da5-a54c-dbb824d881e6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:621,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;ce00dc81-b57c-49b5-9a93-62508de6fe7f&quot;,&quot;title&quot;:&quot;/GET wallets&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\wallets.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\wallets.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT be able to consume the route since no token was sent&quot;,&quot;fullTitle&quot;:&quot;*********** WALLETS_USERS *********** /GET wallets it should NOT be able to consume the route since no token was sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/wallets`)\n  .end((err, res) =&gt; {\n    res.should.have.status(401)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb1d9e7a-9f75-4575-8031-969330c70ca4&quot;,&quot;parentUUID&quot;:&quot;ce00dc81-b57c-49b5-9a93-62508de6fe7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should GET to wallets&quot;,&quot;fullTitle&quot;:&quot;*********** WALLETS_USERS *********** /GET wallets it should GET to wallets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:254,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`${url}/wallets`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(200)\n    const { docs, total } = body\n    body.should.be.a(&#x27;object&#x27;)\n    body.hasNextPage.should.be.a(&#x27;boolean&#x27;)\n    body.hasPrevPage.should.be.a(&#x27;boolean&#x27;)\n    body.limit.should.be.a(&#x27;number&#x27;)\n    body.page.should.be.a(&#x27;number&#x27;)\n    body.pagingCounter.should.be.a(&#x27;number&#x27;)\n    body.totalDocs.should.be.a(&#x27;number&#x27;)\n    body.should.include.keys(&#x27;total&#x27;, &#x27;docs&#x27;)\n    docs.should.be.a(&#x27;array&#x27;).length(0)\n    total.should.be.a(&#x27;number&#x27;).eql(0)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c7ed684-b6ff-4dfd-9e6f-f11179b3b760&quot;,&quot;parentUUID&quot;:&quot;ce00dc81-b57c-49b5-9a93-62508de6fe7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eb1d9e7a-9f75-4575-8031-969330c70ca4&quot;,&quot;6c7ed684-b6ff-4dfd-9e6f-f11179b3b760&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:257,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;4a7bb460-edc2-4226-adb4-38142433b4fb&quot;,&quot;title&quot;:&quot;/POST postPayOrder&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\test\\testApi\\wallets.js&quot;,&quot;file&quot;:&quot;\\test\\testApi\\wallets.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST  without params&quot;,&quot;fullTitle&quot;:&quot;*********** WALLETS_USERS *********** /POST postPayOrder it should NOT POST  without params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPost = {\n  token: TokenCard\n}\nchai\n  .request(server)\n  .post(`${url}/stripe`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPost)\n  .end((err, res) =&gt; {\n    const { body } = res\n    res.should.have.status(422)\n    body.should.be.a(&#x27;object&#x27;)\n    body.should.have.property(&#x27;errors&#x27;)\n    const { errors } = body\n    errors.should.be.a(&#x27;object&#x27;)\n    errors.msg.should.be.a(&#x27;array&#x27;).length(2)\n    // errors[0].should.have.property(&#x27;msg&#x27;).eql(&#x27;Invalid integer: NaN&#x27;)\n    done()\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37c5d6ef-f51e-4f74-8522-628f3f64d242&quot;,&quot;parentUUID&quot;:&quot;4a7bb460-edc2-4226-adb4-38142433b4fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a Stripe with amount &quot;,&quot;fullTitle&quot;:&quot;*********** WALLETS_USERS *********** /POST postPayOrder it should POST a Stripe with amount &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3225,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const orderPost = {\n  token: TokenCard,\n  amount: price,\n  pk\n}\nchai\n  .request(server)\n  .post(`${url}/stripe`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(orderPost)\n  .end((err, res) =&gt; {\n    res.should.have.status(201)\n    res.body.should.be.a(&#x27;object&#x27;)\n    res.body.should.include.keys(&#x27;id&#x27;, &#x27;client_secret&#x27;)\n    const customData = res.body\n    chai\n      .request(server)\n      .patch(`${url}/payorders/${res.body.id}`)\n      .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n      .send(customData)\n      .end((error, result) =&gt; {\n        const { body } = result\n        result.should.have.status(200)\n        body.should.be.a(&#x27;object&#x27;)\n        body.should.include.keys(&#x27;_id&#x27;, &#x27;idOperation&#x27;)\n        body.should.have.property(&#x27;status&#x27;).eql(&#x27;succeeded&#x27;)\n        body.should.have.property(&#x27;idOperation&#x27;).eql(res.body.id)\n        body.should.have.property(&#x27;amount&#x27;).to.be.a(&#x27;Number&#x27;)\n        body.should.have.property(&#x27;amount&#x27;).eql(price)\n        done()\n      })\n  })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af72f17e-0983-4d49-a909-270f7bd76a4e&quot;,&quot;parentUUID&quot;:&quot;4a7bb460-edc2-4226-adb4-38142433b4fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;37c5d6ef-f51e-4f74-8522-628f3f64d242&quot;,&quot;af72f17e-0983-4d49-a909-270f7bd76a4e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3315,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:30000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.3.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.2.2&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;5.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;api&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\USUARIO\\Documents\\empresa\\mochileros 3.0\\api\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>